<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[é—·éªšçš„æ‚Ÿç©º]]></title>
  <subtitle><![CDATA[ç«‹ä¸€ä¸šè°‹ç”Ÿ æ‹©ä¸€åŸç»ˆè€ æºä¸€äººç™½é¦–]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://hi.zongquan.wang/"/>
  <updated>2016-11-08T09:28:24.000Z</updated>
  <id>http://hi.zongquan.wang/</id>
  
  <author>
    <name><![CDATA[é—·éªšçš„æ‚Ÿç©º]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[Fix Bug for Interface Inspector on macOS Serria]]></title>
    <link href="http://hi.zongquan.wang/2016/11/08/Fix_Bug_for_Interface_Inspector_on_macOS_Serria/"/>
    <id>http://hi.zongquan.wang/2016/11/08/Fix_Bug_for_Interface_Inspector_on_macOS_Serria/</id>
    <published>2016-11-08T08:32:57.000Z</published>
    <updated>2016-11-08T09:28:24.000Z</updated>
    <content type="html"><![CDATA[<p>ä¹‹å‰ä»‹ç»è¿‡<a href="http://hi.zongquan.wang/2016/04/21/Hack_Interface_Inspector/">å¦‚ä½•ç ´è§£ Interface Inspector</a>ï¼Œè¿‘æ¥æŠŠç³»ç»Ÿå‡çº§åˆ°æœ€æ–°çš„ macOS Serria ä¹‹åï¼Œå‘ç° Interface Inspector ä¸ work äº†ã€‚å¯åŠ¨å€’æ˜¯æ­£å¸¸ï¼Œä½†æ¯æ¬¡ attach app æ—¶ï¼Œæ€»æ˜¯æç¤ºæ— æ³• attachï¼ŒæŸ¥çœ‹ system logï¼Œå‘ç°æœ‰è¿™ä¹ˆä¸€ä¸ª errorï¼š</p>
<p><img src="/img/Fix_Bug_for_Interface_Inspector_on_macOS_Serria/log.png" alt="log"></p>
<p>ä» log ä¸­çœ‹å‡ºï¼Œroot cause æ˜¯ <em>mach_inject_bundle_stub</em> å» load <code>___pthread_set_self</code> æ—¶å¤±è´¥äº†ï¼Œè€Œè¿™ä¸ªå‡½æ•°æœ¬æ¥åº”è¯¥æ˜¯åœ¨ <em>libSystem.B.dylb</em> è¿™ä¸ªç³»ç»Ÿåº“é‡Œé¢çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒmacOS Serria çš„ <em>libSystem.B.dylb</em> å·²ç»ä¸å†æœ‰ <code>___pthread_set_self</code> è¿™ä¸ªå‡½æ•°äº†ã€‚äºæ˜¯å¼€å§‹ googleï¼Œæœ€ååœ¨<a href="https://twitter.com/snielsen42/status/778405531383836674" target="_blank" rel="external">ä¸€æ¡ Twitter</a> ä¸Šå‘ç°äº†å’‹å›äº‹ï¼Œæ˜¯çš„ï¼Œ<code>___pthread_set_self</code> å·²ç»è¢«æ›¿æ¢æˆäº† <code>_pthread_set_self</code>ã€‚</p>
<p>æ˜ç™½äº†å’‹å›äº‹ï¼Œå¼€å§‹è€ƒè™‘æ€ä¹ˆè§£å†³ã€‚</p>
<a id="more"></a>
<h2 id="æ–¹æ³•_1ï¼š">æ–¹æ³• 1ï¼š</h2><p>ä¿®æ”¹ <em>mach_inject_bundle_stub</em> çš„ load æŒ‡ä»¤ï¼Œä»æ—§ç‰ˆç³»ç»Ÿä¸­ copy ä¸€ä»½è€çš„ <em>libSystem.B.dylb</em>ï¼Œç„¶åè®© <em>mach_inject_bundle_stub</em> å» load è¿™ä¸ªè€çš„åº“ã€‚</p>
<h2 id="æ–¹æ³•_2ï¼š">æ–¹æ³• 2ï¼š</h2><p>è¿˜æ˜¯ä¿®æ”¹ <em>mach_inject_bundle_stub</em>ï¼ŒæŠŠæ‰€æœ‰è°ƒç”¨ <code>___pthread_set_self</code> çš„åœ°æ–¹æ”¹æˆè°ƒç”¨ <code>_pthread_set_self</code>ã€‚</p>
<p>ç†è®ºä¸Šè¿™ä¸¤ç§æ–¹æ³•åº”è¯¥éƒ½å¯ä»¥çš„å§ï¼Œä½†æ˜¯è€ƒè™‘åˆ°è‡ªå·±é€†å‘åŠŸåŠ›ä¸å¤Ÿï¼Œæ‰€ä»¥å°±é‡‡ç”¨äº†å¦‚ä¸‹çš„æ­£å‘æ–¹æ³• XDã€‚</p>
<h1 id="æ–¹æ³•_3ï¼š">æ–¹æ³• 3ï¼š</h1><p>æˆ‘æœç´¢äº†ä¸€ä¸‹ <em>mach_inject_bundle_stub</em> è¿™ä¸ªä¸œè¥¿ï¼Œå‘ç°åŸæ¥æ˜¯ä¸ª GitHub ä¸Šçš„<a href="https://github.com/wzqcongcong/mach_inject" target="_blank" rel="external">å¼€æºåº“</a>ï¼ŒInterface Inspector å°±æ˜¯ç”¨çš„è¿™ä¸ªåº“ã€‚app ä¼šåœ¨ <code>/Library/Frameworks/mach_inject_bundle.framework</code> è¿™é‡Œå®‰è£…è¿™ä¸ªåº“ï¼Œè€Œ <em>mach_inject_bundle_stub</em> å°±æ˜¯è¿™ä¸ªåº“é‡Œé¢çš„ä¸€ä¸ªå­ bundleã€‚æœ‰äº† source code å°±å¥½åŠäº†ï¼Œåªéœ€è¦ä¿®æ”¹ codeï¼Œç„¶åé‡æ–°ç¼–è¯‘æ›¿æ¢æ‰ <em>mach_inject_bundle_stub</em> è¿™ä¸ª bundle å°±å¥½äº†ã€‚</p>
<p>æ­¥éª¤ï¼š</p>
<h3 id="1-_fork_it">1. fork it</h3><h3 id="2-_ä¿®æ”¹_code">2. ä¿®æ”¹ code</h3><p><img src="/img/Fix_Bug_for_Interface_Inspector_on_macOS_Serria/github.png" alt="github"></p>
<h3 id="3-_ç¼–è¯‘ç­¾å">3. ç¼–è¯‘ç­¾å</h3><p>æ³¨æ„ï¼Œè¿™é‡Œæœ‰ä¸ªå°ç»†èŠ‚ï¼Œapp åœ¨ load <em>mach_inject_bundle_stub</em> è¿™ä¸ª bundle æ—¶ï¼Œæ˜¯æŒ‰ç…§ bundle id <code>com.rentzsch.mach-inject-bundle-stub</code> æ¥æ‰¾çš„ï¼Œæ‰€ä»¥éœ€è¦æŠŠå·¥ç¨‹æ–‡ä»¶é‡Œçš„ bundle id æ”¹æˆè·ŸåŸæ¥çš„ bundle id ä¸€æ ·ã€‚</p>
<h3 id="4-_æ›¿æ¢åˆ°_mach_inject_bundle-framework_é‡Œé¢">4. æ›¿æ¢åˆ° <em>mach_inject_bundle.framework</em> é‡Œé¢</h3><h3 id="5-_é¡ºä¾¿æä¸€ä¸ª_pull_requestï¼Œè€ä»£ç å·²ç»å¹´ä¹…å¤±ä¿®äº†_XD">5. é¡ºä¾¿æä¸€ä¸ª pull requestï¼Œè€ä»£ç å·²ç»å¹´ä¹…å¤±ä¿®äº† XD</h3><p>å®Œæˆä¹‹åï¼Œé‡æ–°å¯åŠ¨ appï¼Œå¯ä»¥æ­£å¸¸ work äº†ï¼</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>ä¹‹å‰ä»‹ç»è¿‡<a href="http://hi.zongquan.wang/2016/04/21/Hack_Interface_Inspector/">å¦‚ä½•ç ´è§£ Interface Inspector</a>ï¼Œè¿‘æ¥æŠŠç³»ç»Ÿå‡çº§åˆ°æœ€æ–°çš„ macOS Serria ä¹‹åï¼Œå‘ç° Interface Inspector ä¸ work äº†ã€‚å¯åŠ¨å€’æ˜¯æ­£å¸¸ï¼Œä½†æ¯æ¬¡ attach app æ—¶ï¼Œæ€»æ˜¯æç¤ºæ— æ³• attachï¼ŒæŸ¥çœ‹ system logï¼Œå‘ç°æœ‰è¿™ä¹ˆä¸€ä¸ª errorï¼š</p>
<p><img src="/img/Fix_Bug_for_Interface_Inspector_on_macOS_Serria/log.png" alt="log"></p>
<p>ä» log ä¸­çœ‹å‡ºï¼Œroot cause æ˜¯ <em>mach_inject_bundle_stub</em> å» load <code>___pthread_set_self</code> æ—¶å¤±è´¥äº†ï¼Œè€Œè¿™ä¸ªå‡½æ•°æœ¬æ¥åº”è¯¥æ˜¯åœ¨ <em>libSystem.B.dylb</em> è¿™ä¸ªç³»ç»Ÿåº“é‡Œé¢çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒmacOS Serria çš„ <em>libSystem.B.dylb</em> å·²ç»ä¸å†æœ‰ <code>___pthread_set_self</code> è¿™ä¸ªå‡½æ•°äº†ã€‚äºæ˜¯å¼€å§‹ googleï¼Œæœ€ååœ¨<a href="https://twitter.com/snielsen42/status/778405531383836674">ä¸€æ¡ Twitter</a> ä¸Šå‘ç°äº†å’‹å›äº‹ï¼Œæ˜¯çš„ï¼Œ<code>___pthread_set_self</code> å·²ç»è¢«æ›¿æ¢æˆäº† <code>_pthread_set_self</code>ã€‚</p>
<p>æ˜ç™½äº†å’‹å›äº‹ï¼Œå¼€å§‹è€ƒè™‘æ€ä¹ˆè§£å†³ã€‚</p>]]>
    
    </summary>
    
      <category term="Mac" scheme="http://hi.zongquan.wang/tags/Mac/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Swift and Objective-C (Mix and Match)]]></title>
    <link href="http://hi.zongquan.wang/2016/07/25/Swift_and_ObjectiveC_Mix_and_Match/"/>
    <id>http://hi.zongquan.wang/2016/07/25/Swift_and_ObjectiveC_Mix_and_Match/</id>
    <published>2016-07-25T09:32:53.000Z</published>
    <updated>2016-07-25T11:11:49.000Z</updated>
    <content type="html"><![CDATA[<p>Swift ä¸ Objective-C æ··ç¼– ï¼ˆto be continuedï¼‰</p>
<h3 id="Code_ç›´æ¥æ··ç¼–_+_Framework_é—´æ¥æ··ç¼–">Code ç›´æ¥æ··ç¼– + Framework é—´æ¥æ··ç¼–</h3><hr>
<h2 id="&lt;_Code_ç›´æ¥æ··ç¼–_&gt;">&lt; Code ç›´æ¥æ··ç¼– &gt;</h2><ul>
<li><h4 id="åœ¨_Objective-C_code_ä¸­ä½¿ç”¨_Swift_code">åœ¨ Objective-C code ä¸­ä½¿ç”¨ Swift code</h4><p>  Objective-C project: <code>Project_C</code><br>  PRODUCT_MODULE_NAME: <code>Project_C_Product</code></p>
<ol>
<li>in Project_Câ€™s build settings, set up <code>&quot;Embedded Content Contains Swift Code&quot;</code> to <code>&quot;YES&quot;</code>.</li>
<li>in Project_Câ€™s build settings, set up <code>&quot;Objective-C Generated Interface Header Name&quot;</code> to <code>&quot;Project_C_Product-Swift.h&quot;</code>.</li>
<li>Swift code should use <code>@objc</code> to mark what you want to expose to Objective-C code.</li>
<li>in Objective-C code, <code>#import &quot;Project_C_Product-Swift.h&quot;</code>.</li>
</ol>
</li>
<li><h4 id="åœ¨_Swift_code_ä¸­ä½¿ç”¨_Objective-C_code">åœ¨ Swift code ä¸­ä½¿ç”¨ Objective-C code</h4><p>  Swift project: <code>Project_S</code><br>  PRODUCT_MODULE_NAME: <code>Project_S_Product</code></p>
<ol>
<li>in Project_Sâ€™s build settings, set up <code>&quot;Objective-C Bridging Header&quot;</code> to <code>&quot;Project_S_Product-Bridging-Header.h&quot;</code>.</li>
<li>in <code>&quot;Project_S_Product-Bridging-Header.h&quot;</code>, <code>#import</code> every Objective-C header you want to expose to Swift code.</li>
<li>in Swift code, <em>NO</em> need to <code>#import &quot;Project_C_Product-Bridging-Header.h&quot;</code>.</li>
</ol>
</li>
</ul>
<a id="more"></a>
<h2 id="&lt;_Framework_é—´æ¥æ··ç¼–_&gt;">&lt; Framework é—´æ¥æ··ç¼– &gt;</h2><ul>
<li><h4 id="åˆ›å»º_Swift_framework_ç»™_Objective-C_code_ä½¿ç”¨">åˆ›å»º Swift framework ç»™ Objective-C code ä½¿ç”¨</h4><p>framework product: <code>Framework_S</code></p>
<p><strong>frameworkâ€™s side:</strong></p>
<ol>
<li>in Framework_Sâ€™s build settings, set up <code>&quot;Objective-C Generated Interface Header Name&quot;</code> to <code>&quot;Framework_S-Swift.h&quot;</code>.</li>
<li>use <code>@objc</code> to mark what you want to expose to Objective-C code.</li>
<li>after Framework_S is producted, its umbrella will include the <code>&quot;Framework_S-Swift.h&quot;</code> file.</li>
</ol>
<p><strong>consumerâ€™s side:</strong></p>
<ol>
<li>in build settings, set up <code>&quot;Embedded Content Contains Swift Code&quot;</code> to <code>&quot;YES&quot;</code>.</li>
<li><code>@import Framework_S</code>.</li>
</ol>
</li>
<li><h4 id="åˆ›å»º_Objective-C_framework_ç»™_Swift_code_ä½¿ç”¨">åˆ›å»º Objective-C framework ç»™ Swift code ä½¿ç”¨</h4><p>framework product: <code>Framework_C</code></p>
<p><strong>frameworkâ€™s side:</strong> nothing</p>
<p><strong>consumerâ€™s side:</strong> <code>import Framework_C</code></p>
</li>
</ul>
<hr>
<h4 id="Apple_å®˜æ–¹æ–‡æ¡£"><a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/BuildingCocoaApps/MixandMatch.html" target="_blank" rel="external">Apple å®˜æ–¹æ–‡æ¡£</a></h4>]]></content>
    <summary type="html">
    <![CDATA[<p>Swift ä¸ Objective-C æ··ç¼– ï¼ˆto be continuedï¼‰</p>
<h3 id="Code_ç›´æ¥æ··ç¼–_+_Framework_é—´æ¥æ··ç¼–">Code ç›´æ¥æ··ç¼– + Framework é—´æ¥æ··ç¼–</h3><hr>
<h2 id="&lt;_Code_ç›´æ¥æ··ç¼–_&gt;">&lt; Code ç›´æ¥æ··ç¼– &gt;</h2><ul>
<li><h4 id="åœ¨_Objective-C_code_ä¸­ä½¿ç”¨_Swift_code">åœ¨ Objective-C code ä¸­ä½¿ç”¨ Swift code</h4><p>  Objective-C project: <code>Project_C</code><br>  PRODUCT_MODULE_NAME: <code>Project_C_Product</code></p>
<ol>
<li>in Project_Câ€™s build settings, set up <code>&quot;Embedded Content Contains Swift Code&quot;</code> to <code>&quot;YES&quot;</code>.</li>
<li>in Project_Câ€™s build settings, set up <code>&quot;Objective-C Generated Interface Header Name&quot;</code> to <code>&quot;Project_C_Product-Swift.h&quot;</code>.</li>
<li>Swift code should use <code>@objc</code> to mark what you want to expose to Objective-C code.</li>
<li>in Objective-C code, <code>#import &quot;Project_C_Product-Swift.h&quot;</code>.</li>
</ol>
</li>
<li><h4 id="åœ¨_Swift_code_ä¸­ä½¿ç”¨_Objective-C_code">åœ¨ Swift code ä¸­ä½¿ç”¨ Objective-C code</h4><p>  Swift project: <code>Project_S</code><br>  PRODUCT_MODULE_NAME: <code>Project_S_Product</code></p>
<ol>
<li>in Project_Sâ€™s build settings, set up <code>&quot;Objective-C Bridging Header&quot;</code> to <code>&quot;Project_S_Product-Bridging-Header.h&quot;</code>.</li>
<li>in <code>&quot;Project_S_Product-Bridging-Header.h&quot;</code>, <code>#import</code> every Objective-C header you want to expose to Swift code.</li>
<li>in Swift code, <em>NO</em> need to <code>#import &quot;Project_C_Product-Bridging-Header.h&quot;</code>.</li>
</ol>
</li>
</ul>]]>
    
    </summary>
    
      <category term="Swift" scheme="http://hi.zongquan.wang/tags/Swift/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Hack Interface Inspector]]></title>
    <link href="http://hi.zongquan.wang/2016/04/21/Hack_Interface_Inspector/"/>
    <id>http://hi.zongquan.wang/2016/04/21/Hack_Interface_Inspector/</id>
    <published>2016-04-21T12:38:11.000Z</published>
    <updated>2016-05-10T07:19:32.000Z</updated>
    <content type="html"><![CDATA[<p>ä¹‹å‰åœ¨ iOSRE ä¸Šçœ‹åˆ°<a href="http://bbs.iosre.com/t/mac/3373" target="_blank" rel="external">ä¸€ç¯‡æ–‡ç« </a>ï¼Œé‡Œé¢æœ‰è®²åˆ°ä¸€ä¸ªé€†å‘ Mac app UI çš„å·¥å…· <a href="http://www.interface-inspector.com/" target="_blank" rel="external">Interface Inspector</a>ï¼Œæ‰«äº†ä¸€çœ¼ï¼Œå°¼ç›ç¥å™¨å•Šï¼Œç®€ç›´å°±æ˜¯ Reveal çš„ Mac ç‰ˆã€‚ä¸Šä¸ªå›¾æ„Ÿå—ä¸€ä¸‹å®ƒçš„æ·«å¨å§ï¼š</p>
<p><img src="/img/Hack_Interface_Inspector/ii.png" alt="Interface Inspector"></p>
<p>è¿™ä¹ˆå¥½çš„å·¥å…·ï¼Œè¿™ä¹ˆè´µçš„ä»·æ ¼ï¼Œå¿ƒç—’äº†ã€‚å¥½å§ï¼Œå‡­å€Ÿç€<a href="http://hi.zongquan.wang/2016/01/12/Hack_XtraFinder/">ä¹‹å‰çš„ç ´è§£ç»éªŒ</a>ï¼Œå†æ¥æä¸€æ¬¡å§ã€‚</p>
<a id="more"></a>
<h3 id="0-_å¼€å§‹">0. å¼€å§‹</h3><p>é¦–å…ˆä»å®˜ç½‘ä¸‹è½½è¯•ç”¨ç‰ˆï¼Œæ‰“å¼€ appï¼Œç›´æ¥å¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†ï¼š</p>
<p><img src="/img/Hack_Interface_Inspector/alert.png" alt="Alert"></p>
<p>å•Šå“ˆå“ˆï¼Œæœ€å–œæ¬¢è¿™ä¹ˆç›´æ¥çš„æ‰“æ‹›å‘¼äº†ã€‚</p>
<p>ç”¨ Hopper åŠ è½½å®Œ <em>Interface Inspector</em> åï¼Œå¯ä»¥ç›´æ¥å¥”ç€ä¸¤ä¸ªå‡½æ•°å»äº†ï¼š</p>
<p><img src="/img/Hack_Interface_Inspector/launching.png" alt="Launching"></p>
<h3 id="1-_ç»•è¿‡ç­¾åæ ¡éªŒ">1. ç»•è¿‡ç­¾åæ ¡éªŒ</h3><p>é¦–å…ˆçœ‹ä¸€ä¸‹ <code>[SMAppDelegate applicationWillFinishLaunching:]</code>ï¼Œé‡Œé¢æœ‰è¿™ä¹ˆä¸€æ®µï¼š</p>
<p><img src="/img/Hack_Interface_Inspector/will.png" alt="applicationWillFinishLaunching"></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œapp å¯åŠ¨å®Œæˆä¹‹å‰ï¼Œä¼šè°ƒç”¨ <code>[[NSBundle mainBundle] codeSignState]</code> æ¥æ£€æŸ¥ bundle çš„ç­¾åæ˜¯å¦åˆæ³•ï¼ˆå…·ä½“å¦‚ä½•æ£€æŸ¥åé¢è¯¦è°ˆï¼‰ã€‚å¦‚æœä¸åˆæ³•ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†è¯´ â€œSignature of the Interface Inspector is brokenâ€ï¼Œç„¶å app å°±ç›´æ¥é€€å‡ºäº†ã€‚æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆè¦ç»•è¿‡è¿™ä¸ªæ£€æŸ¥ã€‚</p>
<p>æ˜¾ç„¶ï¼Œ<code>codeSignState</code> è¿™ä¸ªå‡½æ•°å¹¶éå®˜æ–¹ apiï¼Œåº”è¯¥æ˜¯ä½œè€…è‡ªå·±æ·»åŠ çš„ <em>NSBundle category</em>ã€‚æœç´¢äº†ä¸€ä¸‹è¯¥å‡½æ•°åï¼Œæ²¡æœ‰æ‰¾åˆ°ã€‚äºæ˜¯å°±å» app çš„ <code>Frameworks</code> ç›®å½•ä¸‹çœ‹çœ‹æ˜¯ä¸æ˜¯ç”±ç¬¬ä¸‰æ–¹åº“å¼•å…¥çš„ã€‚åœ¨è¿™é‡Œæœ‰ 3 ä¸ª frameworkï¼š<em>DFeedback.framework</em>ã€<em>SMFoundation.framework</em>ã€<em>Sparkle.framework</em>ï¼Œå¾ˆæ˜æ˜¾ï¼Œç¬¬ä¸€ä¸ªè‚¯å®šæ˜¯æ”¶é›†ç”¨æˆ· feedback ç”¨çš„ï¼Œç¬¬ä¸‰ä¸ªå¤§å®¶éƒ½çŸ¥é“æ˜¯ update æ¨¡å—ï¼Œé‚£å°±å‰©ä¸‹ç¬¬äºŒä¸ªäº†ã€‚ç”¨ Hopper åŠ è½½ <em>SMFoundation</em>ï¼Œæœç„¶æœç´¢åˆ°äº† <code>codeSignState</code> è¿™ä¸ªå‡½æ•°ã€‚</p>
<p>åœ¨è¿™ä¸ªå‡½æ•°é‡Œï¼Œä½œè€…æ˜¯ç”¨ <code>SecStaticCodeCheckValidityWithErrors</code> è¿™ä¸ªå®˜æ–¹ api æ¥æ£€æŸ¥ç­¾åçš„åˆæ³•æ€§çš„ã€‚å…·ä½“ç”¨æ³•å¯ä»¥æŸ¥é˜…æ–‡æ¡£ï¼Œè¿™é‡Œåªæä¸€ä¸‹æ¯”è¾ƒé‡è¦çš„ 2 ä¸ªå‚æ•°<code>staticCode</code> å’Œ <code>requirement</code>ï¼š<code>staticCode</code> æ˜¯å¾…æ ¡éªŒçš„ <em>code object</em>ï¼Œ<code>requirement</code> åˆ™è¡¨ç¤º <code>staticCode</code> éœ€è¦æ»¡è¶³çš„æ ¡éªŒæ¡ä»¶ã€‚ä½œè€…ä½¿ç”¨çš„æ ¡éªŒæ¡ä»¶æ˜¯ï¼š<code>certificate leaf = H&quot;0E1D40082148472951C6FB2DDCD8800D82629792&quot;</code>ã€‚çœ‹åˆ°è¿™é‡Œä¸€å¼€å§‹æˆ‘ä¹Ÿè’™äº†ï¼Œè¿™æ˜¯ä»€ä¹ˆé¬¼ã€‚åæ¥æŸ¥é˜…äº†ä¸€ä¸‹æ–‡æ¡£æ‰æ˜ç™½è¿™ä¸ªç”¨æ³•ã€‚å…¶å®å°±æ˜¯æ ¡éªŒä¸€ä¸‹ç­¾åè¯ä¹¦çš„å¶å­èŠ‚ç‚¹æ˜¯ä¸æ˜¯ <code>H&quot;0E1D40082148472951C6FB2DDCD8800D82629792&quot;</code> è¿™ä¸ªå€¼ï¼Œè€Œè¿™ä¸€ä¸²å­—ç¬¦æ˜¯ç­¾åè¯ä¹¦çš„ <em>SHA1 FingerPrints</em>ï¼Œç”± 40 ä¸ª HEX å­—ç¬¦ç»„æˆï¼Œå¯ä»¥åœ¨è‡ªå·±çš„å¼€å‘è€…è¯ä¹¦é‡ŒæŸ¥åˆ°ï¼š</p>
<p><img src="/img/Hack_Interface_Inspector/cert.png" alt="Cert"></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœç”¨åˆ«äººçš„è¯ä¹¦é‡æ–°ç­¾åè¯¥ appï¼Œè€Œåˆæ²¡æœ‰åŒæ—¶ä¿®æ”¹è¿™ä¸ªæ ¡éªŒæ¡ä»¶çš„è¯ï¼Œé‚£ä¹ˆæœ€ç»ˆçš„ç­¾åå°±æ˜¯ä¸åˆæ³•çš„ï¼Œapp å°±ä¼šé—ªé€€äº†ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆæŠŠè¿™ä¸ªæ ¡éªŒæ¡ä»¶æ”¹æ‰ã€‚ç®€å•ï¼Œç›´æ¥æŠŠè¿™ä¸ªå­—ç¬¦ä¸²çš„å€¼æ”¹æˆè‡ªå·±å¼€å‘è€…è¯ä¹¦é‡Œé¢çš„ <em>SHA1 FingerPrints</em> å°±å¥½äº†ã€‚</p>
<p>OKï¼Œç­¾åæ ¡éªŒå·²ç»ç»•è¿‡å»äº†ï¼Œä¸‹é¢å°±å¯ä»¥éšæ„åœ°ä¿®æ”¹ app ç„¶åé‡æ–°ç­¾åäº†ã€‚</p>
<h3 id="2-_ç ´è§£_License_æœºåˆ¶">2. ç ´è§£ License æœºåˆ¶</h3><p><code>[SMAppDelegate applicationWillFinishLaunching:]</code> å·²ç»æ²¡ä»€ä¹ˆå¥½çœ‹çš„äº†ï¼Œæ¥ç€çœ‹ <code>[SMAppDelegate applicationDidFinishLaunching:]</code>ï¼Œé‡Œé¢æœ‰è¿™ä¹ˆä¸€æ®µï¼š</p>
<p><img src="/img/Hack_Interface_Inspector/did.png" alt="applicationDidFinishLaunching"></p>
<p>å¤ªæ˜æ˜¾äº†ï¼Œæ²¡æœ‰ license çš„è¯å°±æç¤ºç”¨æˆ·è¾“å…¥åºåˆ—å·è¿›è¡Œæ¿€æ´»ã€‚é¡ºè—¤æ‘¸ç“œï¼Œæœ€ç»ˆæ‰¾åˆ°äº†è¿™ä¹ˆä¸ªå‡½æ•° <code>[SMLicenseManager verifyLicenseWithName:code:]</code>ï¼Œå®ƒå°±æ˜¯ç”¨æ¥éªŒè¯ license æ˜¯å¦åˆæ³•çš„ï¼åªè¦æˆ‘ä»¬å¯¹å®ƒè¿›è¡Œç ´è§£ï¼Œè¿™æ ·éšä¾¿è¾“å…¥ä»»æ„åºåˆ—å·å°±å¯ä»¥æ¿€æ´»äº†ï¼Œå•Šå“ˆå“ˆã€‚</p>
<p>ç®€å•å¾—ä¸èƒ½å†ç®€å•äº†ï¼Œç›´æ¥ç”¨ Hopper çš„ <em>Modify</em> åŠŸèƒ½ä¿®æ”¹æˆ <code>mov eax, 0x1</code> <code>ret</code> å³å¯ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥è¿”å› <code>YES</code> é€šè¿‡éªŒè¯ã€‚</p>
<p>ä¿®æ”¹å®Œæˆï¼Œé‡æ–°ç­¾åï¼Œè¿è¡Œ appï¼Œå•Šå“¦ï¼Œé—ªé€€äº†ï¼</p>
<h3 id="3-_ä½œè€…çš„é¬¼ç‚¹å­">3. ä½œè€…çš„é¬¼ç‚¹å­</h3><p>çœ‹æ¥è¿˜æ˜¯æœ‰ä»€ä¹ˆåœ°æ–¹æ²¡æ”¹å¥½ã€‚é‡æ–°å›å»æ£€æŸ¥æ•´ä¸ª <code>SMLicenseManager</code> ç±»ï¼Œä¸€ä¸ªå‡½æ•°ä¸€ä¸ªå‡½æ•°åœ°æ£€æŸ¥ï¼Œæœ€ç»ˆå‘ç°äº†è¿™ä¹ˆä¸ªå‡½æ•° <code>[SMLicenseManager load]</code>ã€‚ä½œè€…åœ¨è¿™é‡Œè€äº†ä¸€ä¸ªå°èŠ±æ‹›ï¼š</p>
<p><img src="/img/Hack_Interface_Inspector/tricky.png" alt="Tricky"></p>
<p>æ˜¯çš„ï¼Œæˆ‘ä»¬æŠŠ <code>[SMLicenseManager verifyLicenseWithName:code:]</code> æ”¹æˆäº†æ€»æ˜¯è¿”å› <code>YES</code>ï¼Œä½†æ˜¯ä»£ç èµ°åˆ°è¿™é‡Œæ’å¢™äº†ï¼Œ<em>Test User</em> éªŒè¯ä¹‹åä¹Ÿè¿”å› <code>YES</code> äº†ï¼Œç„¶å app ç›´æ¥ <code>terminate:</code> äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½œè€…åœ¨è¿™é‡Œæ”¾äº†ä¸€ä¸ªæœ¬æ¥å°±æ˜¯éæ³•çš„ licenseï¼Œæ­£å¸¸éªŒè¯çš„è¯è‚¯å®šæ˜¯è¿”å› <code>NO</code> çš„ï¼Œå°±ä¸ä¼šå¯¼è‡´ç›´æ¥é€€å‡ºäº†ã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦æŠŠè¿™é‡Œçš„åˆ¤æ–­æ¡ä»¶æ”¹æˆ <code>XXX == NO</code>ï¼Œè¿™æ ·å°±æ²¡æœ‰é—®é¢˜äº†ã€‚çœŸæ˜¯æ·˜æ°”çš„ä½œè€…ï¼Œè—å¾—è¿™ä¹ˆæ·±ã€‚</p>
<p>å¥½äº†ï¼Œæ”¹å¥½ï¼Œé‡æ–°ç­¾åï¼Œè¿è¡Œ appï¼Œéšä¾¿è¾“å…¥ license ä¿¡æ¯ï¼Œå•Šå“ˆå“ˆï¼Œæ³¨å†ŒæˆåŠŸï¼</p>
<p><img src="/img/Hack_Interface_Inspector/done.png" alt="Done"></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>ä¹‹å‰åœ¨ iOSRE ä¸Šçœ‹åˆ°<a href="http://bbs.iosre.com/t/mac/3373">ä¸€ç¯‡æ–‡ç« </a>ï¼Œé‡Œé¢æœ‰è®²åˆ°ä¸€ä¸ªé€†å‘ Mac app UI çš„å·¥å…· <a href="http://www.interface-inspector.com/">Interface Inspector</a>ï¼Œæ‰«äº†ä¸€çœ¼ï¼Œå°¼ç›ç¥å™¨å•Šï¼Œç®€ç›´å°±æ˜¯ Reveal çš„ Mac ç‰ˆã€‚ä¸Šä¸ªå›¾æ„Ÿå—ä¸€ä¸‹å®ƒçš„æ·«å¨å§ï¼š</p>
<p><img src="/img/Hack_Interface_Inspector/ii.png" alt="Interface Inspector"></p>
<p>è¿™ä¹ˆå¥½çš„å·¥å…·ï¼Œè¿™ä¹ˆè´µçš„ä»·æ ¼ï¼Œå¿ƒç—’äº†ã€‚å¥½å§ï¼Œå‡­å€Ÿç€<a href="http://hi.zongquan.wang/2016/01/12/Hack_XtraFinder/">ä¹‹å‰çš„ç ´è§£ç»éªŒ</a>ï¼Œå†æ¥æä¸€æ¬¡å§ã€‚</p>]]>
    
    </summary>
    
      <category term="Mac" scheme="http://hi.zongquan.wang/tags/Mac/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[How to install iOSOpenDev manually]]></title>
    <link href="http://hi.zongquan.wang/2016/03/29/How_to_install_iOSOpenDev_manually/"/>
    <id>http://hi.zongquan.wang/2016/03/29/How_to_install_iOSOpenDev_manually/</id>
    <published>2016-03-29T15:30:35.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<p><a href="https://github.com/wzqcongcong/iOSOpenDev" target="_blank" rel="external">https://github.com/wzqcongcong/iOSOpenDev</a></p>
<a id="more"></a>
<hr>
<h3 id="OS_X_10-10+_&amp;_Xcode_7+">OS X 10.10+ &amp; Xcode 7+</h3><ol>
<li><p><strong>Dependency</strong></p>
<p><code>brew install ldid dpkg</code></p>
</li>
<li><p><strong>Theos</strong></p>
<p><a href="https://github.com/theos/theos/wiki" target="_blank" rel="external">Wiki</a></p>
<p><a href="http://iphonedevwiki.net/index.php/Theos/Setup" target="_blank" rel="external">Setup</a></p>
</li>
<li><p><strong>iOSOpenDev</strong></p>
<p><a href="https://github.com/kokoabim/iOSOpenDev/wiki" target="_blank" rel="external">Wiki</a></p>
<p>3.1. update <strong>.zshrc</strong></p>
<p><code>export iOSOpenDevPath=path/to/iOSOpenDev</code></p>
<p><code>export iOSOpenDevDevice=</code></p>
<p><code>export PATH=$iOSOpenDevPath:$PATH</code></p>
<p>3.2. get <strong>iOSOpenDev</strong></p>
<ul>
<li><p><code>git clone --recursive https://github.com/kokoabim/iOSOpenDev.git $iOSOpenDevPath</code></p>
</li>
<li><p>copy the folder <a href="https://github.com/wzqcongcong/iOSOpenDev" target="_blank" rel="external"><strong>templates</strong></a> into <em>$iOSOpenDevPath</em></p>
</li>
</ul>
<p>this version of <strong>templates</strong> is refined by the <a href="https://github.com/kokoabim/iOSOpenDev-Xcode-Templates" target="_blank" rel="external">original one</a>: the <em>ShellScript</em> of <em>BuildPhases</em> in <strong>TemplateInfo.plist</strong> is changed to <code>$iOSOpenDevPath/bin/iosod --xcbp</code>. and the <em>[$iOSOpenDevPath]</em> here is not that in <em>.zshrc</em>, it is a user defined key in <strong>Base.xctemplate</strong> and <strong>Empty Project.xctemplate</strong>.</p>
<p>3.3. setup <strong>Xcode</strong></p>
<ul>
<li><p>copy the <a href="https://github.com/wzqcongcong/iOSOpenDev" target="_blank" rel="external"><strong>.xcspec</strong></a> files into <em>/Applications/Xcode/Content/Developer/Platforms/[PLATFORM_PATH]/Developer/Library/Xcode/Specifications</em> (mkdir if not existed)</p>
</li>
<li><p><code>mkdir -p /Applications/Xcode/Content/Developer/Platforms/[PLATFORM_PATH]/Developer/usr/bin</code></p>
</li>
<li><p><code>ln -fhs $iOSOpenDevPath/bin/iosod /Applications/Xcode/Content/Developer/Platforms/[PLATFORM_PATH]/Developer/usr/bin</code></p>
</li>
<li><p><code>ln -fhs $iOSOpenDevPath/bin/ldid /Applications/Xcode/Content/Developer/Platforms/[PLATFORM_PATH]/Developer/usr/bin</code></p>
</li>
</ul>
<p>3.4. setup <strong>SDK</strong></p>
<ul>
<li><p>modify the following key/value in <strong>[SDK_PATH]/SDKSettings.plist</strong>:</p>
<pre><code>DefaultProperties<span class="class">.CODE_SIGNING_REQUIRED</span> =&gt; NO
DefaultProperties<span class="class">.ENTITLEMENTS_REQUIRED</span> =&gt; NO
DefaultProperties<span class="class">.AD_HOC_CODE_SIGNING_ALLOWED</span> =&gt; YES
</code></pre></li>
<li><p>in Xcode 7.3, the private framework has been removed from iOS 9.3 SDK, so maybe you want to use iOS 9.2 SDK. once you copy iOS 9.2 SDK into <em>[PLATFORM_PATH]/Developer/SDKs</em>, you should also modify <strong>[PLATFORM_PATH]/Info.plist</strong> as following, or else Xcode 7.3 can not recognize iOS 9.2 SDK in project build settings:</p>
<pre><code>MinimumSDKVersion =&gt; <span class="number">9.2</span>
</code></pre></li>
</ul>
<p>3.5. setup <strong>templates</strong></p>
<ul>
<li><code>ln -fhs $iOSOpenDevPath/templates ~/Library/Developer/Xcode/Templates/iOSOpenDev</code></li>
<li>open <strong>TemplateInfo.plist</strong> in <strong>Base.xctemplate</strong> and <strong>Empty Project.xctemplate</strong> with Xcode, then set the value of the user defined key <em>[iOSOpenDevPath]</em> to <em>path/to/iOSOpenDev</em>.</li>
</ul>
</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<p><a href="https://github.com/wzqcongcong/iOSOpenDev">https://github.com/wzqcongcong/iOSOpenDev</a></p>]]>
    
    </summary>
    
      <category term="Xcode" scheme="http://hi.zongquan.wang/tags/Xcode/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Hack XtraFinder]]></title>
    <link href="http://hi.zongquan.wang/2016/01/12/Hack_XtraFinder/"/>
    <id>http://hi.zongquan.wang/2016/01/12/Hack_XtraFinder/</id>
    <published>2016-01-12T15:38:55.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<p>äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼Œæˆ‘çš„ç³»ç»Ÿæ˜¯ OS X 10.11ï¼Œå°±æ˜¯é‚£ä¸ªæœ‰ SIP çš„ 10.11 ğŸ˜‚ã€‚ç„¶åæˆ‘è£…äº†ä¸€ä¸ª Finder çš„æ’ä»¶ï¼šXtraFinderï¼Œè¿™ä¸ªæ’ä»¶æœ‰äº›åŠŸèƒ½åœ¨ 10.11 ä¸‹æ˜¯ä¸ work çš„ï¼Œæ‰€ä»¥æ’ä»¶ä½œè€…å‡ºäºå¥½å¿ƒï¼Œåœ¨æ£€æµ‹åˆ°ä½ çš„ç³»ç»Ÿæ˜¯ 10.11 ä¸” SIP æ²¡æœ‰å…³é—­çš„æƒ…å†µä¸‹ï¼Œä¼šå¼¹å‡ºä¸€ä¸ª alert çª—å£ä½œä¸ºæé†’ã€‚</p>
<a id="more"></a>
<p><img src="/img/Hack_XtraFinder/alert.png" alt="Alert"></p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä½œè€…æ£€æµ‹ SIP æ˜¯å¦å…³é—­çš„æ–¹æ³•æœ‰ä¸ª bugï¼Œå¯¼è‡´æˆ‘æ˜æ˜æ˜¯å®Œå…¨å…³é—­äº† SIPï¼Œä½†æ’ä»¶å´è®¤ä¸º SIP è¿˜åœ¨å¯ç”¨ã€‚ç¬¬äºŒä¸ªé—®é¢˜ï¼Œè¿™ä¸ª alert æ¯æ¬¡é‡å¯æ’ä»¶ï¼ˆåŒ…æ‹¬æ¯æ¬¡é‡å¯ç³»ç»Ÿï¼‰æ—¶éƒ½ä¼šå¼¹å‡ºæ¥å•Šï¼Œå‡ºæ¥å•Šï¼Œæ¥å•Šï¼Œå•Šï¼Œæå¾—ä½ æ¯æ¬¡éƒ½è¦å»ç‚¹ä¸€ä¸‹ç¡®è®¤æ‰èƒ½å°†å…¶å…³é—­ï¼Œçƒ¦çš„å¾ˆ ğŸ˜’ã€‚æˆ‘æ›¾ç»ç»™ä½œè€…å‘é‚®ä»¶ï¼Œå¸Œæœ›ä»–èƒ½ update ä¸€ä¸‹ï¼Œåªå¼¹ä¸€æ¬¡ alert å°±å¥½ã€‚å½“ç„¶äº†ï¼Œä½œè€…æ²¡æœ‰é¸Ÿæˆ‘ã€‚</p>
<p>ä½œä¸ºå¶å°”ä¼šç”¨ Hopper Disassembler å·çª¥ä¸€ä¸‹åˆ«äººä»£ç çš„æˆ‘ï¼Œå°±å¼€å§‹æ„æ·«èƒ½ä¸èƒ½ hack ä¸€ä¸‹è¿™ä¸ªæ’ä»¶ï¼Œæ”¹æ‰è¿™ä¸ªæ¶å¿ƒçš„è¡Œä¸ºã€‚</p>
<h3 id="å·¥å…·">å·¥å…·</h3><ul>
<li>Hopper Disassembler</li>
<li>Hex Fiend</li>
<li>Developer ID Application è¯ä¹¦</li>
</ul>
<h3 id="æ­¥éª¤">æ­¥éª¤</h3><ol>
<li><p>ç”¨ Hopper Disassembler å®šä½ hack point</p>
<p> è¿™ä¸ª alert æ˜¯æ’ä»¶ä¸€å¯åŠ¨çš„æ—¶å€™å°±å¼¹å‡ºçš„ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“æƒ³åˆ°å…ˆå» check ä¸€ä¸‹ <code>[AppDelegate applicationDidFinishLaunching:]</code> è¿™ä¸ªæ–¹æ³•ã€‚Load Mach-O æ–‡ä»¶åï¼Œç›´å¥”é‚£ä¸ªå‡½æ•°çš„ä¼ªä»£ç ï¼š</p>
<p> <img src="/img/Hack_XtraFinder/hopper1.png" alt="Hopper Disassembler"></p>
<p> ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ’ä»¶ä½œè€…é€šè¿‡ <code>csrutil status</code> çš„è¿”å›ç»“æœæ¥åˆ¤æ–­ SIP çš„çŠ¶æ€ï¼Œåªæœ‰è¿”å›ç»“æœä¸­åŒ¹é…åˆ°äº†å­—ç¬¦ä¸² <code>&quot;Debugging Restrictions: disabled&quot;</code> æ‰è®¤ä¸º SIP å…³é—­ã€‚ä½†æ˜¯ï¼Œæˆ‘æ˜¯å®Œå…¨å…³é—­ SIP çš„ï¼Œè¿è¡Œ <code>csrutil status</code> çš„ç»“æœæ˜¯ <code>System Integrity Protection status: disabled.</code>ï¼Œæ˜¾ç„¶æ— æ³•åŒ¹é…é‚£ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å°±è¢«è¯¯è®¤ä¸ºæ˜¯ SIP å°šæœªå…³é—­ã€‚</p>
<p> æ³¨æ„ï¼Œä¸Šå›¾ä¸­è“è‰²æ¡†ä¸­çš„å†…å®¹æ˜¯æˆ‘ä¿®æ”¹ä¹‹åçš„ï¼ŒåŸå†…å®¹æ˜¯ <code>if (rax != rcx) goto loc_100001df7;</code>ï¼Œä¹Ÿå°±æ˜¯å½“ <code>[rax rangeOfString:rdx] != NSNotFound</code> çš„æ—¶å€™ï¼Œå­—ç¬¦ä¸²åŒ¹é…æˆåŠŸï¼Œå°±è·³è¿‡ä¸å¼¹ alertã€‚çœ‹åˆ°è¿™é‡Œä½ å·²ç»çŸ¥é“äº†ï¼Œåªè¦æŠŠæ¡ä»¶åè½¬å°±å¤§åŠŸå‘Šæˆäº†ã€‚</p>
<p> å½“ç„¶ï¼Œé™¤äº†åè½¬åˆ¤æ–­æ¡ä»¶ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä¿®æ”¹é‚£ä¸ªç”¨äºåŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ä¿®æ”¹æˆ <code>&quot;disabled&quot;</code> å°±å¥½äº†ï¼Œéƒ½èƒ½å¤ŸåŒ¹é…æˆåŠŸã€‚</p>
<p> å¥½äº†ï¼Œä¼ªä»£ç æ˜¯çœ‹æ˜ç™½äº†ï¼Œä¸‹é¢å°±å¾—çœ‹å¦‚ä½•è®©è¿™ä¸ªåˆ¤æ–­æ¡ä»¶åè½¬äº†ã€‚</p>
<p> <img src="/img/Hack_XtraFinder/hopper2.png" alt="Hopper Disassembler"></p>
<p> ä¸Šå›¾ä¸­çº¢è‰²æ¡†ä¸­çš„æ±‡ç¼–ä»£ç å¯¹åº”å‰é¢åˆ†æçš„é‚£å—ä¼ªä»£ç ï¼Œè€Œè“è‰²æ¡†ä¸­çš„åå…­è¿›åˆ¶ <code>0F 84 E1 01 00 00</code> ä»£è¡¨ä¼ªä»£ç å—ä¸­çš„æœ€åé‚£æ¡å‘½ä»¤ <code>0x0000000100001c10         je         0x100001df7</code>ã€‚<code>je</code> è¿™ä¸ªæŒ‡ä»¤è¡¨ç¤º <em><code>å¦‚æœç­‰äºåˆ™è·³è½¬åˆ°</code></em>ï¼Œå®ƒçš„åæŒ‡ä»¤æ˜¯ <code>jne</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯æŠŠæœ€åè¿™æ¡å‘½ä»¤æ”¹ä¸º <code>jne         0x100001df7</code>ã€‚å‚è€ƒä¸€ä¸‹<a href="http://neuzxy.blog.51cto.com/10270223/1716326" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« </a>ï¼Œå…¶å®å°±æ˜¯æŠŠ <code>0F 84 E1 01 00 00</code> æ”¹ä¸º <code>0F 85 E1 01 00 00</code>ï¼ŒæŠŠ 4 æ”¹æˆ 5ã€‚</p>
</li>
<li><p>ç”¨ Hex Fiend ä¿®æ”¹ Mach-O æ–‡ä»¶</p>
<p> æ˜ç™½äº†æ”¹ä»€ä¹ˆï¼Œä¸‹é¢å°±æ˜¯å¼€å§‹æ“ä½œäº†ã€‚ç”¨ Hex Fiend æ‰“å¼€ Mach-O æ–‡ä»¶ï¼Œç›´æ¥æŸ¥æ‰¾æ›¿æ¢å³å¯ã€‚</p>
<p> <img src="/img/Hack_XtraFinder/hex1.png" alt="Hex Fiend"></p>
<p> åªæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šå¦‚æœç›´æ¥æŸ¥æ‰¾ <code>0F 84 E1 01 00 00</code> çš„è¯ï¼Œå¯èƒ½æœ‰å¤šå¤„ï¼Œæ‰€ä»¥ä¸ºäº†å‡†ç¡®å®šä½ï¼Œæˆ‘ä»¬å¯ä»¥è¿åŒä¸‹ä¸€æ¡å‘½ä»¤ä¸€èµ·æ¥æŸ¥æ‰¾ï¼Œå¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬æŸ¥æ‰¾ <code>0F 84 E1 01 00 00 48 8B 3D 6B 14 01 00</code>ï¼Œè¿™æ ·å°±ä¼šåªæ‰¾åˆ°å”¯ä¸€çš„ä¸€å¤„ã€‚</p>
<p> æ›¿æ¢å®Œæˆåä¿å­˜å³å¯ã€‚</p>
</li>
<li><p>é‡æ–°ç­¾å</p>
<p> ä¿®æ”¹åçš„ Mach-O æ–‡ä»¶æ˜¯æ— æ³•è¿è¡Œçš„ï¼Œå› ä¸ºç­¾åä¸å¯¹äº†ã€‚æ‰€ä»¥éœ€è¦æˆ‘ä»¬ç”¨è‡ªå·±çš„å¼€å‘è€…è¯ä¹¦é‡ç­¾ä¸€ä¸‹ï¼š<code>codesign -f -s &quot;XXX è¯ä¹¦çš„ Common Name&quot; /Applications/XtraFinder.app/Contents/MacOS/XtraFinder</code>ã€‚</p>
<p> å¤§åŠŸå‘Šæˆï¼Œè¦†ç›–é‡å¯æ’ä»¶åï¼Œå†ä¹Ÿæ²¡æœ‰å¼¹å‡º alertï¼ŒXtraFinder ç…§å¸¸ work ğŸ˜†ã€‚</p>
</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<p>äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼Œæˆ‘çš„ç³»ç»Ÿæ˜¯ OS X 10.11ï¼Œå°±æ˜¯é‚£ä¸ªæœ‰ SIP çš„ 10.11 ğŸ˜‚ã€‚ç„¶åæˆ‘è£…äº†ä¸€ä¸ª Finder çš„æ’ä»¶ï¼šXtraFinderï¼Œè¿™ä¸ªæ’ä»¶æœ‰äº›åŠŸèƒ½åœ¨ 10.11 ä¸‹æ˜¯ä¸ work çš„ï¼Œæ‰€ä»¥æ’ä»¶ä½œè€…å‡ºäºå¥½å¿ƒï¼Œåœ¨æ£€æµ‹åˆ°ä½ çš„ç³»ç»Ÿæ˜¯ 10.11 ä¸” SIP æ²¡æœ‰å…³é—­çš„æƒ…å†µä¸‹ï¼Œä¼šå¼¹å‡ºä¸€ä¸ª alert çª—å£ä½œä¸ºæé†’ã€‚</p>]]>
    
    </summary>
    
      <category term="Mac" scheme="http://hi.zongquan.wang/tags/Mac/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Xcode Build Settings - Products Path]]></title>
    <link href="http://hi.zongquan.wang/2015/11/16/Xcode_Build_Settings_Products_Path/"/>
    <id>http://hi.zongquan.wang/2015/11/16/Xcode_Build_Settings_Products_Path/</id>
    <published>2015-11-16T12:21:54.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<p>å‡è®¾ä¸€ä¸ª Project çš„è·¯å¾„æ˜¯ <code>XXX/ProjectX</code>ã€‚</p>
<p>å½“ build å®Œæˆåï¼Œæˆ‘ä»¬ä¼šå…³æ³¨ 2 ä¸ªä¸ <strong>Product Files</strong> æœ‰å…³çš„ settings ï¼š</p>
<a id="more"></a>
<p><strong><code>$BUILT_PRODUCTS_DIR</code></strong> å’Œ <strong><code>$TARGET_BUILD_DIR</code></strong></p>
<p>è¿™ 2 ä¸ª settings å†³å®šäº†æˆ‘ä»¬ build å‡ºæ¥çš„ Products è¢«æ”¾ç½®åˆ°äº†å“ªé‡Œã€‚</p>
<h4 id="å®˜æ–¹è§£é‡Š">å®˜æ–¹è§£é‡Š</h4><ul>
<li><p><strong><code>$BUILT_PRODUCTS_DIR</code></strong>ï¼šDirectory path. Identifies the directory under which all the productâ€™s files can be found. This directory contains either product files or symbolic links to them.</p>
</li>
<li><p><strong><code>$TARGET_BUILD_DIR</code></strong>ï¼šDirectory path. Identifies the root of the directory hierarchy that contains the productâ€™s files (no intermediate build files).</p>
</li>
</ul>
<p>ä¹ä¸€çœ‹å¥½åƒéƒ½æ˜¯ç”¨æ¥å­˜æ”¾ <strong>Product Files</strong> çš„ç›®å½•ï¼Œä½†æ˜¯å®ƒä»¬çš„ä½œç”¨æ˜¯ä¸ä¸€æ ·çš„ï¼š</p>
<p>åˆšç¼–è¯‘å®Œçš„æ—¶å€™ï¼ŒXcode ä¼šå…ˆæŠŠ <strong>Product Files</strong> ç”Ÿæˆåˆ° <strong><code>$BUILT_PRODUCTS_DIR</code></strong> ä¸­ï¼Œç„¶åå†æ ¹æ®å…·ä½“çš„ configuration æ¥å†³å®šè¦ä¸è¦å¯¹ç”Ÿæˆçš„ <strong>Product Files</strong> è¿›è¡Œ deployï¼Œå¦‚æœä¸éœ€è¦ deployï¼Œé‚£ä¹ˆ <strong>Product Files</strong> æœ€åè¿˜æ˜¯ç•™åœ¨ <strong><code>$BUILT_PRODUCTS_DIR</code></strong> ä¸­ï¼Œå¦‚æœéœ€è¦ deployï¼Œé‚£ä¹ˆ <strong>Product Files</strong> ä¼šè¢« move åˆ° <strong><code>$TARGET_BUILD_DIR</code></strong> ä¸­ï¼Œè€ŒåŸæ¥çš„ <strong><code>$BUILT_PRODUCTS_DIR</code></strong> ä¸­å°±åªæœ‰ symbolic links äº†ã€‚</p>
<h4 id="ä¸¾ä¸ªä¾‹å­">ä¸¾ä¸ªä¾‹å­</h4><p>æ™®é€šçš„ app åœ¨ build å®Œä¹‹åï¼Œä¸€èˆ¬æ”¾ç½®åœ¨ <code>$BUILT_PRODUCTS_DIR</code> ä¸­å³å¯ï¼Œè€Œå¯¹äº Xcode Plugin æ¥è¯´ï¼Œåœ¨ build å®Œä¹‹åä¸€èˆ¬ä¼šç›´æ¥å°†å…¶ deploy åˆ° Xcode çš„ <strong>Plug-ins</strong> ç›®å½•ä¸­ï¼Œæ­¤æ—¶ <code>$TARGET_BUILD_DIR</code> å°±æ˜¯ <strong>Plug-ins</strong> ç›®å½•ï¼Œè€Œ <code>$BUILT_PRODUCTS_DIR</code> ä¸­åªæœ‰ Plugin çš„ symbolic linksã€‚</p>
<p><em>å¯ä»¥ clone ä¸€ä¸‹æˆ‘ä¹‹å‰å†™çš„ä¸€ä¸ª<a href="https://github.com/wzqcongcong/AtAutoCompletion" target="_blank" rel="external">å°æ’ä»¶</a>ï¼Œbuild ä¸€ä¸‹çœ‹ç»“æœã€‚</em></p>
<hr>
<h4 id="ä¸‹é¢å°±çœ‹ä¸€ä¸‹è¿™_2_ä¸ªè·¯å¾„æ˜¯å¦‚ä½•è®¾ç½®çš„">ä¸‹é¢å°±çœ‹ä¸€ä¸‹è¿™ 2 ä¸ªè·¯å¾„æ˜¯å¦‚ä½•è®¾ç½®çš„</h4><p><strong>é¦–å…ˆè§£é‡Šä¸€äº›ç›¸å…³çš„ settingsï¼š</strong></p>
<p><strong>settingName (settingDisplayNameInXcodeBuildSettings)</strong></p>
<ul>
<li><p><strong><code>$SRCROOT</code></strong>ï¼š<code>XXX/ProjectX</code></p>
</li>
<li><p><strong><code>$SYMROOT (Build Products Path)</code></strong>ï¼šDirectory path. Identifies the root of the directory hierarchy that contains product files and intermediate build files. Product and build files are placed in subdirectories of this directory. çœ‹å®Œå®˜æ–¹è§£é‡Šï¼Œæˆ‘å†è¯´ä¸€ä¸‹å®ƒå…·ä½“å¦‚ä½•è®¾ç½®ã€‚</p>
<ol>
<li><p>é»˜è®¤å€¼æ˜¯ <code>$SRCROOT/build</code></p>
</li>
<li><p>å¯ä»¥åœ¨ Xcode çš„ Preferences é‡Œé¢è®¾ç½® <code>Build Location</code>ï¼Œå¦‚ä¸‹å›¾<br><img src="/img/Xcode_Build_Settings_Products_Path/location.png" alt="Build Location"></p>
</li>
<li><p>ç›´æ¥åœ¨ Target çš„ <code>Build Settings</code> é‡Œé¢è®¾ç½® <code>Build Products Path</code>ï¼Œå¦‚ä¸‹å›¾<br><img src="/img/Xcode_Build_Settings_Products_Path/build_products_path.png" alt="Build Products Path"></p>
</li>
</ol>
<p>è¿™ 3 ç§è®¾ç½®çš„ä¼˜å…ˆçº§ä¾æ¬¡é€’å¢ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ åŒæ—¶è®¾ç½®äº† 2 å’Œ 3ï¼Œé‚£ä¹ˆæœ€å build æ˜¯æŒ‰ç…§ 3 çš„å€¼æ¥å¤„ç†çš„ã€‚</p>
</li>
<li><p><strong><code>$CONFIGURATION</code></strong>ï¼šDebugã€Releaseã€è‡ªå®šä¹‰çš„ç­‰ç­‰ã€‚</p>
</li>
<li><p><strong><code>$CONFIGURATION_BUILD_DIR (Per-Configuration Build Products Path)</code></strong>ï¼š= <code>$SYMROOT/$CONFIGURATION</code>ï¼Œä¾‹å¦‚ <code>XXX/ProjectX/build/Debug</code>ã€‚</p>
</li>
<li><p><strong><code>$DEPLOYMENT_LOCATION (Deployment Location)</code></strong>ï¼šBoolean value. Specifies whether product files are placed in the installation or the build directory. å®ƒå†³å®šäº†è¦ä¸è¦å¯¹ <strong>Product Files</strong> è¿›è¡Œ deployã€‚</p>
</li>
<li><p><strong><code>$SKIP_INSTALL (Skip Install)</code></strong>ï¼šBoolean value. Specifies whether to place the product at the location indicated by <em><code>$DSTROOT</code></em> or the uninstalled products directory inside the directory indicated by <em><code>$TARGET_TEMP_DIR</code></em>. å®ƒå†³å®šäº†å…·ä½“è¦æŠŠ <strong>Product Files</strong> deploy åˆ°å“ªé‡Œã€‚</p>
</li>
</ul>
<p><strong>ä¸‹é¢å°±è½®åˆ° 2 ä¸ªä¸»è§’äº†ã€‚</strong></p>
<ul>
<li><p><strong><code>$BUILT_PRODUCTS_DIR</code></strong>ï¼š= <code>$CONFIGURATION_BUILD_DIR</code> = <code>$SYMROOT/$CONFIGURATION</code> <em>ï¼ˆå…¶å®é™¤äº†è¿™ä¸ªå€¼ï¼Œè¿˜æœ‰ä¸€ç§å–å€¼ï¼Œä¸è¿‡åŸºæœ¬ä¸ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œä¸ºäº†ä¾¿äºç†è§£æŠŠå®ƒå¿½ç•¥äº†ã€‚è¯¦æƒ…å¯æŸ¥é˜…<a href="https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/XcodeBuildSettingRef/0-Introduction/introduction.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>ï¼‰</em></p>
</li>
<li><p><strong><code>$TARGET_BUILD_DIR</code></strong>ï¼š</p>
<ol>
<li><p>å¦‚æœ <code>$DEPLOYMENT_LOCATION</code> = <code>NO</code>ï¼Œå³ä¸éœ€è¦ deployï¼Œé‚£ä¹ˆ <code>$TARGET_BUILD_DIR</code> å°±ç›´æ¥ç­‰åŒäº <code>$BUILT_PRODUCTS_DIR</code>ã€‚</p>
</li>
<li><p>å¦‚æœ <code>$DEPLOYMENT_LOCATION</code> = <code>YES</code>ï¼Œå³éœ€è¦ deployï¼Œé‚£ä¹ˆï¼š</p>
</li>
</ol>
<p>2.1. å¦‚æœ <code>$SKIP_INSTALL</code> = <code>NO</code>ï¼Œé‚£ä¹ˆ <code>$TARGET_BUILD_DIR</code> = <code>$INSTALL_DIR</code> = <code>$DSTROOT/$INSTALL_PATH</code>ã€‚å…¶ä¸­ï¼Œ<code>$DSTROOT</code> çš„ display name æ˜¯ <code>Installation Build Products Location</code>ï¼Œ<code>$INSTALL_PATH</code> çš„ display name æ˜¯ <code>Installation Directory</code>ã€‚å¦å¤–éœ€è¦æ³¨æ„ï¼Œä¸ºäº†æ‹¼æ¥å‡ºä¸€ä¸ªæœ‰æ•ˆçš„ <code>$INSTALL_DIR</code>ï¼Œ<code>$INSTALL_PATH</code> å¿…é¡»ä»¥ <code>/</code> å¼€å¤´ã€‚</p>
<p>2.2. å¦‚æœ <code>$SKIP_INSTALL</code> = <code>YES</code>ï¼Œé‚£ä¹ˆ <code>$TARGET_BUILD_DIR</code> = <code>$TARGET_TEMP_DIR/UninstalledProducts</code>ã€‚</p>
<p>ä¸€èˆ¬éœ€è¦ deploy çš„æ—¶å€™ï¼Œéƒ½æ˜¯è®¾ç½® <code>$SKIP_INSTALL</code> ä¸º <code>NO</code>ï¼Œç„¶åè®¾ç½®å…·ä½“çš„ <code>$DSTROOT</code> å’Œ <code>$INSTALL_PATH</code>ï¼Œæ‰€ä»¥è¿™é‡Œå¿½ç•¥å¯¹ <code>$TARGET_TEMP_DIR</code> ç†è§£ã€‚</p>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>å‡è®¾ä¸€ä¸ª Project çš„è·¯å¾„æ˜¯ <code>XXX/ProjectX</code>ã€‚</p>
<p>å½“ build å®Œæˆåï¼Œæˆ‘ä»¬ä¼šå…³æ³¨ 2 ä¸ªä¸ <strong>Product Files</strong> æœ‰å…³çš„ settings ï¼š</p>]]>
    
    </summary>
    
      <category term="Xcode" scheme="http://hi.zongquan.wang/tags/Xcode/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[How to get File Attributes in Mac]]></title>
    <link href="http://hi.zongquan.wang/2015/01/22/How_to_get_File_Attributes_in_Mac/"/>
    <id>http://hi.zongquan.wang/2015/01/22/How_to_get_File_Attributes_in_Mac/</id>
    <published>2015-01-22T07:16:18.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<h4 id="Mac_File_Attributes">Mac File Attributes</h4><p>åœ¨ Mac å¼€å‘ä¸­ï¼Œæƒ³è¦è·å– file æˆ–è€… dir çš„å±æ€§ï¼Œæœ‰è¿™ä¹ˆ4ç§æ–¹å¼ï¼š</p>
<a id="more"></a>
<ul>
<li><p><strong>Linux C api</strong></p>
<p>  <code>int lstat(const char *restrict path, struct stat *restrict buf)</code></p>
<p>  è·å–åˆ°çš„ stat æœ‰å¦‚ä¸‹å±æ€§ï¼š</p>
<pre><code><span class="keyword">struct</span> stat { <span class="comment">/* when _DARWIN_FEATURE_64_BIT_INODE is defined */</span>
    <span class="keyword">dev_t</span>           st_dev;           <span class="comment">/* ID of device containing file */</span>
    <span class="keyword">mode_t</span>          st_mode;          <span class="comment">/* Mode of file (see below) */</span>
    <span class="keyword">nlink_t</span>         st_nlink;         <span class="comment">/* Number of hard links */</span>
    <span class="keyword">ino_t</span>           st_ino;           <span class="comment">/* File serial number */</span>
    <span class="keyword">uid_t</span>           st_uid;           <span class="comment">/* User ID of the file */</span>
    <span class="keyword">gid_t</span>           st_gid;           <span class="comment">/* Group ID of the file */</span>
    <span class="keyword">dev_t</span>           st_rdev;          <span class="comment">/* Device ID */</span>
    <span class="keyword">struct</span> timespec st_atimespec;     <span class="comment">/* time of last access */</span>
    <span class="keyword">struct</span> timespec st_mtimespec;     <span class="comment">/* time of last data modification */</span>
    <span class="keyword">struct</span> timespec st_ctimespec;     <span class="comment">/* time of last status change */</span>
    <span class="keyword">struct</span> timespec st_birthtimespec; <span class="comment">/* time of file creation(birth) */</span>
    <span class="keyword">off_t</span>           st_size;          <span class="comment">/* file size, in bytes */</span>
    <span class="keyword">blkcnt_t</span>        st_blocks;        <span class="comment">/* blocks allocated for file */</span>
    <span class="keyword">blksize_t</span>       st_blksize;       <span class="comment">/* optimal blocksize for I/O */</span>
    <span class="keyword">uint32_t</span>        st_flags;         <span class="comment">/* user defined flags for file */</span>
    <span class="keyword">uint32_t</span>        st_gen;           <span class="comment">/* file generation number */</span>
};
</code></pre></li>
</ul>
<ul>
<li><p><strong>Metadata</strong></p>
<p>  è¿™ç§æ–¹å¼æ˜¯åŸºäº Spotlight çš„ï¼Œä¼˜ç‚¹æ˜¯åœ¨è®¿é—®å¤§é‡æ–‡ä»¶æ—¶é€Ÿåº¦å¿«ï¼Œç¼ºç‚¹æ˜¯è¦ä¾èµ– Spotlight åŠŸèƒ½çš„å¼€å¯ã€‚å½“ Spotlight è·å–åˆ° item çš„ metadata åï¼Œå°±å¯ä»¥é€šè¿‡ä¸‹é¢2ç§æ–¹æ³•æ¥è·å–è¿™äº› metadataï¼š</p>
<ul>
<li><p><code>CFTypeRef MDItemCopyAttribute(MDItemRef item, CFStringRef name)</code>ï¼Œmetadata attribute key æ ¼å¼ä¸º kMDItemXXXï¼Œè¯¦è§æ–‡æ¡£ã€‚</p>
</li>
<li><p><code>NSMetadataQuery</code>ï¼Œé€šè¿‡æ‰§è¡Œ Spotlight æŸ¥è¯¢æ¥è·å– resultï¼Œmetadata attribute key æ ¼å¼åŒä¸Šã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼Œè¿™ç§æ–¹å¼æ˜¯åŸºäº Spotlight è·å–åˆ°äº†è¿™äº› metadataï¼Œå¦åˆ™æ‹¿åˆ°çš„å€¼å¯èƒ½å°±æ˜¯ NULL äº†ã€‚</p>
<p><strong>å¦å¤–</strong>ï¼Œåœ¨ terminal ä¸­ï¼Œè¿™ç§æ–¹å¼ä¹Ÿæœ‰ç›¸åº”çš„å‘½ä»¤ <code>mdls</code> å¯ä»¥ä½¿ç”¨ã€‚</p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p><strong>NSFileManager</strong></p>
<p>  é€šè¿‡è°ƒç”¨ NSFileManager çš„ <code>attributesOfItemAtPath:error:</code> ä¹Ÿå¯ä»¥æ‹¿åˆ° file çš„ attributeï¼Œattribute key æ ¼å¼ä¸º <code>NSFileXXX</code>ï¼Œè¯¦è§æ–‡æ¡£ã€‚</p>
</li>
</ul>
<ul>
<li><p><strong>NSURL</strong></p>
<p>  é€šè¿‡è°ƒç”¨ NSURL çš„ <code>getResourceValue:forKey:error:</code> ä¹Ÿå¯ä»¥æ‹¿åˆ° file çš„ attributeï¼Œresource key æ ¼å¼ä¸º <code>NSURLXXX</code>ï¼Œè¯¦è§æ–‡æ¡£ã€‚å¯¹æ¯”é‡‡ç”¨ NSFileManagerï¼Œè¿™ç§æ–¹å¼ä»¥ URL çš„å½¢å¼æ¥è®¿é—®è¯¥ fileï¼Œæ‹¿åˆ°çš„ attribute æ¯” NSFileManager ä¹Ÿå¤šã€‚<strong>æ¨èä½¿ç”¨ã€‚</strong></p>
</li>
</ul>
<h4 id="è¿™é‡Œé¡ºä¾¿æä¸€ä¸‹å…³äº_delete_file/dir_çš„ä¸€ç‚¹æ³¨æ„äº‹é¡¹">è¿™é‡Œé¡ºä¾¿æä¸€ä¸‹å…³äº delete file/dir çš„ä¸€ç‚¹æ³¨æ„äº‹é¡¹</h4><p>é¦–å…ˆï¼ŒNSFileManager æœ‰ä¸€ä¸ªåˆ¤æ–­ file/dir èƒ½å¦åˆ é™¤çš„ apiï¼š<code>isDeletableFileAtPath:</code>ï¼Œå…¶æ¬¡ï¼Œè¿˜æœ‰ä¸€ä¸ªè´Ÿè´£åˆ é™¤çš„ apiï¼š<code>removeItemAtPath:error:</code>ã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œ<code>isDeletableFileAtPath:</code> å’Œ <code>removeItemAtPath:error:</code> çš„è¡Œä¸ºä¸å¤ªä¸€è‡´ï¼</p>
<p><code>removeItemAtPath:error:</code> æ€»æ˜¯èƒ½å¤Ÿåšå‡ºæ­£ç¡®çš„è¡Œä¸ºï¼Œå³èƒ½åˆ é™¤çš„è¯å°±åˆ é™¤ï¼Œä¸èƒ½åˆ é™¤çš„è¯å°±ä¸ä¼šåˆ é™¤ã€‚ä½†æ˜¯ï¼Œ<code>isDeletableFileAtPath:</code> æœ‰æ—¶å€™ä¸èƒ½åšå‡ºæ­£ç¡®çš„åˆ¤æ–­ã€‚</p>
<ul>
<li><p>å¯¹äº file æ¥è¯´ï¼Œ<code>isDeletableFileAtPath:</code> æ€»æ˜¯å¯ä»¥åšå‡ºæ­£ç¡®çš„åˆ¤æ–­ï¼Œè¿™ä¸ªæ²¡é—®é¢˜ã€‚</p>
<p>  ä¹Ÿå°±æ˜¯è¯´ï¼Œæ ¹æ® Apple æ–‡æ¡£ï¼Œå½“ file çš„ parent dir å…·æœ‰å¯å†™æƒé™æ—¶ï¼Œfile å°±æ˜¯ deletable çš„ï¼Œä¸ç®¡ file æœ¬èº«çš„æƒé™å¦‚ä½•ã€‚å¦åˆ™ï¼Œå°±æ˜¯ undeletable çš„ã€‚</p>
</li>
<li><p>å¯¹äº dir æ¥è¯´ï¼Œå°±ä¼šå‡ºç°åˆšæ‰è¯´çš„é—®é¢˜ã€‚</p>
<p>  ç†è®ºä¸Šï¼Œæ ¹æ® Apple æ–‡æ¡£ï¼Œé™¤äº†åˆ¤æ–­ parent dir çš„å¯å†™æƒé™ä¹‹å¤–ï¼Œ<code>isDeletableFileAtPath:</code> è¿˜ä¼šé€’å½’åœ°å»åˆ¤æ–­ child itemï¼Œåªæœ‰æ‰€æœ‰çš„ child item éƒ½æ˜¯ deletable æ—¶ï¼Œæ‰ä¼šè¿”å› YESã€‚</p>
<p>  ä½†æ˜¯ï¼Œäº‹å®ä¸Šï¼Œ<code>isDeletableFileAtPath:</code> è²Œä¼¼æ²¡æœ‰å»é€’å½’åœ°æ£€æŸ¥ child itemã€‚</p>
<p>  ä¸¾ä¾‹è¯´æ˜ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ª pathï¼š<user_dir>/<root_dir>/<file_no_matter_root_or_user>ï¼Œpath ä¸­çš„åç§°æ ‡æ˜äº†å¯¹åº”çš„æƒé™ã€‚ç°åœ¨ç”¨ <code>isDeletableFileAtPath:</code> å»æ£€æŸ¥ <root_dir>ã€‚</root_dir></file_no_matter_root_or_user></root_dir></user_dir></p>
<p>  ç†è®ºä¸Šï¼Œ<root_dir> ä¸­æœ‰ä¸ª <file_no_matter_root_or_user>ï¼Œè€Œ <file_no_matter_root_or_user> æ˜¯ undeletable çš„ï¼ˆå› ä¸ºå®ƒçš„ parent dir <root_dir> æ˜¯ root çš„ï¼Œæ™®é€šç”¨æˆ·æ²¡æœ‰å¯å†™æƒé™ï¼‰ï¼Œæ‰€ä»¥ <root_dir> å°±æ˜¯ undeletable çš„ï¼Œæ‰€ä»¥åº”è¯¥è¿”å› NOã€‚ä½†æ˜¯ <code>isDeletableFileAtPath:</code> è¿”å›çš„å´æ˜¯ YESã€‚æ­¤æ—¶å¦‚æœè°ƒç”¨ <code>removeItemAtPath:error:</code> å»åˆ é™¤ <root_dir> æ—¶ï¼Œå°±ä¼šå‡ºç° errorï¼Œæç¤ºæ²¡æœ‰æƒé™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>removeItemAtPath:error:</code> è·Ÿå®é™…æƒ…å†µæ˜¯ä¸€è‡´çš„ï¼Œä½† <code>isDeletableFileAtPath:</code> å´åšå‡ºäº†é”™è¯¯çš„åˆ¤æ–­ã€‚æ‰€ä»¥å¯¹äºè¿™ç§æƒ…å†µï¼Œä½ éœ€è¦æ‰‹åŠ¨åœ°å»é€’å½’è°ƒç”¨ <code>isDeletableFileAtPath:</code> æ¥æ£€æŸ¥ <root_dir>ã€‚</root_dir></root_dir></root_dir></root_dir></file_no_matter_root_or_user></file_no_matter_root_or_user></root_dir></p>
<p>  æ„Ÿè§‰å¥½å‘å•Šï¼Œéš¾é“æ‰“å¼€çš„å§¿åŠ¿ä¸å¯¹~~</p>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h4 id="Mac_File_Attributes">Mac File Attributes</h4><p>åœ¨ Mac å¼€å‘ä¸­ï¼Œæƒ³è¦è·å– file æˆ–è€… dir çš„å±æ€§ï¼Œæœ‰è¿™ä¹ˆ4ç§æ–¹å¼ï¼š</p>]]>
    
    </summary>
    
      <category term="Mac" scheme="http://hi.zongquan.wang/tags/Mac/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Study iOS - Hardware]]></title>
    <link href="http://hi.zongquan.wang/2015/01/18/Study_iOS_Hardware/"/>
    <id>http://hi.zongquan.wang/2015/01/18/Study_iOS_Hardware/</id>
    <published>2015-01-18T07:42:25.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šHardware">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šHardware</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š14ã€17</em></p>
<a id="more"></a>
<hr>
<p>å…³äº iOS device çš„ hardwareï¼Œæœ¬ç¯‡ä¸»è¦äº†è§£2ä¸ªæ–¹é¢ï¼šCoreLocation + CoreMotion</p>
<h3 id="CoreLocation">CoreLocation</h3><ul>
<li><p><strong><code>CLLocation</code></strong>ï¼šCoreLocation ä¸­æœ€åŸºæœ¬çš„ classã€‚</p>
<p>  CLLocation çš„é‡è¦ propertyï¼š</p>
<p>  <em><code>coordinate</code></em>ï¼šä½ç½®åæ ‡ï¼ŒåŒ…å« latitude å’Œ longitude ä¸¤ä¸ªå…ƒç´ ã€‚</p>
<p>  <em><code>altitude</code></em>ï¼šæµ·æ‹”ã€‚</p>
<p>  <em><code>horizontal/verticalAccuracy</code></em>ï¼šç²¾åº¦ã€‚Cellular &lt; WiFi &lt; GPSã€‚</p>
</li>
<li><p><strong><code>CLLocationManager</code></strong>ï¼šç”¨äºè·å– CLLocationã€‚</p>
<p>  ä½¿ç”¨æµç¨‹ï¼š</p>
<ol>
<li><p><em><code>check device</code></em></p>
<p> ä¸»è¦æ˜¯æ£€æŸ¥ device æ˜¯å¦æ”¯æŒä»¥æŸç§æ–¹å¼æ¥è·å–æŸç§ locationï¼Œä»¥åŠæ˜¯å¦æœ‰æƒé™æ¥è·å–ã€‚</p>
<p> å…³äºæƒé™ï¼Œæœ‰3ä¸­çŠ¶æ€ï¼šAuthorizedã€Deniedã€Restrictedã€‚</p>
</li>
<li><p><em><code>init &amp; delegate</code></em>ï¼šé€šè¿‡ CLLocationManager æ¥è·å– CLLocation å¯ä»¥æœ‰2ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ä¸»åŠ¨ askï¼ˆpollï¼‰ï¼Œä¸€ç§æ˜¯ delegateã€‚é€šå¸¸é‡‡ç”¨ delegate çš„æ–¹å¼ï¼Œdelegate è§¦å‘åï¼Œä½ å°±å¯ä»¥è®¿é—® CLLocationManager çš„ property <em><code>location</code></em> æ¥è·å–å½“å‰çš„ CLLocation äº†ã€‚</p>
</li>
<li><p><em><code>configuration</code></em></p>
<p> é€šè¿‡ property <em><code>desiredAccuracy</code></em> æ¥è®¾å®šæƒ³è¦çš„ç²¾åº¦ã€‚</p>
<p> é€šè¿‡ property <em><code>distanceFilter</code></em> å‘Šè¯‰ CLLocationManagerï¼Œåªæœ‰å½“ location çš„å˜åŒ–è¶…è¿‡è¯¥èŒƒå›´æ—¶ï¼Œæ‰å»è§¦å‘ update delegateã€‚</p>
</li>
<li><p><em><code>start monitor</code></em></p>
<p> ä½ å¯ä»¥è¿›è¡Œå¦‚ä¸‹å‡ ç§å½¢å¼çš„ monitorï¼Œæ¯ç§ monitor éƒ½æœ‰ç›¸åº”çš„ delegate å‡½æ•°ï¼Œå‚è§æ–‡æ¡£ã€‚</p>
<ul>
<li><p><em><code>normal monitor</code></em>ï¼šstandard monitorï¼Œé€šè¿‡è®¾å®šç²¾åº¦ï¼Œæ¯å½“ update è§¦å‘æ—¶ï¼Œå°±ä¼šé€šçŸ¥ appã€‚</p>
</li>
<li><p><em><code>significant change monitor</code></em>ï¼šä»…å½“ location å‘ç”Ÿæ˜æ˜¾å˜åŒ–æ—¶æ‰é€šçŸ¥ appï¼Œè¿™é‡Œçš„ significant å¹¶æœªå®šä¹‰å…·ä½“æ˜¯å¤šå°‘ã€‚</p>
</li>
<li><p><em><code>region monitor</code></em>ï¼šå½“ device è¿›å…¥æŸä¸ªæŒ‡å®šçš„ region æ—¶ï¼Œé€šçŸ¥ appã€‚</p>
</li>
<li><p><em><code>beacon monitor</code></em>ï¼šå½“ device è¿›å…¥æŸä¸ªæŒ‡å®šçš„ beacon æ—¶ï¼Œé€šçŸ¥ appï¼Œè¿™ç§ monitor é€šå¸¸ä¸ <em><code>Core Bluetooth</code></em> ç›¸å…³ã€‚</p>
</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼Œå½“ä½ ä¸å†éœ€è¦ monitor æ—¶ï¼Œä¸è¦å¿˜äº† stop monitorã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼Œå³ä½¿ app not runningï¼Œè¿™äº› monitor ä¹Ÿè¿˜æ˜¯èƒ½å¤Ÿ work çš„ã€‚æƒ³è¦åœ¨ background æ¨¡å¼ä¸‹ç»§ç»­ monitorï¼Œéœ€è¦åœ¨ project ä¸­è®¾ç½®ä¸€ä¸‹ï¼Œç±»ä¼¼äº background fetch çš„è®¾ç½®ã€‚å½“ delegate è§¦å‘åï¼Œapp å°±ä¼šè¢«å¯åŠ¨ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>application:didFinishLaunchingWithOption:</code> çš„ option dictionary ä¸­å°±ä¼šåŒ…å«ä¸€ä¸ª key <code>UIApplicationLaunchOptionsLocationKey</code>ã€‚</p>
</li>
</ol>
</li>
</ul>
<h3 id="CoreMotion">CoreMotion</h3><p>ä¸»è¦ç”¨äºè·å–å„ç§ motion sensor çš„ä¿¡æ¯ï¼Œå¦‚ accelerometerã€gyroã€magnetometer ç­‰ç­‰ã€‚</p>
<p>iOS ä¸­æä¾›çš„ class æ˜¯ <em><code>CMMotionManager</code></em>ï¼Œä½ å¯ä»¥é€šè¿‡ alloc/init æ¥è·å–ã€‚<strong>ä½†æ˜¯æ³¨æ„</strong>ï¼Œå¤„äºæ€§èƒ½è€ƒè™‘ï¼Œæ¯ä¸ª app ä¸­åªèƒ½æœ‰ä¸€ä¸ªå…¨å±€çš„ CMMotionManager instanceï¼Œå› æ­¤ä½ éœ€è¦åˆ›å»ºä¸€ä¸ªå•ä¾‹æ¨¡å¼æ¥å®ç°å…¨å±€å•ä¾‹ã€‚</p>
<p>ä½¿ç”¨æµç¨‹ï¼š</p>
<ol>
<li><p><em><code>check device</code></em>ï¼šæ£€æŸ¥ device æ˜¯å¦æ”¯æŒè·å–æŸç§ motion dataã€‚</p>
<p> è¿™é‡Œéœ€è¦æä¸€ä¸‹ï¼Œé™¤äº† accelerometerã€gyroã€magnetometer ä¹‹å¤–ï¼ŒiOS è¿˜æä¾›äº†ä¸€ä¸ª <em><code>CMDeviceMotion</code></em>ï¼Œå¯¹å‰é¢3ç§ data è¿›è¡Œäº†ç»¼åˆå°è£…ï¼Œå¯ä»¥é€šè¿‡å®ƒä¸€æ¬¡æ€§è·å–è¿™3ç§ dataã€‚</p>
<p> <img src="/img/Study_iOS_Hardware/17.9.CoreMotion.png" alt="CoreMotion"></p>
<p> <img src="/img/Study_iOS_Hardware/17.10.CoreMotion.png" alt="CoreMotion"></p>
</li>
<li><p><em><code>start &amp; get motion data</code></em>ï¼šæœ‰ä¸¤ç§è·å– motion data çš„æ–¹å¼ï¼š</p>
<ul>
<li><p>ä¸»åŠ¨ askï¼ˆpollï¼‰ï¼š<em><code>start/stopXXXUpdates</code></em></p>
</li>
<li><p>é€šè¿‡è®¾ç½® rateï¼Œæ³¨å†Œ callbackï¼Œè¢«åŠ¨æ¥æ”¶ã€‚</p>
<p>  <img src="/img/Study_iOS_Hardware/17.11.CoreMotion.png" alt="CoreMotion"></p>
<p>  <img src="/img/Study_iOS_Hardware/17.12.CoreMotion.png" alt="CoreMotion"></p>
<p>  <img src="/img/Study_iOS_Hardware/17.13.CoreMotion.png" alt="CoreMotion"></p>
</li>
</ul>
</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šHardware">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šHardware</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š14ã€17</em></p>]]>
    
    </summary>
    
      <category term="iOS" scheme="http://hi.zongquan.wang/tags/iOS/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Study iOS - L18N]]></title>
    <link href="http://hi.zongquan.wang/2015/01/18/Study_iOS_L18N/"/>
    <id>http://hi.zongquan.wang/2015/01/18/Study_iOS_L18N/</id>
    <published>2015-01-18T05:35:11.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šL18N">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šL18N</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š18</em></p>
<a id="more"></a>
<hr>
<p>L18N ä¸»è¦æ¶‰åŠ2æ–¹é¢ï¼šXcode + codeã€‚</p>
<ul>
<li><p><strong>Xcode</strong></p>
<p>  é¦–å…ˆéœ€è¦åœ¨ Xcode ä¸­è®¾ç½® app æ”¯æŒçš„è¯­è¨€ï¼š</p>
<p>  <img src="/img/Study_iOS_L18N/18.1.L18N.png" alt="L18N"></p>
<p>  ç„¶åä½ å°±å¯ä»¥å¯¹ storyboard è¿›è¡Œ L18Näº†ï¼ŒXcode ä¼šç”Ÿæˆç›¸åº”è¯­è¨€çš„ .strings æ–‡ä»¶ã€‚</p>
</li>
<li><p><strong>code</strong></p>
<p>  å¯¹äºä¸åœ¨ storyboard ä¸­çš„ strings å¦‚ä½• L18N å‘¢ï¼Ÿé‚£å°±å¾—é€šè¿‡ code æ¥å¤„ç†äº†ã€‚</p>
<p>  <img src="/img/Study_iOS_L18N/18.2.L18N.png" alt="L18N"></p>
<p>  åœ¨ä»£ç ä¸­è°ƒç”¨ä¸Šè¿° macros ä¹‹åï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤è‡ªåŠ¨ç”Ÿæˆ .strings æ–‡ä»¶ï¼š</p>
<p>  <img src="/img/Study_iOS_L18N/18.3.L18N.png" alt="L18N"></p>
<p>  <strong>æ³¨æ„</strong>ï¼Œå½“ä½ ä» <em><code>Bundle</code></em> ä¸­è·å–æŸä¸ªæ–‡ä»¶çš„ path æ—¶ï¼Œå…¶æœç´¢é¡ºåºæ˜¯ï¼šå…ˆ bundle çš„ top-level å±‚ï¼Œå .lproj å±‚ã€‚</p>
</li>
</ul>
<h3 id="Locale">Locale</h3><p>æåˆ° L18Nï¼Œå°±ä¸å¾—ä¸æ Localeï¼Œå› ä¸ºå®ƒæ˜¯æ•´ä¸ª L18N å¾—ä»¥å®ç°çš„åŸºç¡€ã€‚æ­¤å¤–ï¼ŒLocale ä¹Ÿå†³å®šäº† date å’Œ number çš„æ ¼å¼ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼ŒLocale å’Œ language ä¸æ˜¯ç­‰ä»·çš„ï¼Œlanguage ä¸€æ ·çš„æ—¶å€™ï¼ŒLocale ä¸ä¸€å®šä¸€æ ·ã€‚</p>
<ul>
<li><p><strong><code>NSLocale</code></strong>ï¼šiOS ä¸­ä¸»è¦é è¯¥ class æ¥è·å– Locale ç›¸å…³çš„ä¿¡æ¯ï¼Œè¯¥ class çŸ¥é“å¦‚ä½•è®¾å®šä¸åŒæ ¼å¼çš„ date å’Œ numberã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹ date å’Œ number çš„è®¾å®šä¸»è¦å°±æ˜¯ç»™ä»–ä»¬ä¼ é€’å¯¹åº”çš„ NSLocale å‚æ•°ã€‚</p>
</li>
<li><p><strong><code>NSNumberFormatter</code></strong></p>
<p>  <img src="/img/Study_iOS_L18N/18.6.L18N.NSNumberFormatter.png" alt="L18N"></p>
</li>
<li><p><strong><code>NSDateFormatter</code></strong></p>
<p>  <img src="/img/Study_iOS_L18N/18.7.L18N.NSDateFormatter.png" alt="L18N"></p>
</li>
<li><p><strong><code>NSString</code></strong></p>
<p>  <img src="/img/Study_iOS_L18N/18.8.L18N.NSString.png" alt="L18N"></p>
</li>
<li><p><strong><code>UIImage</code></strong></p>
<p>  å½“ä½ è°ƒç”¨ UIImage çš„ <code>imageNamed:*</code> æ—¶ï¼Œå®ƒä¹Ÿæ˜¯ä¼šå»æœç´¢ç›¸åº”çš„ .lproj ç›®å½•çš„ã€‚</p>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šL18N">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šL18N</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š18</em></p>]]>
    
    </summary>
    
      <category term="iOS" scheme="http://hi.zongquan.wang/tags/iOS/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Study iOS - Misc UI]]></title>
    <link href="http://hi.zongquan.wang/2015/01/17/Study_iOS_Misc_UI/"/>
    <id>http://hi.zongquan.wang/2015/01/17/Study_iOS_Misc_UI/</id>
    <published>2015-01-17T07:30:03.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šMisc_UI">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šMisc UI</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼šall</em></p>
<a id="more"></a>
<hr>
<p>ä¹‹å‰çš„æ–‡ç« å·²ç»å­¦ä¹ äº†å‡ ç§ iOS ä¸­æ¯”è¾ƒå¤§è€Œé‡è¦çš„ UIViewï¼Œä¾‹å¦‚ UIScrollViewã€UITableView ç­‰ï¼Œæœ¬ç¯‡ä¸»è¦äº†è§£ä¸€ä¸‹å…¶å®ƒä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„å°å‹ UI ç±»å‹ã€‚</p>
<h3 id="UITextView">UITextView</h3><p><strong><code>UITextView</code></strong> æä¾›äº†ä¸€ä¸ª multi-lineã€selectableã€editableã€scrollable çš„ç¼–è¾‘åŒºï¼Œé€šè¿‡ <em><code>NSMutableAttributedString</code></em> æ¥è®¾å®šå®ƒçš„æ–‡æœ¬å†…å®¹å’Œå„ç§å±æ€§ã€‚</p>
<p>UITextView æœ‰3ä¸ªæ¯”è¾ƒé‡è¦çš„ propertyï¼Œå®ƒä»¬å…±åŒå®Œæˆæ•´ä¸ª UITextView å†…å®¹çš„æ˜¾ç¤ºã€‚</p>
<ul>
<li><p><em><code>textStorage</code></em>ï¼šNSTextStorage æ˜¯ NSMutableAttributedString çš„ subclassï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒUITextView çš„æ–‡æœ¬å†…å®¹å’Œæ–‡æœ¬å±æ€§æ˜¯é€šè¿‡è¯¥ property æ¥å†³å®šçš„ï¼Œå¯¹å…¶èµ‹å€¼ä»€ä¹ˆæ ·çš„ NSMutableAttributedStringï¼Œå°±ä¼šæ˜¾ç¤ºä»€ä¹ˆæ ·çš„å†…å®¹ã€‚</p>
</li>
<li><p><em><code>textContainer</code></em>ï¼šNSTextContainer å†³å®šäº† NSTextStorage å°†ä¼šå¸ƒå±€åœ¨æ•´ä¸ª UITextView çš„å“ªä¸ªåŒºåŸŸä¸­ï¼Œå³ where text can beã€‚ä½ ç”šè‡³å¯ä»¥é€šè¿‡å®ƒæ¥æŒ‡å®šä¸€ä¸ª <em><code>exclusion zones</code></em>ï¼ˆä¾‹å¦‚ä¸€ä¸ª imageï¼‰ï¼Œè¿™æ · NSTextStorage å°±ä¼šå›´ç»•è¿™ä¸ª exclusion  zones æ¥å¸ƒå±€ï¼Œå¦‚åŒ Word ä¸­çš„å›¾ç‰‡ç¯ç»•æ•ˆæœï¼Œç°å¸¸ NBã€‚</p>
</li>
<li><p><em><code>layoutManager</code></em>ï¼šå‰é¢2ä¸ª propertyï¼Œä¸€ä¸ªå†³å®šå†…å®¹ï¼Œä¸€ä¸ªå†³å®šæ ·å¼ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„ NSLayoutManager å°±æ˜¯è´Ÿè´£ä» NSTextStorage ä¸­è·å–åˆ° textï¼Œç„¶åå°†å®ƒä»¬ lay down åˆ° NSTextContainer è®¾å®šçš„æœ‰æ•ˆåŒºåŸŸä¸­ã€‚</p>
</li>
</ul>
<h3 id="UITextField">UITextField</h3><p><strong><code>UITextField</code></strong> å°±åƒæ˜¯ UILabel çš„å‡çº§ç‰ˆï¼Œå®ƒæ˜¯ editable çš„ã€‚è¿™é‡Œä¸»è¦äº†è§£ä¸‹ <em><code>UITextFieldDelegate</code></em> ä»¥åŠ <em><code>Keyboard</code></em> çš„ä½¿ç”¨ã€‚å½“ç„¶ UITextView ä¹Ÿæœ‰è¿™äº›ä¸œè¥¿ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</p>
<ul>
<li><p>å½“ UITextField æˆä¸º <em><code>first responder</code></em> æ—¶ï¼ŒiOS çš„ Keyboard å°±ä¼šè‡ªåŠ¨å¼¹å‡ºã€‚æœ‰2ç§æ–¹å¼å¯ä»¥å®ç°ï¼š</p>
<ol>
<li><p>ç”¨æˆ·ç‚¹å‡» UITextFieldï¼Œå®ƒè‡ªåŠ¨å°±ä¼šå˜æˆ first responderã€‚</p>
</li>
<li><p>é€šè¿‡ä»£ç ä¸»åŠ¨è°ƒç”¨ <em><code>becomeFirstResponder</code></em>ã€‚</p>
<p>åè¿‡æ¥ï¼Œæƒ³è¦è®© Keyboard æ”¶å›ï¼Œè°ƒç”¨ <em><code>resignFirstResponder</code></em> å³å¯ã€‚</p>
</li>
</ol>
</li>
<li><p><em><code>UITextFieldDelegate</code></em>ï¼Œä¸¾å‡ ä¸ªä¾‹å­ï¼š</p>
<p>  <code>-(BOOL)textFieldShouldReturn:(UITextField *)textField</code>ï¼šå½“ç”¨æˆ·æŒ‰ä¸‹ Return é”®åï¼Œè¯¥ delegate å°±ä¼šè§¦å‘ã€‚åœ¨è¿™é‡Œï¼Œé™¤äº†è¿”å› BOOLï¼Œé€šå¸¸ä½ è¿˜ä¼šè°ƒç”¨ [textField resignFirstResponder] æ¥æ”¶å› Keyboardã€‚</p>
<p>  <code>-(void)textFieldDidEndEditing:(UITextField *)textField</code>ï¼šå½“ UITextField resign first responder åï¼Œè¯¥ delegate å°±ä¼šè§¦å‘ã€‚åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥åˆ©ç”¨æ–°çš„ UITextField æ¥ update UIã€‚</p>
</li>
<li><p>UITextField è¿˜æœ‰å‡ ä¸ªç›¸å…³çš„ <em><code>Notifications</code></em>ï¼Œç”¨äºå®æ—¶åé¦ˆ UITextField å½“å‰çš„çŠ¶æ€ã€‚ä¾‹å¦‚<br>UITextFieldTextDidChangeNotificationã€‚</p>
</li>
<li><p><em><code>target-action</code></em>ï¼šUITextField ä¹Ÿæ˜¯ä¸ª UIControlï¼Œæ‰€ä»¥ä½ å¯ä»¥å¯¹å…¶è®¾å®š target-actionã€‚UITextField æœ‰è®¸å¤š UIControlEvents ä¾›è®¾å®šï¼Œå…·ä½“å‚è§åœ¨ Xcode ä¸­å³å‡» UITextField æ˜¾ç¤ºçš„èœå•ã€‚</p>
</li>
<li><p><em><code>Keyboard</code></em></p>
<p>  ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬æåˆ° Keyboard æ—¶ï¼Œæ€»æ˜¯æŒ‡é€šè¿‡æŸä¸ª UITextField æˆ–è€… UITextView è€Œå¼¹å‡ºæ¥çš„é‚£ä¸ª Keyboardï¼Œä¸¤è€…æ˜¯ç›¸å…³çš„ï¼Œå¯¹è¯¥ Keyboard çš„è®¾ç½®é€šå¸¸å°±æ˜¯é€šè¿‡ä¸å…¶ç›¸å…³çš„é‚£ä¸ª UITextField æˆ–è€… UITextView æ¥è®¾å®šçš„ã€‚</p>
<p>  å¦‚ä½•æ§åˆ¶ Keyboard çš„å¤–è§‚ï¼šé€šè¿‡ <em><code>UITextInputTraits</code></em> è¿™ä¸ª protocolã€‚UITextField å’Œ UITextView å·²ç»å®ç°äº†ã€‚è¯¥ protocol ä¸­æœ‰è‹¥å¹² property ç”¨äºè‡ªå®šä¹‰ä½ çš„ Keyboardã€‚</p>
<p>  ä½ å¯ä»¥ç»™ Keyboard æ·»åŠ ä¸€ä¸ª accessory view æ¥å®ç°è‡ªå®šä¹‰çš„ toolbarï¼Œé€šè¿‡è®¾ç½® UITextField çš„ property <em><code>inputAccessoryView</code></em> æ¥å®Œæˆã€‚æ­¤å¤–ï¼ŒUITextField è¿˜æœ‰äº›å…¶å®ƒçš„ accessory viewï¼Œä¾‹å¦‚ left viewã€right viewã€clear button ç­‰ç­‰ã€‚</p>
<p>  <strong>æ³¨æ„</strong>ï¼ŒKeyboard å‡ºç°æ—¶ï¼Œæ€»æ˜¯ä¼š cover å…¶å®ƒ viewï¼Œæ‰€ä»¥ï¼Œä½ éœ€è¦è‡ªå·±æ¥å¤„ç† Keyboard å¼¹å‡ºåçš„ UI å¸ƒå±€ã€‚ä¾‹å¦‚ç§»åŠ¨ä½ç½®ç­‰ç­‰ã€‚ä½ å¯ä»¥é€šè¿‡ <em><code>UIKeyboardXXXNotification</code></em> æ¥è·å– Keyboard çš„çŠ¶æ€ï¼Œä»è€Œåšå‡ºå“åº”ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ UITableView ä¸­æœ‰ä¸ª UITextFieldï¼Œé‚£ä¹ˆ UITableViewController å°±éœ€è¦ç›‘å¬ UIKeyboardDidShowNotificationï¼Œè¿™æ ·å½“ç”¨æˆ·ç¼–è¾‘æŸè¡Œçš„ UITextField å¯¼è‡´ Keyboard å¼¹å‡ºæ—¶ï¼Œtable å¯ä»¥è¿›è¡Œ scrollï¼Œä»è€Œä¿è¯è¯¥è¡Œä¸ä¼šè¢« Keyboard è¦†ç›–ã€‚</p>
</li>
</ul>
<h3 id="UIActionSheet">UIActionSheet</h3><p><strong><code>UIActionSheet</code></strong> ç”¨äºå‘ˆç°ä¸€ä¸ªé€‰æ‹©åˆ—è¡¨ã€‚é€šå¸¸æ˜¯ä»å±å¹•ä¸‹æ–¹å¼¹å‡ºï¼Œè®©ç”¨æˆ·åšå‡ºé€‰æ‹©ã€‚</p>
<ul>
<li><p><em><code>init</code></em>ï¼š<code>initWithTitle:delegate:cancelButtonTitle:destructiveButtonTitle:otherButtonTitles:</code>ï¼Œå…¶ä¸­ï¼ŒdestructiveButton ä¼šæ˜¾ç¤ºä¸ºçº¢è‰²ï¼Œç”¨äºè­¦ç¤ºç”¨æˆ·è¯¥æ“ä½œçš„ä¸¥é‡æ€§ã€‚å…¶å®ƒ button ä¸ºæ™®é€šé¢œè‰²ã€‚</p>
</li>
<li><p><em><code>button</code></em>ï¼šinit ä¹‹åï¼Œä½ è¿˜å¯ä»¥é€šè¿‡ <code>addButtonWithTitle:</code> ç»§ç»­ç»™ action sheet æ·»åŠ å…¶å®ƒæ™®é€š buttonã€‚ä¹‹åæƒ³è¦è·å– action sheet ä¸­çš„è¿™äº› button æ—¶ï¼Œå¯ä»¥é€šè¿‡ action sheet çš„è¿™äº› property æ¥å®Œæˆï¼š<em><code>cancelButtonIndex</code></em>ã€<em><code>destructiveButtonIndex</code></em>ã€<em><code>numberOfButtons</code></em>ã€<em><code>buttonTitleAtIndex:</code></em> ç­‰ç­‰ã€‚</p>
</li>
<li><p><em><code>display</code></em>ï¼š</p>
<ul>
<li><p><code>[actionSheet showInView:]</code></p>
</li>
<li><p><code>[actionSheet showFromBarButtonItem:animated:]</code>ï¼Œ<strong>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹</strong>ï¼Œå¯¹äºè¿™ç§ display æ–¹å¼ï¼ˆé€šå¸¸æ˜¯åœ¨ iPad ä¸­ï¼‰ï¼Œaction sheet æ˜¯æ˜¾ç¤ºåœ¨ä¸€ä¸ª popover ä¸­çš„ï¼Œæ˜¯ä¸ä¼šæ˜¾ç¤º cancel button çš„ï¼Œæ˜¾ç„¶è¿™æ˜¯åˆç†çš„ï¼Œå› ä¸ºç‚¹å‡»å±å¹•å…¶å®ƒåœ°æ–¹å popover å°±å¯ä»¥è‡ªå·±æ¶ˆå¤±ã€‚ä½†æ˜¯åˆ«å¿˜äº†ï¼Œpopover æœ‰ä¸ª passthroughViewsï¼Œç‚¹å‡»è¿™é‡Œé¢çš„ view ä¸ä¼šè®© popover æ¶ˆå¤±ï¼Œè€Œ bar button item æ˜¯åœ¨ passthroughViews ä¸­çš„ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä½ ä¸åœåœ°ç‚¹å‡»å®ƒï¼Œå°±ä¼šä¸åœåœ°å åŠ  action sheetã€‚æ‰€ä»¥è¿™é‡Œéœ€è¦ä½ æ‰‹åŠ¨å¤„ç†ä¸‹ï¼Œä¿è¯åªå¼¹å‡ºä¸€ä¸ª action sheetã€‚</p>
</li>
<li><p><code>[actionSheet showFromRect:inView:animated:]</code></p>
</li>
</ul>
</li>
<li><p><em><code>delegate</code></em>ï¼šé€šè¿‡ delegateï¼Œä½ å¯ä»¥çŸ¥é“ç”¨æˆ·ç‚¹å‡»çš„æ˜¯å“ªä¸ª buttonï¼Œå³ <code>actionSheet:didDismissWithButtonIndex:</code>ã€‚</p>
<p>  æ­¤å¤–ï¼Œä½ å¯ä»¥é€šè¿‡ code æ‰‹åŠ¨è§¦å‘ç‚¹å‡»æŸä¸ª button è¿™ç§è¡Œä¸ºï¼Œå³ <code>dismissWithClickedButtonIndex:animated:</code>ã€‚</p>
</li>
</ul>
<h3 id="UIAlertView">UIAlertView</h3><p><strong><code>UIAlertView</code></strong> ä¸ UIActionSheet å¾ˆç›¸ä¼¼ï¼Œå…·æœ‰ç›¸ä¼¼çš„ init æ–¹å¼ã€æ·»åŠ æ–° button çš„å‡½æ•°ç­‰ã€‚è¿™é‡Œåªäº†è§£å‡ ç‚¹ä¸åŒçš„åœ°æ–¹ã€‚</p>
<ul>
<li><p><em><code>display</code></em>ï¼šåªæœ‰ä¸€ç§æ–¹å¼ï¼Œå³ <code>[alert show]</code>ï¼Œalert å°±ä¼šæ˜¾ç¤ºåœ¨å±å¹•ä¸­é—´ã€‚</p>
</li>
<li><p><em><code>add UITextField</code></em>ï¼šä½ å¯ä»¥åœ¨ UIAlertView ä¸­æ·»åŠ  UITextFieldï¼Œè®©ç”¨æˆ·åœ¨å…¶ä¸­è¾“å…¥ï¼Œä¾‹å¦‚ç™»å½•æ¡†ã€‚æ–¹æ³•æ˜¯è®¾ç½® UIAlertView çš„ property <em><code>alertViewStyle</code></em>ã€‚</p>
</li>
</ul>
<h3 id="UIImagePickerController">UIImagePickerController</h3><p><strong><code>UIImagePickerController</code></strong> ç”¨äºå‘ˆç°ä¸€ä¸ª Modal viewï¼Œè®©ç”¨æˆ·é€‰æ‹©ä¸€å¼ ç…§ç‰‡ï¼ˆphoto library ä¸­å·²æœ‰çš„ç…§ç‰‡ï¼Œæˆ–è€…ç”¨ camera æ–°æ‹ä¸€å¼ ç…§ç‰‡ï¼‰ï¼Œç„¶åå°†è¯¥ç…§ç‰‡è¿”å›ä¾› app ä½¿ç”¨ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼Œæ—¢ç„¶æ˜¯ä¸ª Modal viewï¼Œé‚£å°±æ„å‘³ç€éœ€è¦è¿™ä¹ˆå‘ˆç°ï¼šé€šè¿‡ <code>Modal Segue</code>ï¼Œæˆ–è€…è°ƒç”¨ <code>presentViewContainer:animated:completion:</code>ã€‚å‚è§ <a href="../../../../2015/01/10/Study_iOS_Segue/">Segue</a>ã€‚</p>
<p>UIImagePickerController çš„ä½¿ç”¨æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><p><em><code>init &amp; delegate</code></em>ï¼šdelegate ä¸€èˆ¬è®¾ç½®ä¸º UIImagePickerController çš„ presenterã€‚</p>
</li>
<li><p><em><code>configuration</code></em></p>
<p> ä¸»è¦æ˜¯è®¾ç½® UIImagePickerController çš„ source typeã€media type ç­‰ç­‰ã€‚è®¾ç½®ä¹‹å‰ï¼Œé€šå¸¸éœ€è¦å…ˆè¿›è¡Œæ£€æŸ¥ï¼Œçœ‹çœ‹è¯¥ device æ˜¯å¦æ”¯æŒè¦è®¾ç½®çš„å€¼ã€‚</p>
<ul>
<li><p><em><code>source type</code></em>ï¼šæœ‰çš„ device æœ‰ cameraï¼Œæœ‰çš„åˆ™æ²¡æœ‰ cameraï¼Œåªæœ‰ photo libraryã€‚å› æ­¤ä½ éœ€è¦æ£€æŸ¥è¯¥ device æ˜¯å¦æ”¯æŒ UIImagePickerController çš„æŸç§ source typeã€‚é€šè¿‡è°ƒç”¨ <code>isSourceTypeAvailable:</code> å³å¯ã€‚</p>
<p>  æœ‰3ç§ source typeï¼šUIImagePickerControllerSourceTypePhotoLibraryã€UIImagePickerControllerSourceTypeCameraã€UIImagePickerControllerSourceTypeSavedPhotosAlbumã€‚</p>
</li>
<li><p><em><code>media type</code></em>ï¼šæ¯ç§ source type æ”¯æŒçš„ media type ä¹Ÿä¸åŒï¼Œæœ‰çš„æ”¯æŒ videoï¼Œæœ‰çš„åªæ”¯æŒ pictureã€‚å› æ­¤ media type ä¹Ÿéœ€è¦è¿›è¡Œæ£€æŸ¥ã€‚é€šè¿‡è°ƒç”¨ <code>+(NSArray *)availableMediaTypesForSourceType:</code>å³å¯ã€‚</p>
<p>  æœ‰2ç§ media typeï¼škUTTypeImage å’Œ çœ‹UTTypeMovieã€‚</p>
<p>  è¿˜æœ‰å…¶å®ƒä¸€äº›æ£€æŸ¥å‡½æ•°ï¼Œä¾‹å¦‚æ£€æŸ¥ front/rear camera ç­‰ç­‰ï¼Œå‚è§æ–‡æ¡£ã€‚</p>
</li>
<li><p><em><code>editability</code></em>ï¼šæ˜¯å¦å…è®¸ç”¨æˆ·å¯¹é€‰å–çš„å›¾ç‰‡è¿›è¡Œç¼–è¾‘ã€‚å¦‚æœå…è®¸ï¼ŒUIImagePickerController ä¼šæŠŠåŸå§‹å›¾ç‰‡å’Œç¼–è¾‘åçš„å›¾ç‰‡éƒ½è¿”ç»™ appã€‚</p>
</li>
<li><p>å…¶ä»– configurationï¼Œå‚è§æ–‡æ¡£ã€‚</p>
</li>
</ul>
</li>
<li><p><em><code>present</code></em>ï¼šå‰é¢å·²ç»æåˆ°äº†ï¼Œè¦é‡‡ç”¨ Modal view çš„å‘ˆç°æ–¹å¼ã€‚</p>
</li>
<li><p><em><code>respond to delegate</code></em></p>
<p> å½“ç”¨æˆ·å®Œæˆé€‰å–ç…§ç‰‡åï¼š<code>imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info</code>ï¼Œå…¶ä¸­ï¼Œinfo ä¸­æä¾›äº†è¦è¿”ç»™ app çš„å›¾ç‰‡æ•°æ®ï¼Œå‚è§æ–‡æ¡£ã€‚é€šè¿‡ <em><code>ALAssetsLibrary</code></em>ï¼Œä½ å¯ä»¥å°†è¯¥å›¾ç‰‡ä¿å­˜åˆ°ç”¨æˆ·çš„ photo libraryã€‚</p>
<p> å½“ç”¨æˆ·å–æ¶ˆé€‰å–ç…§ç‰‡åï¼š<code>imagePickerControllerDidCancel:(UIImagePickerController *)picker</code>ã€‚</p>
<p> åœ¨ç”¨æˆ·å®Œæˆ/å–æ¶ˆé€‰å–ç…§ç‰‡åï¼Œä½ éƒ½éœ€è¦å…³é—­å½“å‰çš„è¿™ä¸ª Modal viewï¼Œå³è°ƒç”¨ <code>[self dismissViewControllerAnimated:completion:]</code>ã€‚</p>
</li>
</ol>
<h3 id="Settings">Settings</h3><p><strong><code>Settings</code></strong> æŒ‡çš„æ˜¯ iOS ä¸­çš„ Settings appï¼Œä½ å¯ä»¥åœ¨é‡Œé¢æ·»åŠ è‡ªå·± app çš„è®¾ç½®é€‰é¡¹ã€‚è¿™ä¸ªæœºåˆ¶åˆ©ç”¨çš„æ˜¯ <em><code>NSUserDefaults</code></em>ã€‚</p>
<p>ç›´æ¥ä¸Šå›¾</p>
<p><img src="/img/Study_iOS_Misc_UI/18.10.Settings.png" alt="Settings"></p>
<p><img src="/img/Study_iOS_Misc_UI/18.11.Settings.png" alt="Settings"></p>
<p><img src="/img/Study_iOS_Misc_UI/18.12.Settings.png" alt="Settings"></p>
<p><img src="/img/Study_iOS_Misc_UI/18.13.Settings.png" alt="Settings"></p>
<p><strong>æ³¨æ„</strong>ï¼šcode é€šå¸¸éœ€è¦ç›‘å¬ NSUserDefaults çš„å˜åŒ–ï¼Œæ¥åŠæ—¶è·å– Settings ä¸­æ–°çš„å€¼ã€‚</p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šMisc_UI">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šMisc UI</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼šall</em></p>]]>
    
    </summary>
    
      <category term="iOS" scheme="http://hi.zongquan.wang/tags/iOS/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Study iOS - CoreData]]></title>
    <link href="http://hi.zongquan.wang/2015/01/11/Study_iOS_CoreData/"/>
    <id>http://hi.zongquan.wang/2015/01/11/Study_iOS_CoreData/</id>
    <published>2015-01-11T08:51:58.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šCoreData">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šCoreData</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š12ï¼Œ13</em></p>
<a id="more"></a>
<hr>
<p><strong><code>CoreData</code></strong> æ˜¯ iOS æä¾›çš„ä¸€å¥—ç”¨äºç®¡ç† app çš„ Model çš„ frameworkï¼Œå®ƒå°±åƒæ˜¯ä¸ª object databaseï¼Œæ”¯æŒå¯¹ object çš„å„ç§æ“ä½œï¼šaddã€deleteã€queryã€undoã€redoã€autosave ç­‰ï¼Œç°å¸¸ NBã€‚ä½†å®ƒå¹¶ä¸æ˜¯ database çš„æŸç§å®ç°ï¼Œä½ å¯ä»¥åŸºäºæŒä¹…åŒ–æ–‡ä»¶ï¼ˆå¦‚ sqlite ç­‰ï¼‰æ¥ä½¿ç”¨ CoreDataï¼Œä¹Ÿå¯ä»¥å®Œå…¨åŸºäºå†…å­˜æ¥ä½¿ç”¨ã€‚</p>
<p>ä½¿ç”¨ CoreData ä¼šæ¶‰åŠ Xcode å’Œ code ä¸¤æ–¹é¢ã€‚</p>
<p>é¦–å…ˆçœ‹ä¸€ä¸‹åœ¨ Xcode ä¸­éœ€è¦åšä»€ä¹ˆã€‚</p>
<h3 id="åˆ›å»º_Data_Model">åˆ›å»º Data Model</h3><ul>
<li><p>ç±»ä¼¼äº .storyboard æ–‡ä»¶ï¼Œè¿™é‡Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ª <em><code>.xcdatamodeld</code></em> æ–‡ä»¶ï¼Œå®ƒå­˜å‚¨äº† app çš„ Data Modelã€‚.xcdatamodeld æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<p>  <img src="/img/Study_iOS_CoreData/12.0.CoreData.png" alt="CoreData"></p>
<p>  å°±åƒè®¾è®¡æ•°æ®åº“çš„ ER å›¾ï¼Œåœ¨è¿™é‡Œï¼Œä½ éœ€è¦è®¾è®¡å¥½ object å¯¹åº”çš„ <em><code>Entity</code></em>ã€‚è¿™é‡Œçš„ Entity ä¼šå¯¹åº”åˆ° code ä¸­çš„ <em><code>NSManagedObjectï¼ˆæˆ–å…¶ subclassï¼‰</code></em>ã€‚</p>
<p>  <img src="/img/Study_iOS_CoreData/12.1.CoreData.png" alt="CoreData"></p>
<p>  <img src="/img/Study_iOS_CoreData/12.2.CoreData.png" alt="CoreData"></p>
</li>
<li><p>Model æ„å»ºå¥½äº†ä¹‹åï¼Œä¸‹é¢å°±éœ€è¦åˆ›å»ºå‡ºä¸è¿™äº› Entity å¯¹åº”çš„ NSManagedObjectï¼Œä¾› code ä¸­ä½¿ç”¨ã€‚</p>
<p>  <img src="/img/Study_iOS_CoreData/12.12.CoreData.Add.png" alt="CoreData"></p>
<p>  <img src="/img/Study_iOS_CoreData/12.13.CoreData.Add.png" alt="CoreData"></p>
<p>  è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº› NSManagedObject subclass äº†ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥æ–¹ä¾¿åœ°è®¿é—®å®ƒä»¬çš„ propertiesï¼Œè€Œä¸ç”¨å»è°ƒç”¨ç¹ççš„ valueForKey å’Œ setValue:forKeyã€‚</p>
<p>  <strong>æ³¨æ„</strong>ï¼Œä»¥åå½“æˆ‘ä»¬ä¿®æ”¹äº† Model çš„ Entity åï¼Œéœ€è¦é‡æ–°æ‰§è¡Œä¸€éè¿™ä¸€æ­¥ï¼Œæ¥æ›´æ–°è¿™äº› NSManagedObject subclassã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œè¿™äº› .h å’Œ .m ä¼šè¢«é‡æ–°ç”Ÿæˆã€‚æ‰€ä»¥è¿™é‡Œå¸¸å¸¸ä½¿ç”¨çš„ä¸€ä¸ªæŠ€å·§æ˜¯ï¼Œä¸ºè¿™äº› NSManagedObject subclass æ·»åŠ  <em><code>category</code></em>ï¼Œåœ¨ category ä¸­åˆ›å»ºä¸€äº›é¢å¤–çš„å‡½æ•°ä¾› NSManagedObject subclass ä½¿ç”¨ï¼Œè¿™æ ·ä»¥åæ›´æ–° NSManagedObject subclass æ—¶ï¼Œåªæœ‰æœ€åŸæœ¬çš„ .h å’Œ .m æ–‡ä»¶è¢«é‡æ–°ç”Ÿæˆï¼Œè€Œä¸ä¼šå½±å“åˆ°æˆ‘ä»¬çš„ categoryã€‚</p>
</li>
</ul>
<p>Xcode è¿™è¾¹åŸºæœ¬å°±å®Œæˆäº†ï¼Œä¸‹é¢å¼€å§‹è¿›å…¥ codeã€‚</p>
<h3 id="NSManagedObjectContext">NSManagedObjectContext</h3><p>CoreData çš„åŸºæœ¬è¦ç´ å°±æ˜¯ NSManagedObjectã€‚é‚£ä¹ˆå¦‚ä½•è·å–æˆ‘ä»¬çš„ NSManagedObject å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ä» <em><code>NSManagedObjectContext</code></em> ä¸­è·å–ã€‚</p>
<p>æœ‰2ç§æ–¹å¼æ¥è·å–è¿™ä¸ª NSManagedObjectContextï¼š</p>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ª <em><code>UIManagedDocument</code></em>ï¼Œå®ƒé‡Œé¢æœ‰ä¸ª propertyï¼šmanagedObjectContextã€‚Bingoï¼</p>
</li>
<li><p>å½“åˆ›å»º project æ—¶ï¼Œä¸‹é¢æœ‰ä¸ªé€‰é¡¹ï¼š<em><code>&quot;Use Core Data&quot;</code></em>ï¼Œå¦‚æœé€‰ä¸­è¿™ä¸ªé€‰é¡¹ï¼Œé‚£ä¹ˆ Xcode ä¼šåœ¨ <em><code>AppDelegate</code></em> ä¸­ç»™ä½ æä¾›ä¸€ä¸ª propertyï¼šmanagedObjectContextã€‚ä»¥å code ä¸­è®¿é—®å®ƒå°±è¡Œäº†ã€‚</p>
</li>
</ol>
<p>æœ¬ç¯‡ä¸»è¦æ¶‰åŠç¬¬1ç§æ–¹å¼ï¼Œä¸‹é¢å°±ç†è§£ä¸€ä¸‹ UIManagedDocumentã€‚</p>
<h3 id="UIManagedDocument">UIManagedDocument</h3><p>UIManagedDocument æ˜¯ <em><code>UIDocument</code></em> çš„ subclassï¼Œæä¾›äº†ç®¡ç†å­˜å‚¨å†…å®¹çš„æœºåˆ¶ã€‚å®ƒä¹Ÿæ”¯æŒ iCloudï¼Œå¯ä»¥æŠŠå®ƒç†è§£æˆ CoreData Model çš„ä¸€ä¸ªå®¹å™¨ã€‚</p>
<ul>
<li><p><strong>åˆ›å»º UIManagedDocument</strong>ï¼š</p>
<pre><code><span class="built_in">NSURL</span> *documentsDir = [[[<span class="built_in">NSFileManager</span> defaultManager] URLsForDirectory:<span class="built_in">NSDocumentDirectory</span>
                                                              inDomains:<span class="built_in">NSUserDomainMask</span>] firstObject];
<span class="built_in">NSString</span> *managedDocumentName = <span class="string">@"XXX"</span>;
<span class="built_in">NSURL</span> *managedDocumentURL = [documentsDir URLByAppendingPathComponent:managedDocumentName];
<span class="built_in">UIManagedDocument</span> *managedDocument = [[<span class="built_in">UIManagedDocument</span> alloc] initWithFileURL:managedDocumentURL];
</code></pre><p>  ä¸Šé¢åªæ˜¯åœ¨å†…å­˜ä¸­åˆ›å»ºäº†ä¸€ä¸ª UIManagedDocument instanceï¼Œæƒ³è¦ä»ä¸­è·å– NSManagedObjectContextï¼Œä½ è¿˜éœ€è¦ä¸‹é¢æ“ä½œã€‚</p>
</li>
<li><p><strong>é€šè¿‡ open / create UIManagedDocument æ¥è·å– NSManagedObjectContext</strong></p>
<pre><code><span class="keyword">if</span> ([[<span class="built_in">NSFileManager</span> defaultManager] fileExistsAtPath:[managedDocumentURL path]]) {
    [managedDocument openWithCompletionHandler:^(<span class="built_in">BOOL</span> success) {
        <span class="keyword">if</span> (success) {
            [<span class="keyword">self</span> documentIsReady];
        }
    }];
} <span class="keyword">else</span> {
    [managedDocument saveToURL:managedDocumentURL
              forSaveOperation:<span class="built_in">UIDocumentSaveForCreating</span>
             completionHandler:^(<span class="built_in">BOOL</span> success) {
                 <span class="keyword">if</span> (success) {
                    [<span class="keyword">self</span> documentIsReady];
                }
             }];
}

-(<span class="keyword">void</span>)documentIsReady
{
    <span class="keyword">if</span> (managedDocument<span class="variable">.documentState</span> == <span class="built_in">UIDocumentStateNormal</span>) {
        <span class="built_in">NSManagedObjectContext</span> *context = managedDocument<span class="variable">.managedObjectContext</span>;
        <span class="comment">// use the context to do Core Data stuff</span>
    }
}
</code></pre><p>  ä¸Šé¢ç¤ºä¾‹ä¸­æ³¨æ„2ç‚¹ï¼š</p>
<p>  ä¸ºä»€ä¹ˆéœ€è¦ <em><code>completionHandler</code></em>ï¼Ÿå› ä¸º open/save æ“ä½œæ˜¯ <em><code>asynchronous</code></em>ï¼ˆæƒ³æƒ³çœ‹ï¼ŒiCloud å¿…é¡»è¦ asynchronousï¼‰ã€‚</p>
<p>  å…³äº check <em><code>documentState</code></em>ï¼Œè¿˜æœ‰å…¶å®ƒä¸€äº›å–å€¼ï¼Œå‚è§æ–‡æ¡£ã€‚</p>
</li>
<li><p><strong>ä¿å­˜å’Œå…³é—­</strong></p>
<p>  <img src="/img/Study_iOS_CoreData/12.7.UIManagedDocument.png" alt="CoreData"></p>
<p>  è™½ç„¶ NSManagedObjectContext æ˜¯ autosave çš„ï¼Œä½†ä½ æ˜¯å¯ä»¥è§‚å¯Ÿåˆ°è¿™ä¸€åŠ¨ä½œçš„ï¼š</p>
<p>  <img src="/img/Study_iOS_CoreData/12.8.UIManagedDocument.png" alt="CoreData"></p>
</li>
</ul>
<p>å¥½äº†ï¼ŒUIManagedDocument æœ‰äº†ï¼ŒNSManagedObjectContext ä¹Ÿæœ‰äº†ï¼Œç°åœ¨è½®åˆ° NSManagedObject äº†ã€‚</p>
<h3 id="NSManagedObject_çš„_Add">NSManagedObject çš„ Add</h3><p><img src="/img/Study_iOS_CoreData/12.14.CoreData.Add.png" alt="CoreData"></p>
<h3 id="NSManagedObject_çš„_Delete">NSManagedObject çš„ Delete</h3><p><img src="/img/Study_iOS_CoreData/12.17.CoreData.Delete.png" alt="CoreData"></p>
<p><strong>æ³¨æ„</strong>ï¼Œä¸ç®¡æ˜¯ Add è¿˜æ˜¯ Deleteï¼Œè¿™äº› change éƒ½æ˜¯å‘ç”Ÿåœ¨å†…å­˜ä¸­çš„ï¼Œç›´åˆ°ä½ æ‰‹åŠ¨ save æˆ–ç”± UIManagedDocument è‡ªå·±æ¥ autosaveã€‚</p>
<h3 id="NSManagedObject_çš„_Query">NSManagedObject çš„ Query</h3><p>query æ“ä½œæ˜¯ç”± <em><code>NSFetchRequest</code></em> æ¥å®Œæˆçš„ã€‚åˆ›å»º NSFetchRequest éœ€è¦ä¸€ä¸‹4ç‚¹ï¼š</p>
<ul>
<li>æŒ‡å®šè¦ fetch çš„ Entityã€‚</li>
<li>æŒ‡å®š fetch ç»“æœé›†çš„å¤§å°ï¼Œé»˜è®¤æ˜¯æ‰€æœ‰ã€‚</li>
<li>æŒ‡å®š NSSortDescriptor å¯¹ç»“æœé›†è¿›è¡Œæ’åºã€‚</li>
<li>æŒ‡å®š NSPredicate å¯¹ç»“æœé›†è¿›è¡Œè¿‡æ»¤ï¼Œé»˜è®¤æ˜¯æ‰€æœ‰ã€‚</li>
</ul>
<p>(å…³äº <em><code>NSSortDescriptor</code></em> å’Œ <em><code>NSPredicate</code></em>ï¼Œå‚è§æ–‡æ¡£ã€‚)</p>
<p>åˆ›å»ºå¥½ NSFetchRequest åï¼Œå°±å¯ä»¥è°ƒç”¨ <code>NSArray *results = [context executeFetchRequest:request error:&amp;error]</code> æ¥è·å–ç»“æœäº†ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼Œå‡ºäºå†…å­˜ä¼˜åŒ–ï¼ŒCoreData åœ¨ execute NSFetchRequest æ—¶é‡‡ç”¨äº† <em><code>lazy load</code></em> çš„æœºåˆ¶ï¼Œå®ƒä¸ä¼šä¸€æ¬¡æ€§åœ°æŠŠ results ä¸­çš„æ‰€æœ‰ NSManagedObject éƒ½åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè€Œæ˜¯ç­‰åˆ°ä½ çœŸæ­£åœ°è®¿é—®å…¶ä¸­çš„æŸä¸ª NSManagedObject æ—¶ï¼Œæ‰ä¼šè¿›è¡ŒåŠ è½½ã€‚</p>
<h3 id="CoreData_çš„_Thread_Safety">CoreData çš„ Thread Safety</h3><p><strong>NSManagedObjectContext ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong>ï¼Œä¸è¿‡ CoreData ä¸€èˆ¬éå¸¸é«˜æ•ˆï¼Œæ‰€ä»¥æ²¡å¿…è¦å»å¤šçº¿ç¨‹æ“ä½œï¼ˆä¾‹å¦‚æŸ¥è¯¢ï¼‰ã€‚</p>
<p><strong>è¿™é‡Œéœ€è¦æ³¨æ„</strong>ï¼ŒNSManagedObjectContext åœ¨å“ªä¸ª queue ä¸Šåˆ›å»ºï¼Œä½ å°±åªèƒ½åœ¨é‚£ä¸ª queue ä¸Šè®¿é—® NSManagedObjectContext ä»¥åŠå®ƒçš„ NSManagedObjectã€‚å¾ˆå¯èƒ½å°±æ˜¯åœ¨ main Q ä¸Šã€‚</p>
<p>é‰´äºä¸Šé¢è¿™ä¸ªé—®é¢˜ï¼ŒNSManagedObjectContext æä¾›äº†ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ APIï¼š</p>
<pre><code>[context <span class="symbol">performBlock:</span>^{
    <span class="regexp">//</span> <span class="keyword">do</span> stuff <span class="keyword">with</span> <span class="constant">NSManagedObjectContext</span> &amp; <span class="constant">NSManagedObject</span>
}]
</code></pre><p><strong>context ä¼šåœ¨è‡ªå·±çš„ safe queueï¼ˆå³è¢«åˆ›å»ºçš„ queueï¼‰ä¸Šæ¥æ‰§è¡Œ blockã€‚</strong> :)</p>
<p>CoreData æœ¬èº«å°±å…ˆæè¿™äº›ï¼Œä¸‹é¢è¿˜æœ‰ä¸ªæ¯”è¾ƒé‡è¦çš„è¯é¢˜ã€‚</p>
<h3 id="CoreData_&amp;_UITableView">CoreData &amp; UITableView</h3><p>CoreData ä¸­çš„æ•°æ®é€šå¸¸ä¼šæ˜¾ç¤ºåˆ° UITableView ä¸Šï¼Œå› æ­¤ iOS ä¸ºæˆ‘ä»¬æä¾›äº† <em><code>NSFetchedResultsController</code></em>ï¼Œç”¨äºæŠŠ NSFetchRequest hook åˆ° UITableView ä¸Šï¼Œå®ç° CoreData åˆ° UITableView ä¸Šçš„è‡ªåŠ¨æ˜ å°„ã€‚</p>
<ul>
<li><p><strong>NSFetchedResultsController æä¾› UITableViewDataSource</strong></p>
<pre><code>-(<span class="built_in">NSUInteger</span>)numberOfSectionsInTableView:(<span class="built_in">UITableView</span> *)sender
{
    <span class="keyword">return</span> [[<span class="keyword">self</span><span class="variable">.fetchedResultsController</span> sections] count];
}

-(<span class="built_in">NSUInteger</span>)tableView:(<span class="built_in">UITableView</span> *)sender numberOfRowsInSection:(<span class="built_in">NSUInteger</span>)section
{
    <span class="keyword">return</span> [[[<span class="keyword">self</span><span class="variable">.fetchedResultsController</span> sections] objectAtIndex:section] numberOfObjects];
}

-(<span class="built_in">UITableViewCell</span> *)tableView:(<span class="built_in">UITableView</span> *)sender
        cellForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath
{
    <span class="built_in">UITableViewCell</span> *cell = XXX;
    <span class="built_in">NSManagedObject</span> *managedObject = [<span class="keyword">self</span><span class="variable">.fetchedResultsController</span> objectAtIndexPath:indexPath];
    <span class="comment">// setup</span>
    <span class="keyword">return</span> cell;
}
</code></pre><p>  ä¸Šé¢éœ€è¦æ³¨æ„çš„å°±æ˜¯ NSFetchedResultsController çš„ä¸€ä¸ª APIï¼š</p>
<p>  <code>-(NSManagedObject *)objectAtIndexPath:(NSIndexPath *)indexPath</code></p>
<p>  ä¹Ÿå°±æ˜¯è¯´ï¼ŒNSFetchedResultsController ä»¥æŸç§æ–¹å¼å°†ç»“æœé›†çš„ç»“æ„å°è£…çš„è·Ÿ UITableView çš„ DataSource ä¸€æ ·ï¼Œä¹Ÿæœ‰ä¸ª NSIndexPathã€‚</p>
<p>  é‚£ä¹ˆ NSFetchedResultsController è¯¥å¦‚ä½•åˆ›å»ºå‘¢ï¼Ÿ</p>
</li>
<li><p><strong>åˆ›å»º NSFetchedResultsController</strong></p>
<p>  <img src="/img/Study_iOS_CoreData/13.2.NSFetchedResultsController.png" alt="CoreData"></p>
<p>  <strong>éœ€è¦æ³¨æ„çš„æ˜¯</strong>ï¼šNSFetchRequest ä¸­çš„ sortDescriptor ä¸€å®šè¦ä¸ NSFetchedResultsController init å‡½æ•°ä¸­çš„ sectionNameKeyPath åŒ¹é…ï¼Œè¿™æ · NSFetchedResultsController æ‰èƒ½æ­£ç¡®åœ°æ„é€ å‡ºå‰é¢æåˆ°çš„ NSIndexPathã€‚<strong>æ­¤å¤–</strong>ï¼Œè°ƒç”¨ init å‡½æ•°åï¼Œä½ å°±ä¸èƒ½å†å»ä¿®æ”¹ NSFetchedResultsController çš„ fetchRequest çš„å±æ€§äº†ï¼ˆä¾‹å¦‚ä¿®æ”¹ sortDescriptor å’Œ predicateï¼‰ã€‚</p>
</li>
<li><p><strong>é€šè¿‡ NSFetchedResultsController æ‰§è¡Œ query</strong></p>
<p>  è°ƒç”¨ NSFetchedResultsController çš„å‡½æ•° <code>-(BOOL)performFetch:(NSError **)error</code>ï¼Œå³å¯å®ç°æ‰‹åŠ¨ fetchï¼Œè¿™ä¹‹åï¼Œé€šå¸¸ä¼´éšç€ UITableView çš„ reloadã€‚</p>
<p>  é™¤äº†æ‰‹åŠ¨ fetchï¼ŒNSFetchedResultsController æ›´é‡è¦çš„åŠŸèƒ½æ˜¯è‡ªåŠ¨æ•è· CoreData çš„å˜åŒ–ï¼Œå¹¶ä»¥æ­¤æ›´æ–° UITableViewã€‚æƒ³è¦å®ç°è¿™ä¸€ç‚¹ï¼Œéœ€è¦ä¸‹é¢çš„ä¸œè¥¿ã€‚</p>
</li>
<li><p><strong>NSFetchedResultsControllerDelegate</strong></p>
<p>  å½“ç»™ NSFetchedResultsController æŒ‡å®š delegate åï¼Œå®ƒå°±ä¼š keep tracking è‡ªå·±çš„ NSFetchRequestï¼Œå¹¶å°†æ›´æ–°æŠ¥å‘Šç»™å®ƒçš„ delegateã€‚æ˜¾ç„¶ï¼Œåœ¨è¿™é‡Œï¼Œå®ƒçš„ delegate åº”è¯¥æŒ‡å®šä¸º UITableViewControllerã€‚å¦‚æœä¸æŒ‡å®š delegateï¼Œå®ƒå°±ä¸ä¼šå®ç°è¿™ç§æœºåˆ¶ã€‚</p>
<p>  ä¸»è¦æœ‰è¿™äº› delegate å‡½æ•°ï¼š</p>
<ul>
<li><p><code>controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:</code>ï¼štrack å•ä¸ª object çš„æ›´æ–°ï¼ˆaddã€removeã€moveã€updateï¼‰</p>
</li>
<li><p><code>controller:didChangeSection:atIndex:forChangeType:</code>ï¼štrack æŸä¸ª section çš„ add æˆ– remove</p>
</li>
<li><p><code>-controllerDidChangeContent:</code>ï¼štrack æ•´ä¸ª NSFetchRequest</p>
</li>
</ul>
</li>
</ul>
<p>å‚è§æ–‡æ¡£ sample codeã€‚</p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šCoreData">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šCoreData</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š12ï¼Œ13</em></p>]]>
    
    </summary>
    
      <category term="iOS" scheme="http://hi.zongquan.wang/tags/iOS/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Study iOS - UITableView]]></title>
    <link href="http://hi.zongquan.wang/2015/01/11/Study_iOS_UITableView/"/>
    <id>http://hi.zongquan.wang/2015/01/11/Study_iOS_UITableView/</id>
    <published>2015-01-11T06:42:21.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šUITableView">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šUITableView</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š11</em></p>
<a id="more"></a>
<hr>
<h4 id="UITableView_åˆ†ç±»">UITableView åˆ†ç±»</h4><p>æŒ‰å†…å®¹åˆ†ï¼š</p>
<ul>
<li><p><em><code>dynamic</code></em>ï¼šåœ¨ storyboard ä¸­è®¾å®š prototypeï¼Œåœ¨ä»£ç ä¸­ load å†…å®¹ã€‚<em>ï¼ˆæœ¬ç¯‡ä¸»è¦æ¶‰åŠ dynamic NSTableViewï¼‰</em></p>
</li>
<li><p><em><code>static</code></em>ï¼šå®Œå…¨åœ¨ storyboard ä¸­è®¾å®šã€‚</p>
</li>
</ul>
<p>æŒ‰æ ·å¼åˆ†ï¼š</p>
<p><em><code>ungrouped</code></em> / <em><code>grouped</code></em></p>
<p>ç¤ºä¾‹ï¼š</p>
<p><img src="/img/Study_iOS_UITableView/11.0.UITableView.png" alt="UITableView"></p>
<h4 id="UITableView_çš„æ„æˆ">UITableView çš„æ„æˆ</h4><p>ä¸ Mac ä¸Šçš„NSTableView ä¸åŒï¼ŒiOS ä¸­çš„ UITableView éƒ½æ˜¯ä¸€ç»´çš„ï¼Œåªæœ‰ä¸€åˆ—ã€‚</p>
<p><img src="/img/Study_iOS_UITableView/11.1.UITableView.png" alt="UITableView"> <img src="/img/Study_iOS_UITableView/11.2.UITableView.png" alt="UITableView"></p>
<h4 id="UITableView_çš„ä½¿ç”¨">UITableView çš„ä½¿ç”¨</h4><ol>
<li><p><strong>è®¾å®š cell çš„ <code>prototype</code></strong></p>
<p> <img src="/img/Study_iOS_UITableView/11.3.UITableView.png" alt="UITableView"></p>
<p> <img src="/img/Study_iOS_UITableView/11.4.UITableView.png" alt="UITableView"></p>
</li>
<li><p><strong>å®ç° <code>UITableViewDataSource</code></strong></p>
<p> <strong>UITableViewDataSource</strong> ç”¨äºæ§åˆ¶ what UITableView displaysã€‚ä¸»è¦æœ‰è¿™äº› APIï¼š</p>
<ul>
<li><p>åŸºäº prototypeï¼Œæ¯ä¸ª cell è¯¥å¦‚ä½•æ˜¾ç¤ºåœ¨ table ä¸­ï¼š</p>
<p>  <img src="/img/Study_iOS_UITableView/11.5.UITableView.png" alt="UITableView"></p>
</li>
<li><p>table æœ‰å¤šå°‘ sectionï¼Œå¤šå°‘ rowï¼š</p>
<p>  <img src="/img/Study_iOS_UITableView/11.6.UITableView.png" alt="UITableView"></p>
</li>
</ul>
</li>
<li><p><strong>å®ç° <code>UITableViewDelegate</code></strong></p>
<p><strong>UITableDelegate</strong> ç”¨äºæ§åˆ¶ how UITableView displaysï¼Œä»¥åŠ observe what UITableView is doingï¼ˆæ’åºã€é€‰æ‹©ã€æ»šåŠ¨ã€æ’å…¥ã€åˆ é™¤ã€æ›´æ–°ç­‰ç­‰ï¼‰ï¼Œå‚è§æ–‡æ¡£ã€‚è¿™é‡Œç®€å•æå‡ ä¸ªï¼š</p>
<ul>
<li><p>ç”¨æˆ·é€‰ä¸­æŸè¡Œæ—¶ï¼Œä¼šè°ƒç”¨ <em><code>-(void)tableView:didSelectRowAtIndexPath:</code></em></p>
</li>
<li><p>ç”¨æˆ·ç‚¹å‡»æŸè¡Œä¸­çš„ <em><code>accessory button</code></em>ï¼Œä¼šè°ƒç”¨ <em><code>-(void)tableView:accessoryButtonTappedForRowWithIndexPath:</code></em></p>
<p>  <img src="/img/Study_iOS_UITableView/11.9.UITableView.png" alt="UITableView"></p>
</li>
<li><p>å½“ç„¶ï¼Œä½ å¯ä»¥ä¸ä½¿ç”¨è¿™äº› delegateï¼Œè€Œæ˜¯å€ŸåŠ© Segueï¼š</p>
<p>  <img src="/img/Study_iOS_UITableView/11.10.UITableView.png" alt="UITableView"></p>
<p>  ç„¶å prepareForSegueï¼š</p>
<pre><code>-(<span class="keyword">void</span>)prepareForSegue:(<span class="built_in">UIStoryboardSegue</span> *)segue sender:(<span class="keyword">id</span>)sender
{
    <span class="built_in">NSIndexPath</span> *indexPath = [<span class="keyword">self</span><span class="variable">.tableView</span> indexPathForCell:sender];
    <span class="comment">// indexPath.row in indexPath.section</span>
    <span class="comment">// prepare segue.destinationController</span>
}
</code></pre></li>
</ul>
</li>
<li><p><strong>reload</strong></p>
<p> å½“ table çš„ Model å‘ç”Ÿå˜åŒ–åï¼Œä½ éœ€è¦å» reload æ¥æ›´æ–° tableã€‚</p>
<p> <code>-(void)reloadData</code>ï¼šæ›´æ–°æ•´ä¸ª tableï¼Œé‡æ–°è°ƒç”¨ä¸€é UITableViewDataSourceï¼Œæ¯”è¾ƒ heavyweightã€‚</p>
<p> <code>-(void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animationStyle</code>ï¼šåªæ›´æ–°æŒ‡å®šçš„è¡Œï¼Œæ¯”è¾ƒ lightweightã€‚</p>
</li>
<li><p><strong>Spinner</strong></p>
<p> UITableView æœ‰ä¸ªå†…ç½®çš„ activity indicator Spinnerï¼š<code>@property (strong) UIRefreshControl *refreshControl;</code></p>
<p> <img src="/img/Study_iOS_UITableView/11.12.UITableView.png" alt="UITableView"></p>
<p> <code>[self.refreshControl beginRefreshing]</code>ï¼štable ä¸‹ä¼¸ï¼ŒSpinner å‡ºç°å¹¶å¼€å§‹ spinningã€‚</p>
<p> <code>[self.refreshControl endRefreshing]</code>ï¼štable ä¸Šæ”¶ï¼ŒSpinner åœæ­¢ spinning å¹¶æ¶ˆå¤±ã€‚</p>
<p> æœ‰äº†è¿™ä¸ª Spinnerï¼Œä½ å°±å¯ä»¥åœ¨ reload çš„æ—¶å€™ç»™ç”¨æˆ·æç¤ºé€‚å½“çš„çŠ¶æ€äº†ã€‚</p>
<p> è¿™ä¸ª Spinner æ˜¯å¯ä»¥ <em><code>Control</code></em> + <em><code>Drag</code></em> å‡º target-action çš„ã€‚å¦‚æœç”¨æˆ· pull down tableï¼Œé‚£ä¹ˆè¿™ä¸ª action å°±ä¼šè§¦å‘ï¼è¿™æ ·ï¼Œä½ å°±å¯ä»¥åœ¨ action ä¸­è®© Spinner start spinningï¼Œç„¶åå»æ›´æ–° tableã€‚</p>
<p> <img src="/img/Study_iOS_UITableView/11.13.UITableView.png" alt="UITableView"></p>
<p> <img src="/img/Study_iOS_UITableView/11.14.UITableView.png" alt="UITableView"></p>
<p> <strong>æ³¨æ„</strong>ï¼Œç”¨æˆ· pull down è§¦å‘çš„æ˜¯ Spinner çš„ target-actionï¼Œè€Œä¸æ˜¯è§¦å‘ beginRefreshingã€‚ä½ éœ€è¦åœ¨ action ä¸­è°ƒç”¨ beginRefreshingã€‚</p>
</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šUITableView">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šUITableView</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š11</em></p>]]>
    
    </summary>
    
      <category term="iOS" scheme="http://hi.zongquan.wang/tags/iOS/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Study iOS - UIScrollView]]></title>
    <link href="http://hi.zongquan.wang/2015/01/11/Study_iOS_UIScrollView/"/>
    <id>http://hi.zongquan.wang/2015/01/11/Study_iOS_UIScrollView/</id>
    <published>2015-01-11T05:46:10.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šUIScrollView">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šUIScrollView</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š10</em></p>
<a id="more"></a>
<hr>
<p><strong><code>UIScrollView</code></strong> æ˜¯ iOS ä¸­å¾ˆåŸºç¡€å¾ˆé‡è¦çš„ä¸€ç§ UIViewï¼Œç”¨äºå‘ˆç°è¿œå¤§äº app window å¤§å°çš„ content areaï¼Œç”¨æˆ·é€šè¿‡ <em><code>swiping</code></em> æ‰‹åŠ¿å¯ä»¥åœ¨ content area ä¸­è¿›è¡Œ scrollï¼Œé€šè¿‡ <em><code>pinching</code></em> æ‰‹åŠ¿å¯ä»¥è¿›è¡Œ content çš„ zoomã€‚å°±åƒæ˜¯æ‹¿ç€ä¸€ä¸ªæ”¾å¤§é•œåœ¨å››å¤„ç§»åŠ¨ç€è§‚å¯Ÿä¸€å‰¯å¾ˆå¤§çš„åœ°å›¾ã€‚</p>
<p>UIScrollView ä¹Ÿæ˜¯å¾ˆå¤šå…¶å®ƒé‡è¦ UIView çš„ super classï¼Œä¾‹å¦‚ <a href="../../../../2015/01/11/Study_iOS_UITableView/"><em><code>UITableView</code></em></a>ã€<em><code>UICollectionView</code></em>ã€<a href="../../../../2015/01/11/Study_iOS_Common_UI/"><em><code>UITextView</code></em></a> ç­‰ç­‰ã€‚</p>
<h4 id="åˆ›å»º_UIScrollView">åˆ›å»º UIScrollView</h4><p>é€šè¿‡ Storyboard æˆ–è€…ä»£ç ä¸­é€šè¿‡ alloc initWithFrameã€‚</p>
<h4 id="ä½¿ç”¨_UIScrollView">ä½¿ç”¨ UIScrollView</h4><ul>
<li>å‘ UIScrollView çš„ content area ä¸­æ·»åŠ ä¸€ä¸ª subview1ï¼š</li>
</ul>
<p><img src="/img/Study_iOS_UIScrollView/10.3.UIScrollView.png" alt="UIScrollView"></p>
<ul>
<li><p>å†å‘ UIScrollView çš„ content area ä¸­æ·»åŠ ä¸€ä¸ªå¾ˆå¤§çš„ subview2ï¼š</p>
<p>  <img src="/img/Study_iOS_UIScrollView/10.4.UIScrollView.png" alt="UIScrollView"></p>
<p>  <strong>æ³¨æ„</strong>ï¼Œåƒä¸‡ä¸è¦å¿˜è®°è®¾ç½® UIScrollView çš„ <em><code>contentSize</code></em> propertyï¼å®ƒæŒ‡å®šäº† UIScrollView çš„ content area çš„å¤§å°ï¼Œä¹Ÿå°±æ˜¯ UIScrollView å¯ä»¥æ¸¸èµ°çš„èŒƒå›´ã€‚æ‰€æœ‰æ·»åŠ åˆ° UIScrollView ä¸­çš„ subviews çš„ frame éƒ½æ˜¯ä½äº UIScrollView çš„ content area åæ ‡ç³»ä¸­ï¼Œå³ï¼šåŸç‚¹ä¸º (0,0)ï¼Œsize ä¸º contentSizeã€‚</p>
<p>  é€šå¸¸ï¼ŒcontentSize çš„è®¾å®šéœ€è¦è€ƒè™‘ content area é‡Œé¢å®¹çº³çš„ subviews çš„å¤§å°ã€‚</p>
</li>
<li><p><strong>å½“å‰ visible area</strong></p>
<p>  <img src="/img/Study_iOS_UIScrollView/10.6.UIScrollView.png" alt="UIScrollView"></p>
</li>
<li><p><strong>å½“å‰ visible area åœ¨ content area åæ ‡ç³»ä¸­çš„ä½ç½®</strong></p>
<p>  <img src="/img/Study_iOS_UIScrollView/10.5.UIScrollView.png" alt="UIScrollView"></p>
</li>
<li><p><strong>å½“å‰ visible area åœ¨åŸ subview åæ ‡ç³»ä¸­çš„å¤§å°</strong></p>
<p>  <img src="/img/Study_iOS_UIScrollView/10.7.UIScrollView.png" alt="UIScrollView"></p>
</li>
<li><p><strong>Zoom</strong></p>
<p>  æ‰€æœ‰ UIView éƒ½æœ‰ä¸€ä¸ª propertyï¼š<em><code>CGAffineTransform transform</code></em>ï¼ŒåŒ…å« <em><code>translate</code></em>ï¼Œ<em><code>scale</code></em>ï¼Œ<em><code>rotate</code></em>ã€‚è€Œ UIScrollView å®ç° Zoom çš„åŸç†å°±æ˜¯æ”¹å˜ subview çš„ transform çš„å€¼ã€‚</p>
<p>  <strong>æ³¨æ„</strong>ï¼ŒZoom æ—¶ä¹Ÿä¼šå½±å“ <em><code>contentSize</code></em> å’Œ <em><code>contentOffset</code></em> çš„å€¼ã€‚</p>
<p>  <strong>æƒ³è¦æ”¯æŒ Zoom æ•ˆæœï¼Œå¿…é¡»åšåˆ°ä¸‹é¢2ç‚¹</strong>ï¼š</p>
<ol>
<li><p>è®¾å®š UIScrollView çš„ <em><code>minimumZoomScale</code></em> å’Œ <em><code>maximumZoomScale</code></em>ã€‚ä¸è®¾å®šçš„è¯ï¼Œé»˜è®¤éƒ½æ˜¯ 1.0ï¼Œå³ä¸ç¼©æ”¾ã€‚</p>
</li>
<li><p>å®ç° delegate å‡½æ•°ï¼š<code>-(UIView *)viewForZoomingInScrollView:(UIScrollView *)sender;</code>ï¼Œè¯¥å‡½æ•°ç”¨äºæŒ‡å®šä½ è¦ç¼©æ”¾çš„æ˜¯ UIScrollView ä¸­çš„å“ªä¸ª subviewã€‚</p>
<p>é€šå¸¸ç¼©æ”¾éƒ½æ˜¯ä¼´éšç€ pinching æ‰‹åŠ¿çš„å‘ç”Ÿè€Œè§¦å‘çš„ï¼Œä½†ä½ ä¹Ÿå¯ä»¥åœ¨ä»£ç ä¸­æ‰‹åŠ¨è§¦å‘ç¼©æ”¾ã€‚ä¸»è¦æ˜¯å€ŸåŠ©è¿™2ä¸ª APIï¼š<code>-(void)setZoomScale: animated:</code> å’Œ <code>-(void)zoomToRect: animated:</code>ã€‚</p>
</li>
</ol>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šUIScrollView">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šUIScrollView</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š10</em></p>]]>
    
    </summary>
    
      <category term="iOS" scheme="http://hi.zongquan.wang/tags/iOS/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Study iOS - Segue]]></title>
    <link href="http://hi.zongquan.wang/2015/01/10/Study_iOS_Segue/"/>
    <id>http://hi.zongquan.wang/2015/01/10/Study_iOS_Segue/</id>
    <published>2015-01-10T15:01:35.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šSegue">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šSegue</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š6ï¼Œ15ï¼Œ16</em></p>
<a id="more"></a>
<hr>
<p><em><code>Segue</code></em>ï¼Œä¸­æ–‡ä¸ºâ€œç»§ç»­â€çš„æ„æ€ï¼Œåœ¨ iOS å¼€å‘ä¸­ï¼Œå…¶ class ä¸º <em><code>UIStoryboardSegue</code></em>ï¼Œç”¨äº storyboard ä¸­ä¸åŒ UIViewController ä¹‹é—´çš„è½¬åœºï¼Œå³ä»ä¸€ä¸ª UIViewController scene è½¬åœºåˆ°å¦ä¸€ä¸ª UIViewController sceneã€‚ä½ å¯ä»¥ä»ä¸€ä¸ª UIControlã€UIBarItemã€UIViewã€UIViewController ç­‰ç­‰ï¼Œå‘å¦ä¸€ä¸ª UIViewController å»ºç«‹ Segueã€‚</p>
<h3 id="å¦‚ä½•åˆ›å»º_Segue">å¦‚ä½•åˆ›å»º Segue</h3><p>èµ·ç‚¹ï¼ˆUIControlã€UIBarItemã€UIViewã€UIViewController ç­‰ç­‰ï¼‰</p>
<p>â‡©</p>
<p><em><code>Control</code></em> + <em><code>Drag</code></em></p>
<p>â‡©</p>
<p>ç»ˆç‚¹ï¼ˆUIViewControllerï¼‰</p>
<p>â‡©</p>
<p>è®¾ç½® Segue çš„ Identifier</p>
<h3 id="Segue_å¦‚ä½•æ‰§è¡Œ">Segue å¦‚ä½•æ‰§è¡Œ</h3><ol>
<li><p><strong>è§¦å‘ Segue</strong>ï¼šå‡å¦‚ä½ ä» UIButton å»ºç«‹äº†ä¸€ä¸ª Segueï¼Œé‚£ä¹ˆ button ç‚¹å‡»æ—¶ï¼Œå°±ä¼šè§¦å‘ Segueã€‚ä½†æœ‰æ—¶ä½ ä¹Ÿéœ€è¦ä»ä»£ç ä¸­æ‰‹åŠ¨è§¦å‘ Segueï¼Œæ­¤æ—¶å°±éœ€è¦è°ƒç”¨ UIViewController çš„ APIï¼š<code>-(void)performSegueWithIdentifier:(NSString *)segueID sender:(id)sender</code>ã€‚</p>
</li>
<li><p><strong>è¯¢é—® Segue æ˜¯å¦å…è®¸æ‰§è¡Œ</strong>ï¼šå®ç°è¿™ä¸ª delegateï¼š<code>-(BOOL)shouldPerformSegueWithIdentifier:(NSString *)identifier sender:(id)sender</code>ï¼Œå¦‚æœä¸å®ç°ï¼Œé»˜è®¤å°±æ˜¯å…è®¸æ‰€æœ‰ Segueã€‚</p>
</li>
<li><p><strong>å‡†å¤‡ Segue</strong>ï¼šçœŸæ­£å‘ˆç° <em><code>destination UIViewController</code></em> ä¹‹å‰ï¼Œä½ éœ€è¦ä¸ºè¯¥ Segue ä½œ preparationã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒSegue ä¼šç»™ <em><code>source UIViewController</code></em> æœºä¼šå»å‡†å¤‡å¥½å°†è¦å‘ˆç°çš„ destination UIViewControllerã€‚å¯ä»¥ç†è§£æˆ destination UIViewController çš„ initã€‚è¿™ä¸€ preparation è¿‡ç¨‹æ˜¯é€šè¿‡å®ç°å¦‚ä¸‹ delegate æ¥å®Œæˆçš„ï¼š</p>
<pre><code>-(<span class="typename">void</span>)<span class="string">prepareForSegue:</span>(UIStoryboardSegue *)segue <span class="string">sender:</span>(id)sender
{
    <span class="keyword">if</span> ([segue.identifier <span class="string">isEqualToString:</span>@<span class="string">"XXX"</span>]) {
        <span class="keyword">if</span> ([segue.destinationViewController <span class="string">isKindOfClass:</span>[XXXViewController <span class="class"><span class="keyword">class</span>]]) {</span>
            XXXViewController *xxxVC = (XXXViewController *)segue.destinationViewController;
            xxxVC.xxxProperty = XXX; <span class="comment">// setup <span class="label">xxxVC</span></span>
        }
    }
}
</code></pre><p> <strong>æ³¨æ„</strong>ï¼Œè¦è®°ä½ä¹‹å‰ <a href="../../../../2015/01/05/Study_iOS_MVC/">MVCs</a> ä¸­æåˆ°çš„åŸåˆ™ï¼Œè¿™ä¸ª destination UIViewController åœ¨ source UIViewController çš„ MVC ä¸­æ‰®æ¼”ç€ View çš„è§’è‰²ï¼Œä¸å…è®¸ destination UIViewController å‘ source UIViewController çš„ç›´æ¥é€šä¿¡ï¼Œè€Œæ˜¯è¦ä½¿ç”¨ blind çš„æ–¹å¼ï¼Œå¦‚ delegateã€‚</p>
<p> <strong>è¿˜è¦æ³¨æ„</strong>ï¼Œå‡ ä¹æ‰€æœ‰ç±»å‹çš„ Segue éƒ½æ˜¯ init ä¸€ä¸ª <strong>new</strong> destination UIViewController ç»™ä½ ï¼Œæ‰€ä»¥å½“ä½ ç¬¬äºŒæ¬¡ prepareForSegue æ—¶ï¼Œç¬¬ä¸€æ¬¡ prepareForSegue æ‹¿åˆ°çš„é‚£ä¸ª destination UIViewController å·²ç»ä¸å¤å­˜åœ¨äº†ï¼Œä½ éœ€è¦é‡æ–° setupã€‚<strong>è¿™é‡Œåªæœ‰ä¸€ä¸ªä¾‹å¤–</strong>ï¼Œå°±æ˜¯åé¢è¦æåˆ°çš„ <em><code>Unwind Segue</code></em>ï¼Œå®ƒè¿”ç»™ä½ çš„ destination UIViewController å°±æ˜¯ä¹‹å‰å·²ç»å­˜åœ¨çš„ UIViewControllerï¼Œè¿™æ˜¾ç„¶æ˜¯åˆç†çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒaVC é€šè¿‡æ™®é€š Segue è½¬åœºåˆ° bVCï¼ˆbVC ä¼šè¢«é‡æ–° initï¼‰ï¼ŒbVC åˆé€šè¿‡ Unwind Segue è½¬å›åˆ° aVCï¼Œæ­¤æ—¶ï¼ŒUnwind Segue çš„ destination UIViewController æ˜¾ç„¶å¿…é¡»æ˜¯ä¹‹å‰å·²ç»å­˜åœ¨çš„é‚£ä¸ª aVCï¼Œè€Œä¸åº”è¯¥å»é‡æ–° init ä¸€ä¸ªã€‚</p>
<p> <strong>æ›´è¦æ³¨æ„</strong>ï¼ŒprepareForSegue åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œdestination UIViewController ä¸­çš„ outlet å°šæœª setï¼Œå› ä¸º prepareForSegue åšçš„äº‹ç­‰ä»·äºå¸®åŠ© destination UIViewController å» initã€‚è€Œ outlet set æ˜¯åœ¨ init ä¹‹åï¼ŒviewDidLoad ä¹‹å‰åšçš„ã€‚å‚è§ <a href="../../../../2015/01/05/Study_iOS_Life_Cycle/">Life Cycle</a>ã€‚</p>
</li>
<li><p><strong>ç³»ç»Ÿä¸ºä½ å‘ˆç° destination UIViewController</strong></p>
</li>
</ol>
<h3 id="Segue_åˆ†ç±»">Segue åˆ†ç±»</h3><ul>
<li><p><strong>Push Segue</strong>ï¼šä¸€èˆ¬ç”¨äº <em><code>UINavigationController</code></em> ä¸­ã€‚æ„Ÿå—ä¸€ä¸‹ <em><code>UINavigationController</code></em>ã€‚</p>
<p>  <img src="/img/Study_iOS_Segue/6.0.UINavigationController.png" alt="UINavigationController"></p>
<p>  ä½ å¯ä»¥ä»ä¸€ä¸ª Embedded MVC å‘å¦ä¸€ä¸ª Embedded MVC åˆ›å»º Push Segueã€‚</p>
<p>  æ¯ä¸€ä¸ª Embedded MVC éƒ½å¯ä»¥è®¾å®šè‡ªå·±çš„ navigationItem.rightBarButtonItems å’Œ toolbarItemsã€‚</p>
<p>  æ¯ä¸€ä¸ª Embedded MVC ä¸­çš„ <em><code>Back Button</code></em> éƒ½æ˜¯ UINavigationController è‡ªåŠ¨æ·»åŠ çš„ï¼Œæ˜¾ç¤ºçš„æ˜¯ä¸Šä¸€ä¸ª Embedded MVC çš„ Titleï¼Œå¦‚æœä¸Šä¸€ä¸ªæ²¡æœ‰è®¾å®š Titleï¼Œå°±æ˜¾ç¤º â€œBackâ€ å­—æ ·ã€‚</p>
<p>  <img src="/img/Study_iOS_Segue/6.1.UINavigationController.png" alt="UINavigationController"></p>
<p>  <strong>å¦å¤–</strong>ï¼Œä¸€èˆ¬éƒ½æ˜¯é€šè¿‡ Segue æ¥å‘ˆç° destination UIViewController çš„ã€‚ä½†æå°‘æ•°æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦é€šè¿‡ä»£ç æ‰‹åŠ¨å‘ˆç°ï¼Œæ­¤æ—¶ï¼Œä½ å¯ä»¥åˆ©ç”¨ UINavigationController çš„ API <code>pushViewController:animated:</code>ï¼Œé‚£ä¹ˆè¦ push çš„é‚£ä¸ª UIViewController å¦‚ä½•è·å–å‘¢ï¼Ÿåˆ©ç”¨ UIStoryBoard çš„ API <code>instantiateViewControllerWithIdentifier:</code>ï¼Œä¼ å…¥å‚æ•°æ˜¯ä½ åœ¨ Storyboard ä¸­ä¸ºè¯¥ UIViewController è®¾å®šçš„ Identifierã€‚ä¸¤è€…ç»“åˆèµ·æ¥å°±æ˜¯ï¼š</p>
<pre><code>-(<span class="keyword">IBAction</span>)pushViewControllerByMyself
{
    XXXViewController *xxxVC = [<span class="keyword">self</span><span class="variable">.storyboard</span> instantiateViewControllerWithIdentifier:<span class="string">@"XXX"</span>];
    xxxVC<span class="variable">.xxxProperty</span> = XXX;
    [<span class="keyword">self</span><span class="variable">.navigationController</span> pushViewController:xxxVC animated:<span class="literal">YES</span>];
}
</code></pre></li>
<li><p><strong>Relationship Segue</strong>ï¼šä¸€èˆ¬ç”¨äº <em><code>UITabBarController</code></em> ä¸­ã€‚æ„Ÿå—ä¸€ä¸‹ <em><code>UITabBarController</code></em> ã€‚</p>
<p>  <img src="/img/Study_iOS_Segue/6.6.UITabBarController.png" alt="UITabBarController"></p>
<p>  <img src="/img/Study_iOS_Segue/6.7.UITabBarController.png" alt="UITabBarController"></p>
<p>  <img src="/img/Study_iOS_Segue/6.8.UITabBarController.png" alt="UITabBarController"></p>
</li>
<li><p><strong>Embedded Segue</strong>ï¼šä¸€èˆ¬ç”¨äº <em><code>Container View</code></em> ä¸­ã€‚Container View çš„ä½œç”¨æ˜¯ï¼Œå°†ä¸€ä¸ª VC çš„ self.view show åˆ°å¦ä¸€ä¸ª VC çš„ view ä¸­ã€‚æ„Ÿå—ä¸€ä¸‹ <em><code>Container View</code></em> ã€‚</p>
<p>  <img src="/img/Study_iOS_Segue/15.0.EmbedSegue.png" alt="Container View"></p>
<p>  åˆ›å»º Embedded Segue çš„æ–¹å¼åŒ Push Segue ä¸€æ ·ï¼Œé€šè¿‡ <em>Control</em> + <em>Drag</em> çš„æ–¹å¼ï¼Œä» Container View æ‹–å‘ destination UIViewControllerï¼Œæ­¤æ—¶åªæœ‰ä¸€ç§ Segue å¯ä»¥é€‰æ‹©ï¼Œé‚£å°±æ˜¯ Embedded Segueã€‚</p>
<p>  <strong>æ³¨æ„</strong>ï¼Œè¿™ä¸ª Embedded Segue æ˜¯åœ¨å¤–å±‚ UIViewController å‘ˆç°çš„æ—¶å€™è‡ªåŠ¨è§¦å‘çš„ï¼ˆ<em>è§¦å‘çš„å…·ä½“æ—¶é—´ç‚¹æœ‰å¾…è¿›ä¸€æ­¥ç ”ç©¶</em>ï¼‰ï¼Œä½ åŒæ ·æ˜¯éœ€è¦å» prepareForSegueï¼Œä¸è¦å¿˜äº†ï¼Œæ­¤æ—¶ destination UIViewController çš„ outlet å°šæœª setã€‚</p>
</li>
<li><p><strong>Modal Segue</strong>ï¼šä¸€èˆ¬ç”¨äºå‘ˆç° <em><code>Modal View Controller</code></em>ã€‚</p>
<p>  åˆ›å»º Modal Segue çš„æ–¹å¼åŒ Push Segue ä¸€æ ·ï¼Œé€šè¿‡ <em>Control</em> + <em>Drag</em> çš„æ–¹å¼ï¼Œä»æŸä¸ª UIButtonï¼ˆä¸¾ä¾‹æ¥è¯´ï¼‰æ‹–å‘ destination UIViewControllerï¼Œé€‰æ‹© Modal å³å¯ã€‚å½“ Segue è§¦å‘æ—¶ï¼Œå°±ä¼šä»¥ Modal çš„å½¢å¼å‘ˆç° destination UIViewControllerã€‚åŒæ ·ï¼Œä½ éœ€è¦å» prepareForSegueã€‚é€šè¿‡è®¾å®š destination UIViewController çš„å±æ€§ modalTransitionStyleï¼Œå¯ä»¥è®©å®ƒä»¥ä¸åŒçš„åŠ¨ç”»å½¢å¼å‘ˆç°å‡ºæ¥ã€‚</p>
<p>  å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ä»£ç æ‰‹åŠ¨åœ°ä»¥ Modal çš„å½¢å¼å‘ˆç° destination UIViewControllerï¼Œè°ƒç”¨ <code>presentViewContainer:animated:completion:</code> å³å¯ï¼Œè¿™é‡Œçš„ completion block ä¼šåœ¨ destination UIViewController viewDidAppear åè¢«è°ƒç”¨ã€‚</p>
</li>
<li><p><strong>Unwind Segue</strong>ï¼šä¸€èˆ¬ç”¨äºä» <em><code>Modal View Controller</code></em> è¿”å›åˆ°å®ƒçš„ presenterã€‚é€šè¿‡ Unwind Segueï¼Œä½ ä¹Ÿåªèƒ½æ˜¯è¿”å›åˆ°è‡ªå·±çš„ presenterã€‚Unwind Segue ä¹Ÿå¯ä»¥ç”¨åœ¨ <em><code>UINavigationController</code></em> æœºåˆ¶ä¸­ã€‚</p>
<p>  æ­£å¦‚ä¹‹å‰æåˆ°çš„ï¼Œä½¿ç”¨ Unwind Segue åœ¨ prepareForSegue æ—¶ï¼Œå®ƒè¿”ç»™ä½ çš„ destination UIViewController å°±æ˜¯ä¹‹å‰å·²ç»å­˜åœ¨çš„ presenter UIViewControllerï¼Œä¸ä¼šå»é‡æ–° init ä¸€ä¸ª new UIViewControllerã€‚</p>
<p>  <strong>é‚£ä¹ˆåˆ›å»º Unwind Segue éƒ½éœ€è¦åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ</strong></p>
<p>  ä¸¾ä¾‹æ¥è¯´ï¼ŒaVC é€šè¿‡ Modal Segue çš„å½¢å¼å‘ˆç°å‡º bVCï¼Œç°åœ¨ bVC è¦é€šè¿‡ Unwind Segue çš„å½¢å¼è¿”å›åˆ° aVCã€‚é‚£ä¹ˆè¦åˆ›å»ºè¿™ä¸ª Unwind Segue éœ€è¦2æ­¥æ“ä½œï¼š</p>
<ol>
<li><p>åœ¨ aVC çš„ä»£ç ä¸­ï¼Œå®ç°ä¸€ä¸ªå¦‚ä¸‹è¿™æ ·åŸå‹çš„å‡½æ•°ï¼š</p>
<pre><code>-(<span class="keyword">IBAction</span>)handleUnwindSegue:(<span class="built_in">UIStoryboardSegue</span> *)segue
{
    XXXViewController *bVC = (XXXViewController *)segue<span class="variable">.sourceViewController</span>; <span class="comment">// source, not destination. bVC Unwind Segue to aVC, so bVC is source.</span>
    <span class="comment">// get what you want from bVC</span>
}
</code></pre></li>
<li><p>åœ¨ bVC çš„ scene ä¸­ï¼Œé€šè¿‡ <em>Control</em> + <em>Drag</em> æ‹–å‘ä¸‹é¢è¿™ä¸ª iconï¼š</p>
<p> <img src="/img/Study_iOS_Segue/16.2.UnwindSegue.png" alt="Unwind Segue"></p>
<p> ç„¶å Xcode å°±ä¼šåˆ—å‡º aVC ä¸­æ‰€æœ‰ä½ å®ç°çš„é‚£ç§åŸå‹çš„å‡½æ•°ï¼Œé€‰æ‹©å…¶ä¸­åŒ¹é…çš„é‚£ä¸ª handleUnwindSegue:ï¼Œå¹¶ç»™è¯¥ Unwind Segue è®¾å®š Identifierï¼Œè¿™æ ·å°±åˆ›å»ºäº† bVC åˆ° aVC çš„ä¸€ä¸ª Unwind Segueã€‚</p>
<p>handleUnwindSegue: ä¼šåœ¨ aVC å‘ˆç°åè¢«è°ƒç”¨ï¼Œæ­¤æ—¶ï¼ŒbVC ä¼šè‡ªåŠ¨ dismissã€‚åˆ«å¿˜äº†åœ¨ bVC çš„ä»£ç ä¸­è¿˜æ˜¯éœ€è¦å» prepareForSegue çš„ï¼Œä¸ºè¿™ä¸ª Unwind Segue åš preparationï¼Œé€šå¸¸å°±æ˜¯å‡†å¤‡å¥½ä¾› aVC åœ¨ handleUnwindSegue: ä¸­è®¿é—®çš„ä¸œè¥¿ã€‚</p>
<p><strong>å¦å¤–</strong>ï¼Œè¿™é‡Œå†å¤šæä¸€äº›å…³äº Modal View çš„ä¸œè¥¿ã€‚å‰é¢è®²åˆ°äº†ï¼Œåœ¨ aVC é€šè¿‡ Unwind Segue è¢«å‘ˆç°å‡ºæ¥çš„æ—¶å€™ï¼ŒbVC ä¼šè‡ªåŠ¨ dismissã€‚é‚£ä¹ˆå¦‚æœä¸å€ŸåŠ© Unwind Segueï¼Œå¦‚ä½•åœ¨ä»£ç ä¸­æ‰‹åŠ¨è®©å…¶ dismiss å‘¢ã€‚å¯ä»¥åˆ©ç”¨ <code>dismissViewControllerAnimated:completion:</code> æ¥å®Œæˆã€‚<strong>æ³¨æ„</strong>ï¼Œè¿™ä¸ªæ¶ˆæ¯ä¸æ˜¯å‘ç»™ bVC è‡ªå·±çš„ï¼Œè€Œæ˜¯å‘ç»™ aVC çš„ï¼æŸ¥çœ‹æ–‡æ¡£å°±ä¼šæ˜ç™½ï¼ŒaVC è°ƒç”¨è¿™ä¸ªå‡½æ•°åï¼Œä¼š dismiss æ‰å®ƒ present å‡ºæ¥çš„ Modal View Controllerã€‚æ‰€ä»¥ï¼Œåœ¨ bVC çš„ä»£ç ä¸­ï¼Œä½ é€šå¸¸æ˜¯è¿™ä¹ˆä½¿ç”¨è¯¥å‡½æ•°ï¼š</p>
<pre><code>[self.presentingViewController <span class="string">dismissViewControllerAnimated:</span>YES <span class="string">completion:</span>XXX];
</code></pre><p>åœ¨ bVC ä¸­é€šè¿‡ self.presentingViewController æ‹¿åˆ° aVCã€‚</p>
<p>æ‰‹åŠ¨ dismiss ä¸€èˆ¬æ˜¯ç”¨äº bVC ä»€ä¹ˆä¹Ÿä¸åšå°±è¿”å›åˆ° aVCï¼Œè¿™æ ·å°±ä¸éœ€è¦é€šè¿‡ Unwind Segue å‘ aVC è¿”å›æ•°æ®ã€‚</p>
</li>
</ol>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šSegue">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šSegue</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š6ï¼Œ15ï¼Œ16</em></p>]]>
    
    </summary>
    
      <category term="iOS" scheme="http://hi.zongquan.wang/tags/iOS/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Study iOS - Network]]></title>
    <link href="http://hi.zongquan.wang/2015/01/07/Study_iOS_Network/"/>
    <id>http://hi.zongquan.wang/2015/01/07/Study_iOS_Network/</id>
    <published>2015-01-07T02:15:27.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šNetwork">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šNetwork</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š10</em></p>
<a id="more"></a>
<hr>
<p>iOS ä¸­å¤„ç† Network çš„ API ä¸»è¦æ˜¯ <em><code>NSURLSession</code></em>ï¼Œå½“ç„¶ï¼ŒåŸºäºæ­¤ï¼Œ<em>Mattt Thompson</em> å¼€å‘äº†ä¸€å¥—æ›´åŠ å¼ºå¤§æ˜“ç”¨çš„ <em>AFNetworking</em>ã€‚ä¸ç®¡æ€æ ·ï¼Œè¿˜æ˜¯å¾ˆæœ‰å¿…è¦äº†è§£ä¸€ä¸‹ iOS è‡ªå·±çš„ <em>NSURLSession</em> çš„ã€‚</p>
<h4 id="NSURLSession_çš„ä¸€èˆ¬ä½¿ç”¨æµç¨‹ï¼š"><em>NSURLSession</em> çš„ä¸€èˆ¬ä½¿ç”¨æµç¨‹ï¼š</h4><pre><code><span class="built_in">NSURLRequest</span> *request = [<span class="built_in">NSURLRequest</span> requestWithURL:XXX];
<span class="built_in">NSURLSessionConfiguration</span> *configuration = XXX;
<span class="built_in">NSURLSession</span> *session = XXX; <span class="comment">// use configuration</span>
<span class="built_in">NSURLSessionXXXTask</span> *task = [session XXXTaskWithRequest:request]; <span class="comment">// downloadTask, uploadTask, dataTask, ...</span>
[task resume];
</code></pre><p>åŸºæœ¬ä¸Šå°±æ˜¯ä¸Šé¢è¿™å‡ æ­¥ã€‚å½“ç„¶ï¼Œå¦‚æœä½¿ç”¨ <em><code>NSURLSessionDelegate</code></em> çš„è¯ï¼Œè¿˜éœ€è¦å®ç°è¿™äº› delegateï¼›å¦‚æœä¸ä½¿ç”¨ delegateï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨ <em><code>completionHandler</code></em> è¿™ç§ block çš„æ–¹å¼ã€‚å…·ä½“é€‰æ‹©å“ªç§ï¼Œå–å†³äº <em>NSURLSessionXXXTask</em> æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼Œä¸‹é¢ä¼šè¯¦ç»†æåˆ°ã€‚</p>
<p>ä¸‹é¢åˆ†åˆ«ç†è§£ä¸€ä¸‹è¿™äº›å…·ä½“æ­¥éª¤ï¼š</p>
<ol>
<li><p><strong><code>NSURLRequest</code></strong>ï¼šæ¯”è¾ƒç®€å•ï¼Œä¸å¤šè¯´äº†ã€‚</p>
</li>
<li><p><strong><code>NSURLSessionConfiguration</code></strong>ï¼šè¿™ä¸ª configuration æ§åˆ¶ç€åé¢åˆ›å»ºçš„ session çš„è‹¥å¹²å±æ€§ã€‚é€šå¸¸æ¯”è¾ƒå…³æ³¨è¿™3ä¸ª APIï¼š</p>
<ul>
<li><p><code>+(NSURLSessionConfiguration *)defaultSessionConfiguration</code>ï¼šåˆ›å»ºä¸€ä¸ª default sessionï¼Œä¼šä½¿ç”¨ cacheï¼Œcookie æœºåˆ¶ã€‚</p>
</li>
<li><p><code>+(NSURLSessionConfiguration *) ephemeralSessionConfiguration</code>ï¼šåˆ›å»ºä¸€ä¸ª ephemeral sessionï¼Œä¸ä½¿ç”¨ cacheï¼Œcookie æœºåˆ¶ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½åœ¨å†…å­˜ä¸­ï¼Œé™¤äº†ä¸‹è½½æ–‡ä»¶æ—¶æ‰ä¼šçœŸæ­£åœ°æœ‰å†™å…¥ disk çš„åŠ¨ä½œã€‚</p>
</li>
<li><p><code>+(NSURLSessionConfiguration *) backgroundSessionConfigurationWithIdentifier:(NSString *)identifier</code>ï¼šåˆ›å»ºä¸€ä¸ª background sessionï¼Œå¯ä»¥è®© session åœ¨ app å¤„äº background æ—¶èƒ½å¤Ÿç»§ç»­ runã€‚</p>
<p>  è¿™ç§ session ä¼šæŠŠæ§åˆ¶æƒäº¤ç»™ç³»ç»Ÿï¼Œæ­£å¦‚ä¹‹å‰ä¸€ç¯‡ç¬”è®°ï¼ˆ<a href="../../../../2015/01/05/Study_iOS_Life_Cycle/"><em><code>Life Cycle</code></em></a>ï¼‰ä¸­è®²åˆ°çš„é‚£æ ·ï¼Œæœ‰ä¸ª <code>UIApplicationDelegate</code> æ˜¯ä¸“é—¨é…åˆè¿™ç§ session ä½¿ç”¨çš„ï¼Œå³ <code>(void)application:(UIApplication *)application handleEventsForBackgroundURLSession:(NSString *)identifier completionHandler:(void (^)())completionHandler</code>ï¼Œç³»ç»Ÿé¦–å…ˆé€šè¿‡è¿™ä¸ª delegate å“åº” network events åï¼Œæ‰ä¼šå†æŠŠæ§åˆ¶æƒäº¤ç»™ä½ çš„ <em><code>NSURLSessionDelegate</code></em>ã€‚</p>
<p>  <strong>æ³¨æ„</strong>ï¼Œè¿™ç§ session æ¯”å‰é¢2ç§å¤šäº†ä¸€ä¸ª <code>identifier</code>ï¼Œæœ‰äº†å®ƒï¼Œå½“ app è¢«ç³»ç»Ÿ terminate å’Œ relaunch åï¼Œç³»ç»Ÿä¼šä½¿ç”¨åŒä¸€ä¸ª identifier é‡å»º background sessionï¼Œç»§ç»­ä¹‹å‰æœªå®Œæˆçš„ network transferã€‚ä½†æ˜¯ï¼Œè¿™é‡Œä»…é™äº app æ˜¯è¢«ç³»ç»Ÿ terminate å’Œ relaunchï¼Œå¦‚æœæ˜¯ç”¨æˆ·æ‰‹åŠ¨é€€å‡º appï¼Œåˆ™ä¸ä¼šå»é‡å»º sessionã€‚</p>
</li>
</ul>
</li>
<li><p><strong><code>NSURLSession</code></strong>ï¼šæœ‰äº† configurationï¼Œå°±å¯ä»¥åˆ›å»º session äº†ã€‚session çš„ init æ–¹å¼å†³å®šäº† network events çš„ handle æ–¹å¼ï¼Œä»¥åŠ handle æ“ä½œçš„æ‰§è¡Œç¯å¢ƒæ˜¯å“ªé‡Œã€‚ä¸»è¦æœ‰2ç§ init æ–¹å¼ï¼š</p>
<ul>
<li><p><code>+(NSURLSession *)sessionWithConfiguration:(NSURLSessionConfiguration *)configuration delegate:(id&lt;NSURLSessionDelegate&gt;)delegate delegateQueue:(NSOperationQueue *)queue</code>ï¼š</p>
<p>  <strong>delegate</strong> è‹¥ä¸ä¸º nilï¼Œå°±æ„å‘³ç€ä½ å®ç°äº†è‡ªå·±çš„ <em><code>NSURLSessionDelegate</code></em> æ¥ handle network eventsã€‚è‹¥ä¸º nilï¼Œå°±æ„å‘³ç€è¯¥ session åªæ¥å— <em><code>completionHandler</code></em> è¿™ç§ handle æ“ä½œã€‚</p>
<p>  <strong>queue</strong> ç”¨äºæŒ‡å®š handle æ“ä½œï¼ˆä¸ç®¡æ˜¯ NSURLSessionDelegate è¿˜æ˜¯ completionHandlerï¼‰æ˜¯åœ¨ä»€ä¹ˆ NSOperationQueue ä¸Šæ‰§è¡Œçš„ã€‚å¯ä»¥ä¼ é€’ [NSOperationQueue mainQueue]ï¼›ä¹Ÿå¯ä»¥ä¼ é€’ <strong>[[NSOperationQueue alloc] init]ï¼ˆæ ¹æ®æ–‡æ¡£ï¼Œè¿™æ · init å‡ºæ¥çš„ NSOperationQueue æ€»æ˜¯å¹¶è¡Œæ‰§è¡Œå…¶ä¸­çš„ operation çš„</strong>ï¼‰ï¼›è¿˜å¯ä»¥ä¼ é€’ <strong>nilï¼Œæ­¤æ—¶ï¼Œsession ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªä¸²è¡Œ queueï¼ˆé mainQueueï¼‰</strong>æ¥æ‰§è¡Œæ‰€æœ‰çš„ NSURLSessionDelegate æˆ–è€… completionHandlerã€‚</p>
</li>
<li><p><code>+(NSURLSession *)sessionWithConfiguration:(NSURLSessionConfiguration *)configuration</code>ï¼šå‰ä¸€ç§çš„ç®€åŒ–ç‰ˆï¼Œåªæ¥å— <em><code>completionHandler</code></em> è¿™ç§ handle æ“ä½œï¼ŒåŒæ—¶ï¼Œ<strong>session ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªä¸²è¡Œçš„ NSOperationQueueï¼ˆé mainQueueï¼‰æ¥æ‰§è¡Œ completionHandler</strong>ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼Œsession çš„ delegate å’Œ delegateQueue å±æ€§æ˜¯åªè¯»çš„ï¼Œæ— æ³•äº‹åä¿®æ”¹ã€‚</p>
</li>
</ul>
</li>
<li><p><strong><code>NSURLSessionXXXTask</code></strong>ï¼šè¿™é‡Œä¸æå…·ä½“çš„å„ç§ task æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œåªå…³æ³¨ä¸‹ session åˆ›å»º task çš„æ–¹å¼ã€‚ä¸»è¦æœ‰2ç±»ï¼š</p>
<ul>
<li><p><code>XXXTaskWithRequest:completionHandler:</code>ï¼šæŒ‡å®š completionHandler æ¥ handle network eventsã€‚ä½ å¯ä»¥æŒ‡å®šå®ƒä¸º NULLï¼Œä½†å‰ææ˜¯åœ¨ä¹‹å‰åˆ›å»º session æ—¶å·²ç»æŒ‡å®šå¥½äº† NSURLSessionDelegateï¼Œè¿™æ ·å°±ä¼šé€šè¿‡ delegate æ¥ handleï¼Œå¦åˆ™ï¼Œæ—¢æ²¡æœ‰ completionHandler åˆæ²¡æœ‰ delegateï¼Œä½ å°±æ— æ³• handle äº†ã€‚</p>
</li>
<li><p><code>XXXTaskWithRequest:</code>    ï¼šåªé€šè¿‡ NSURLSessionDelegate æ¥ handleã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼ŒXXXTask æœ¬èº«æ‰§è¡Œæ—¶å¹¶ä¸åœ¨ mainQueue ä¸Šï¼Œæ‰€ä»¥ä¸å¿…æ‹…å¿ƒï¼Œä½ æ‰€å…³æ³¨çš„åªæ˜¯ NSURLSessionDelegate æˆ–è€… completionHandler æ˜¯åœ¨å“ªä¸ª queue ä¸Šæ‰§è¡Œã€‚</p>
</li>
</ul>
</li>
<li><p><strong>ä¸è¦å¿˜äº† <code>[task resume];</code></strong></p>
</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šNetwork">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šNetwork</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š10</em></p>]]>
    
    </summary>
    
      <category term="iOS" scheme="http://hi.zongquan.wang/tags/iOS/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Study iOS - UIView Animation]]></title>
    <link href="http://hi.zongquan.wang/2015/01/06/Study_iOS_Animation/"/>
    <id>http://hi.zongquan.wang/2015/01/06/Study_iOS_Animation/</id>
    <published>2015-01-06T14:29:21.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šUIView_Animation">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šUIView Animation</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š8</em></p>
<a id="more"></a>
<hr>
<p>æœ¬ç¯‡æåˆ°çš„ Animation ä¸»è¦æ˜¯åŸºäº UIView çš„ï¼Œå¹¶æ²¡æœ‰æ¶‰åŠåˆ°åŸºäº Layer æœºåˆ¶çš„ Animationã€‚</p>
<p>åŸºäº UIView çš„ Animation æœ‰ä»¥ä¸‹3ç§ï¼š</p>
<h3 id="Animation_of_UIView_Property">Animation of UIView Property</h3><p><strong>é¦–å…ˆä¸€å®šè¦æ˜ç¡®ä¸€ç‚¹</strong>ï¼šanimation è™½ç„¶æ˜¯ç»å†ä¸€å®šæ—¶é—´ show åœ¨å±å¹•ä¸Šçš„ï¼Œä½†å¯¹ property çš„å€¼çš„ä¿®æ”¹å´æ˜¯æ—©å°±å·²ç»ç«‹å³ç”Ÿæ•ˆäº†ã€‚</p>
<p>UIView çš„æŸäº› property çš„æ”¹å˜æ˜¯å¯ä»¥æ–½åŠ  animation çš„ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>frame
transformï¼ˆtranslationï¼Œrotationï¼Œ<span class="built_in">scale</span>ï¼‰
<span class="built_in">alpha</span>ï¼ˆopacityï¼‰
</code></pre><p>å®ç°è¿™ä¸€ç±» animation çš„ API æ˜¯ UIView çš„ <code>class method</code>ï¼š</p>
<pre><code>+(<span class="keyword">void</span>)animateWithDuration:(<span class="built_in">NSTimeInterval</span>)duration
                     delay:(<span class="built_in">NSTimeInterval</span>)delay
                   options:(<span class="built_in">NSViewAnimationOptions</span>)options
                animations:(<span class="keyword">void</span>(^)(<span class="keyword">void</span>))animationsBlock
                completion:(<span class="keyword">void</span>(^)(<span class="built_in">BOOL</span> finished))completionBlock
</code></pre><p><code>animationsBlock</code> é‡Œé¢æ‰§è¡Œä½ å¯¹ UIView property æ‰€åšçš„ä¿®æ”¹ã€‚</p>
<p><code>completionBlock</code> è¡¨ç¤º animation å‘ˆç°ç»“æŸåè¦åšçš„äº‹ï¼Œå¦‚æœ animation æˆåŠŸåœ°å‘ˆç°å®Œæ¯•ï¼Œfinished ä¸º YESï¼Œå¦åˆ™ï¼Œè‹¥ä¸­æ–­äº†ï¼Œåˆ™è¿”å› NOã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šanimation æ˜¯åœ¨è¯¥ API è¿”å›åå¼€å§‹çš„ï¼Œè€Œè¯¥ API è¿”å›çš„æ—¶åˆ»æ˜¯ <code>animationsBlock</code> æ‰§è¡Œå®Œæ¯•çš„æ—¶åˆ»ã€‚<strong>ä¹Ÿå°±æ˜¯è¯´</strong>ï¼Œè°ƒç”¨è¯¥ API åï¼Œä¼šç«‹åˆ»æ‰§è¡Œå…¶ <code>animationsBlock</code>ï¼Œæ‰§è¡Œå®Œåå°±ç«‹åˆ»è¿”å›ï¼Œç„¶å animation å¼€å§‹å‘ˆç°ã€‚æ‰€ä»¥å¯¹ UIView property çš„ä¿®æ”¹åœ¨ <code>animationsBlock</code> æ‰§è¡Œå®Œåå°±ç«‹å³ç”Ÿæ•ˆäº†ï¼Œåªä¸è¿‡ property çš„å˜åŒ–è¦ç»è¿‡ duration æ‰å‘ˆç°å®Œæ¯•ã€‚</p>
<p><strong>å¦å¤–</strong>ï¼šfinished ä½•æ—¶ä¸º NOï¼Ÿå¦‚æœåœ¨è¯¥ animation å¼€å§‹åï¼Œåˆè°ƒç”¨äº†è¯¥ API å¯¹ç›¸åŒçš„ property å¼€å§‹äº†å¦ä¸€ä¸ª animationï¼Œè¿™æ ·å‰ä¸€ä¸ª animation æ²¡åšå®Œå°±å¾—ä¸­æ–­å»åšå¦ä¸€ä¸ª animation äº†ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå‰ä¸€ä¸ª animation çš„ completionBlock çš„ finished å°±ä¸º NO äº†ã€‚</p>
<h3 id="Animation_of_Entire_UIView">Animation of Entire UIView</h3><p>ä¾‹å¦‚æ•´ä¸ª UIView çš„ flippingã€dissolvingã€curling ç­‰æ•ˆæœï¼Œåœ¨å‘ˆç°è¿™äº›æ•ˆæœçš„åŒæ—¶ï¼Œä½ å¯ä»¥å¯¹æ•´ä¸ª UIView è¿›è¡Œä»»æ„ä¿®æ”¹ï¼Œæ”¹å˜å…¶ appearanceã€‚</p>
<p>å®ç°è¿™ä¸€ç±» animation çš„ API æ˜¯ UIView çš„ <code>class method</code>ï¼š</p>
<pre><code>+(<span class="keyword">void</span>)transitionWithView:(<span class="built_in">UIView</span> *)viewToModify
                 duration:(<span class="built_in">NSTimeInterval</span>)duration
                  options:(<span class="built_in">NSViewAnimationOptions</span>)options
               animations:(<span class="keyword">void</span>(^)(<span class="keyword">void</span>))animationsBlock
               completion:(<span class="keyword">void</span>(^)(<span class="built_in">BOOL</span> finished))completionBlock
</code></pre><p><code>animationsBlock</code> å’Œ <code>completionBlock</code> çš„æœºåˆ¶åŒå‰é¢ä¸€ç§ animation ä¸€æ ·ï¼Œåªä¸è¿‡ä½ ä¸å†æ˜¯åªå•å•åœ°ä¿®æ”¹ UIView çš„æŸä¸ª propertyï¼Œä½ å¯ä»¥å¯¹æ•´ä¸ª UIView åšä»»æ„çš„ä¿®æ”¹ï¼ˆä¾‹å¦‚é‡æ–°ç»˜åˆ¶æ•´ä¸ª UIView ç­‰ï¼‰ã€‚</p>
<p><code>options</code> å¯ä»¥æŒ‡å®š animation é‡‡ç”¨çš„æ•ˆæœï¼šflippingã€dissolvingã€curling ç­‰ã€‚</p>
<p>å¦‚æœä¸æ˜¯æƒ³å¯¹åŒä¸€ä¸ª UIView è¿›è¡Œ animation ä¿®æ”¹ï¼Œè€Œæ˜¯è¦è½¬ä¸ºå‘ˆç°å¦ä¸€ä¸ª UIViewï¼Œåˆ™éœ€è¦ä½¿ç”¨è¿™ä¸ª APIï¼š</p>
<pre><code>+(<span class="keyword">void</span>)transitionFromView:(<span class="built_in">UIView</span> *)fromView
                   toView:(<span class="built_in">UIView</span> *)toView
                 duration:(<span class="built_in">NSTimeInterval</span>)duration
                  options:(<span class="built_in">NSViewAnimationOptions</span>)options
               completion:(<span class="keyword">void</span>(^)(<span class="built_in">BOOL</span> finished))completionBlock
</code></pre><p>æ­¤æ—¶å·²ç»ä¸å†éœ€è¦ <code>animationsBlock</code> äº†ï¼Œå› ä¸ºè¦å‘ˆç°çš„ animation å°±æ˜¯ä» fromView å˜ä¸º toViewã€‚</p>
<p><code>optioins</code> å¯ä»¥æŒ‡å®šï¼šä½ æ˜¯æƒ³ hide fromView è€Œå‘ˆç° toViewï¼Œè¿˜æ˜¯æƒ³ remove fromView è€Œé‡æ–° add toViewã€‚</p>
<h3 id="Dynamic_Animator">Dynamic Animator</h3><p>è¿™ä¸€ç±» animation æ˜¯æŒ‡ <em><code>animatable objects</code></em>ï¼ˆé€šå¸¸å°±æ˜¯ UIViewï¼‰çš„ <em><code>physics animation</code></em>ã€‚å°†æŸäº› physics æ•ˆæœæ–½åŠ åˆ° animatable objects ä¸Šï¼Œè¿™äº› objects å°±ä¼šå—åˆ° physics çš„å½±å“è‡ªè¡Œå¼€å§‹åŠ¨ç”»æ•ˆæœï¼Œç›´åˆ°åœ¨ physics çš„ä½œç”¨ä¸‹ resolve to stasisï¼ˆç›¸å¯¹é™æ­¢çŠ¶æ€ï¼‰ã€‚</p>
<p>Stepsï¼š</p>
<ol>
<li><p>åˆ›å»º <code>UIDynamicAnimator</code>ï¼Œå¹¶æŒ‡å®šå…¶ <code>delegate</code>ã€‚</p>
<pre><code>UIDynamicAnimator *animator = [[UIDynamicAnimator alloc] initWithReferenceView:aView]<span class="comment">;</span>
animator.delegate = aDelegate<span class="comment">;</span>
</code></pre><p> è®¾å®š delegate æ˜¯ä¸ºäº†å“åº” UIDynamicAnimatorDelegate çš„2ä¸ªå‡½æ•°ï¼š</p>
<p> <code>-(void)dynamicAnimatorDidPause:(UIDynamicAnimator *)animator</code>ï¼šresolve to stasis å¯¼è‡´åŠ¨ç”»æš‚åœ</p>
<p> <code>-(void)dynamicAnimatorWillResume:(UIDynamicAnimator *)animator</code>ï¼šåŠ¨ç”»é‡æ–°å¼€å§‹</p>
</li>
<li><p>å‘ UIDynamicAnimator ä¸­æ·»åŠ å„ç§ physics æ•ˆæœï¼Œå³ <code>UIDynamicBehavior</code>ï¼ˆgravityï¼Œcollisions ç­‰ç­‰ï¼‰ã€‚</p>
<p> UIDynamicBehavior æœ‰å¾ˆå¤šå­ç±»ï¼Œä¾‹å¦‚åˆ›å»ºä¸€ä¸ª gravity ä½œç”¨æ•ˆæœï¼š</p>
<pre><code>UIGravityBehavior *gravity = <span class="comment">[<span class="comment">[UIGravityBehavior alloc]</span> init]</span>;
<span class="comment">[animator addBehavior:gravity]</span>;
</code></pre><ul>
<li><p>æœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ UIDynamicBehaviorï¼Œå³ <code>UIDynamicItemBehavior</code>ï¼Œå®ƒçš„å„ä¸ª property ç”¨äºæŒ‡å®š objects çš„ä¸€äº›å›ºæœ‰ physic å±æ€§ï¼Œä¾‹å¦‚ï¼šallowsRotationï¼Œfrictionï¼Œelasticityï¼Œdensity ç­‰ã€‚è¿™äº›å±æ€§ä¼šé—´æ¥å½±å“åˆ°å…¶ä»– UIDynamicBehavior çš„ä½œç”¨æ•ˆæœã€‚</p>
</li>
<li><p>ä½ ä¹Ÿå¯ä»¥ subclass UIDynamicBehaviorï¼Œè¿›è¡Œè‡ªå®šä¹‰ã€‚å¯ä»¥åˆ©ç”¨å®ƒçš„å‡½æ•° <code>addChildBehavior:(UIDynamicBehavior *)behavior</code> å°†è‹¥å¹²ä¸ª UIDynamicBehavior ç»„åˆæˆä¸€ç§æ–°çš„ UIDynamicBehaviorã€‚é€šå¸¸ä½ è¿˜éœ€è¦ override å®ƒçš„ <code>init</code>ï¼Œ<code>addItem</code>ï¼Œ<code>removeItem</code>ã€‚</p>
</li>
<li><p>UIDynamicBehavior æœ‰ä¸€ä¸ª property ç”¨äºè®¿é—®è‡ªå·±æ‰€åœ¨çš„ UIDynamicAnimatorï¼š<code>dynamicAnimator</code>ã€‚</p>
</li>
<li><p>UIDynamicBehavior è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„ propertyï¼š<code>@property (copy) void (^action)(void)</code>ï¼Œæ¯å½“ UIDynamicBehavior åœ¨ objects ä¸Šç”Ÿæ•ˆæ—¶ï¼Œè¯¥ block éƒ½ä¼šè¢«è°ƒç”¨ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œçš„æ“ä½œæœ€å¥½ä¸è¦å¤ªè´¹æ—¶ï¼Œå› ä¸ºå®ƒä¼šè¢«é¢‘ç¹åœ°è°ƒç”¨ã€‚</p>
</li>
</ul>
</li>
<li><p>å°† <code>UIDynamicItem</code>ï¼ˆanimatable objectsï¼Œé€šå¸¸å°±æ˜¯ UIViewï¼‰æ·»åŠ åˆ°æŸäº› UIDynamicBehavior ä¸‹ã€‚</p>
<p> UIDynamicItem æ˜¯ä¸€ä¸ª protocolï¼ŒæŒ‡å®š3ä¸ª propertyï¼šboundsï¼Œcenterï¼Œtransformã€‚è€Œ UIView å®ç°äº†è¯¥ protocolã€‚</p>
<pre><code><span class="keyword">id</span> &lt;<span class="built_in">UIDynamicItem</span>&gt; item = XXX <span class="comment">// ä¾‹å¦‚æŸä¸ª UIView</span>
[gravity addItem:item];
</code></pre></li>
<li><p>ä¸€æ—¦å®Œæˆ step 3ï¼ŒUIDynamicItem å°±ä¼šè‡ªåŠ¨åœ¨ UIDynamicBehavior çš„ä½œç”¨ä¸‹å¼€å§‹è¿åŠ¨ã€‚</p>
<p> <strong>æ³¨æ„</strong>ï¼Œå¦‚æœä½ åœ¨ UIDynamicAnimator çš„ä½œç”¨ä¸‹ï¼Œæ‰‹åŠ¨ä¿®æ”¹äº† UIDynamicItem çš„å±æ€§ï¼Œé‚£ä¹ˆå¿…é¡»è°ƒç”¨ UIDynamicAnimator çš„å‡½æ•° <code>updateItemUsingCurrentState:item</code> æ¥è®© UIDynamicAnimator é‡æ–°è·å–å…¶å±æ€§ï¼Œè¿™æ ·ä½œç”¨åœ¨ item ä¸Šçš„ UIDynamicBehavior æ‰èƒ½æ ¹æ®å½“å‰çš„æœ€æ–°çŠ¶æ€ç»§ç»­äº§ç”Ÿä½œç”¨åŠ›ã€‚</p>
</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šUIView_Animation">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šUIView Animation</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š8</em></p>]]>
    
    </summary>
    
      <category term="iOS" scheme="http://hi.zongquan.wang/tags/iOS/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Study iOS - UIView]]></title>
    <link href="http://hi.zongquan.wang/2015/01/06/Study_iOS_UIView/"/>
    <id>http://hi.zongquan.wang/2015/01/06/Study_iOS_UIView/</id>
    <published>2015-01-06T13:23:11.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šUIView">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šUIView</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š7</em></p>
<a id="more"></a>
<hr>
<h3 id="UIView_çš„_init">UIView çš„ init</h3><p>ä¸ UIViewController çš„ init ç±»ä¼¼ï¼ŒUIView çš„ init ä¹Ÿæœ‰2ç§å½¢å¼ï¼šä¸€ç§æ˜¯ä» storyboard ä¸­é‡Šæ”¾å‡ºæ¥ï¼Œå¦ä¸€ç§æ˜¯åœ¨ä»£ç ä¸­ç›´æ¥è°ƒç”¨ç›¸å…³çš„ init å‡½æ•°ã€‚ä¸¤ç§åªä¼šé€‰æ‹©ä¸€ç§æ¥å®Œæˆ initã€‚</p>
<ol>
<li><p><strong>æ¥è‡ª storyboardï¼š</strong> <em><code>awakeFromNib</code></em></p>
<p> awakeFromNib æ˜¯ NSObject çš„å‡½æ•°ï¼Œé¢¤æŠ–å§ã€‚</p>
</li>
<li><p><strong>æ¥è‡ª codeï¼š</strong> <em><code>initWithFrame:(CGRect)rect</code></em></p>
</li>
</ol>
<p>å› ä¸ºæœ‰è¿™2ç§ init æ–¹å¼ï¼Œæ‰€ä»¥ï¼Œå¦‚æœå¸Œæœ›åœ¨ init é˜¶æ®µåšä¸€äº› setupï¼Œé‚£ä¹ˆè¿™2ä¸ªåœ°æ–¹éƒ½è¦æ‰§è¡Œ setupã€‚å› ä¸ºä» storyboard é‡Šæ”¾å‡ºæ¥çš„ init æ–¹å¼åªä¼šè°ƒç”¨ awakeFromNibï¼Œä¸ä¼šè°ƒç”¨ initWithFrame:ï¼›åŒæ ·ï¼Œcode ä¸­è°ƒç”¨ initWithFrame: è¿›è¡Œçš„ init æ–¹å¼ä¹Ÿä¸ä¼šå†è°ƒç”¨ awakeFromNibã€‚</p>
<h3 id="Coordinate">Coordinate</h3><p><img src="/img/Study_iOS_UIView/7.1.Coordinate.png" alt="Coordinate"></p>
<p><img src="/img/Study_iOS_UIView/7.2.Coordinate.png" alt="Coordinate"></p>
<h3 id="Draw">Draw</h3><p>åŸºäº CPU è¿›è¡Œç»˜åˆ¶æ—¶ï¼Œé çš„æ˜¯ <em><code>drawRect:</code></em> è¿™ä¸ªå‡½æ•°ã€‚å¦‚ä½•å®ç°è‡ªå·±çš„ <em><code>drawRect:</code></em> å‘¢ï¼Ÿä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li><p><strong>Core Graphics ï¼ˆC APIï¼‰</strong></p>
<ol>
<li><p>è·å– draw æ“ä½œæ‰€åœ¨çš„ <em><code>context</code></em>ã€‚<strong>æ³¨æ„</strong>ï¼Œæ¯æ¬¡è°ƒç”¨ <em><code>drawRect:</code></em> æ—¶ï¼ŒiOS éƒ½ä¼šé‡æ–°ç»™ä½ æä¾›ä¸€ä¸ªæ–°çš„ contextï¼Œåªæœ‰è¿™ä¸ªæœ€æ–°çš„å¯¹æœ¬æ¬¡ <em><code>drawRect:</code></em> æ‰æ˜¯æœ‰æ•ˆçš„ï¼Œå› æ­¤ä¸è¦å» cache ä¹‹å‰çš„æŸä¸ª context æ¥å¤ç”¨ï¼Œå› ä¸ºå®ƒå¯¹æœ¬æ¬¡çš„ <em><code>drawRect:</code></em> æ˜¯æ— æ•ˆçš„ã€‚</p>
<p> context å†³å®šäº† <em><code>drawRect:</code></em> æ“ä½œå‘ç”Ÿåœ¨å“ªé‡Œï¼ˆScreenï¼ŒOffscreenï¼ŒPDFï¼ŒPrinter ç­‰ï¼‰ã€‚é€šè¿‡åœ¨ <em><code>drawRect:</code></em> ä¸­è°ƒç”¨ <em><code>UIGraphicsGetCurrentContext()</code></em> æ¥è·å–å½“å‰ CGContextRefã€‚</p>
</li>
<li><p>åˆ›å»º path</p>
</li>
<li><p>è®¾ç½® colorã€fontã€width ç­‰ç­‰å±æ€§</p>
</li>
<li><p>è°ƒç”¨ stroke æˆ–è€… fill è¿›è¡Œç»˜åˆ¶</p>
</li>
</ol>
</li>
<li><p><strong>UIBezierPathï¼ˆCocoa APIï¼‰</strong></p>
<p>  åˆ©ç”¨ UIBezierPath ä¼šå¾—åˆ°ä¸€ä¸ª objectï¼Œç„¶åç›´æ¥é€šè¿‡è¯¥ object æ¥ stroke æˆ–è€… fillã€‚UIBezierPath æ˜¯ä¸éœ€è¦è®¾ç½® context çš„ï¼Œå®ƒä¼šè‡ªåŠ¨åœ°åœ¨å½“å‰ context ä¸‹è¿›è¡Œç»˜åˆ¶ã€‚</p>
<p>  å¯ä»¥åˆ©ç”¨ UIBezierPath æ¥ clip ä½ çš„åç»­ç»˜åˆ¶æ“ä½œï¼š</p>
<pre><code>UIBezierPath *roundedRect = [UIBezierPath bezierPathWithRoundedRec<span class="variable">t:rect</span> cornerRadiu<span class="variable">s:radius</span>];
[roundedRect addClip]; // this would clip <span class="keyword">all</span> drawing <span class="keyword">to</span> <span class="keyword">be</span> inside the roundedRect
</code></pre></li>
</ul>
<p>åŸºäº GPU çš„ draw ç”¨çš„æ˜¯å¦ä¸€å¥—æœºåˆ¶ï¼šLayerã€‚æœ¬ç¯‡æœªæ¶‰åŠã€‚</p>
<h3 id="Redraw">Redraw</h3><p><img src="/img/Study_iOS_UIView/7.6.Redraw.png" alt="Redraw"></p>
<h3 id="UIGestureRecognizer">UIGestureRecognizer</h3><p>ä¸¤ç§æ·»åŠ æ–¹å¼ï¼š</p>
<ol>
<li><p><code>code ä¸­æ·»åŠ </code></p>
<p> <img src="/img/Study_iOS_UIView/7.7.UIGestureRecognizer.png" alt="UIGestureRecognizer"></p>
<p> <img src="/img/Study_iOS_UIView/7.8.UIGestureRecognizer.png" alt="UIGestureRecognizer"></p>
<p> <img src="/img/Study_iOS_UIView/7.9.UIGestureRecognizer.png" alt="UIGestureRecognizer"></p>
</li>
<li><p><code>storyboard ä¸­æ‹–æ”¾ UIGestureRecognizer æ§ä»¶ï¼Œå¹¶è®¾ç½® target-actionã€‚</code></p>
</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šUIView">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šUIView</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š7</em></p>]]>
    
    </summary>
    
      <category term="iOS" scheme="http://hi.zongquan.wang/tags/iOS/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Study iOS - Misc]]></title>
    <link href="http://hi.zongquan.wang/2015/01/05/Study_iOS_Misc/"/>
    <id>http://hi.zongquan.wang/2015/01/05/Study_iOS_Misc/</id>
    <published>2015-01-05T14:34:11.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šMisc">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šMisc</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼šall</em></p>
<a id="more"></a>
<hr>
<h4 id="NSObject">NSObject</h4><ul>
<li><p><code>(NSString *)description</code>ï¼šå½“ä½ è‡ªå·±å®ç°ä¸€ä¸ª myClass æ—¶ï¼Œå¦‚æœå®ç°äº† <code>(NSString *)description</code> è¿™ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥åˆ©ç”¨ <code>NSLog(@&quot;%@&quot;, myClassInstance)</code> æ¥è¾“å‡º description çš„å†…å®¹äº†ï¼Œè¿™é‡Œçš„ <em><code>%@</code></em> ä¼šè¢«æ›¿æ¢æˆ <code>[myClassInstance description]</code>ã€‚</p>
</li>
<li><p><code>(id)copy</code>ï¼šå¾—åˆ° object çš„ unmutable ç‰ˆï¼Œä¸ç®¡ object æœ¬èº«æ˜¯ä¸æ˜¯ mutable çš„ã€‚</p>
</li>
<li><p><code>(id)mutableCopy</code>ï¼šå¾—åˆ° object çš„ mutable ç‰ˆï¼Œä¸ç®¡ object æœ¬èº«æ˜¯ä¸æ˜¯ mutable çš„ã€‚</p>
<p>  <strong>æ³¨æ„</strong>ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ class éƒ½å®ç°äº† copy å’Œ mutableCopy æœºåˆ¶ï¼Œå¦‚æœæ²¡æœ‰å®ç°ï¼Œè€Œä½ è°ƒç”¨äº†ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚å¦å¤–ï¼Œè¿™2ç§ copy æ“ä½œæ•ˆç‡å¾ˆé«˜ï¼Œæ‰€ä»¥ä¸è¦æœ‰æ‰€æ‹…å¿ƒã€‚</p>
</li>
</ul>
<h4 id="UIFont">UIFont</h4><ul>
<li><p>ç»™æ–‡æœ¬å†…å®¹ï¼ˆcontentï¼‰è®¾å®šå­—ä½“çš„æœ€ä½³æ–¹å¼ï¼š<code>UIFont *font = [UIFont preferredFontForTextStyle:UIFontTextStyleXXX]</code></p>
</li>
<li><p>ç»™æ§ä»¶ï¼ˆä¾‹å¦‚ button çš„ titleï¼‰è®¾å®šå­—ä½“çš„æœ€ä½³æ–¹å¼ï¼š<code>UIFont *font = [UIFont systemFontOfSize:(CGFloat)pointSize]</code></p>
<p>  <strong>æ³¨æ„</strong>ï¼ŒpreferredFontForTextStyle: ä¹Ÿå¯ä»¥ç”¨äºè®¾å®šæ§ä»¶å­—ä½“ï¼Œä½†åè¿‡æ¥ systemFontOfSize: å´ä¸èƒ½ç”¨äºè®¾å®š content å­—ä½“ã€‚</p>
</li>
</ul>
<h4 id="NSNotification">NSNotification</h4><ul>
<li><p>å¯¹äºå‘ NSNotificationCenter æ³¨å†Œè¿‡çš„ observerï¼Œå¦‚æœä¸å†éœ€è¦ listen æŸä¸ª notificationï¼Œå¿…é¡»è¦è°ƒç”¨ <code>removeObserver:</code>ï¼Œå› ä¸º NSNotificationCenter å¯¹ observer çš„å¼•ç”¨æ–¹å¼æ˜¯ <em><code>unsafe retained</code></em>ï¼Œæ‰€ä»¥ï¼Œå¦‚æœ observer å˜ä¸º nil äº†ï¼ŒNSNotificationCenter ä¼šå‡ºç°å¼•ç”¨å¼‚å¸¸ï¼Œé€ æˆ crashã€‚</p>
<p>  å¸¸è§çš„è°ƒç”¨ removeObserver: çš„åœ°æ–¹æ˜¯ <em><code>viewWillDisappear</code></em> æˆ–è€… <em><code>dealloc</code></em>ã€‚</p>
</li>
</ul>
<h4 id="Category">Category</h4><ul>
<li><p>æ·»åŠ  Category æ— éœ€äº‹å…ˆå¾—åˆ° class çš„ .m æ–‡ä»¶ï¼Œå³æ— éœ€çŸ¥é“ class çš„åŸå§‹å®ç°ã€‚</p>
</li>
<li><p><code>Category ä¸èƒ½æ·»åŠ  instance å˜é‡ï¼Œåªèƒ½æ·»åŠ  property å’Œ functionã€‚</code>è€Œ property æœ¬è´¨ä¸Šä¹Ÿæ˜¯ functionï¼Œæ—¢ç„¶ä¸èƒ½æ·»åŠ  instance å˜é‡ï¼Œ<em><code>é‚£ä¹Ÿæ„å‘³ç€ï¼Œ@synthesize ä¹Ÿæ˜¯ä¸å…è®¸çš„ã€‚</code></em>æ€»ç»“èµ·æ¥å°±æ˜¯ï¼ŒCategory ä¸­æ·»åŠ çš„ property å’Œ function åªèƒ½å¯¹åŸæœ‰çš„ instance å˜é‡è¿›è¡Œæ“ä½œã€‚Extension å¯ä»¥æ·»åŠ  instance å˜é‡ã€‚</p>
</li>
</ul>
<h4 id="Network_Activity_Indicator">Network Activity Indicator</h4><ul>
<li>UIApplication æœ‰ä¸ªå±æ€§ï¼š<em><code>BOOL networkActivityIndicatorVisible</code></em>ï¼Œå°†å…¶è®¾ä¸º YESï¼Œstatus bar ä¸Šå°±ä¼šå‡ºç°è¡¨ç¤ºç½‘ç»œæ´»åŠ¨çš„ spinnerï¼Œè®¾ä¸º NOï¼Œspinner å°±ä¼šæ¶ˆå¤±ã€‚ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ï¼Œå½“å¤šä¸ªçº¿ç¨‹æ“ä½œè¯¥ networkActivityIndicatorVisible æ—¶ï¼Œéœ€è¦ç»™å®ƒåŠ ä¸ª<strong>è®¡æ•°çš„æœºåˆ¶</strong>ï¼Œé˜²æ­¢é”™è¯¯åœ°å¼€å…³è¯¥å±æ€§ã€‚</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šMisc">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šMisc</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼šall</em></p>]]>
    
    </summary>
    
      <category term="iOS" scheme="http://hi.zongquan.wang/tags/iOS/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Study iOS - Life Cycle]]></title>
    <link href="http://hi.zongquan.wang/2015/01/05/Study_iOS_Life_Cycle/"/>
    <id>http://hi.zongquan.wang/2015/01/05/Study_iOS_Life_Cycle/</id>
    <published>2015-01-05T12:38:32.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šLife_Cycle">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šLife Cycle</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š5ï¼Œ17</em></p>
<a id="more"></a>
<hr>
<p>è¿™é‡Œæåˆ°çš„ Life Cycle ä¸»è¦åŒ…æ‹¬2æ–¹é¢ï¼š</p>
<ul>
<li><p>Application çš„ Life Cycle</p>
</li>
<li><p>UIViewController çš„ Life Cycle</p>
</li>
</ul>
<h3 id="Application_çš„_Life_Cycle">Application çš„ Life Cycle</h3><p>Application çš„ Life Cycle æ˜¯é ä¸€äº› <em><code>UIApplicationDelegate</code></em> å‡½æ•°æ¥æ§åˆ¶çš„ã€‚</p>
<p>æ–°å»ºä¸€ä¸ª iOS é¡¹ç›®çš„æ—¶å€™ï¼Œåœ¨ Xcode ç”Ÿæˆçš„ AppDelegate.m ä¸­ï¼Œå·²ç»åˆ—å‡ºäº†å¸¸ç”¨çš„å‡ ä¸ª delegate å‡½æ•°ï¼š</p>
<ul>
<li><p><code>(BOOL)application:(UIApplication *)application willFinishLaunchingWithOptions:(NSDictionary *)launchOptions</code>ï¼šapp å³å°†å®Œæˆå¯åŠ¨ã€‚è¯¸å¦‚å“åº” openURL è¿™æ ·çš„äº‹æƒ…ï¼Œéœ€è¦åœ¨è¿™é‡Œåšï¼Œåœ¨ app å½»åº•å¯åŠ¨å®Œæ¯•ä¹‹å‰ï¼Œä» launchOptions ä¸­æ‹¿åˆ° URLã€‚</p>
</li>
<li><p><code>(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions</code>ï¼šapp å½»åº•å¯åŠ¨å®Œæ¯•ã€‚è¿™é‡Œä¸€èˆ¬åš app çš„åˆå§‹åŒ–æ“ä½œã€‚</p>
</li>
<li><p><code>(void)applicationDidBecomeActive:(UIApplication *)application</code>ï¼šapp å˜å¾— activeï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œapp çš„ UI å¯ä»¥æ¥æ”¶ events äº†ã€‚è¿™é€šå¸¸æ˜¯å‘ç”Ÿåœ¨ app å¯åŠ¨åå‡ºç° UI çš„æ—¶å€™ï¼Œæˆ–è€…ä»å…¶å®ƒ app åˆ‡æ¢è€Œæ¥çš„æ—¶å€™ã€‚ä¼´éšè¯¥ delegate æœ‰ä¸€ä¸ª notification <em><code>UIApplicationDidBecomeActiveNotification</code></em>ã€‚</p>
</li>
<li><p><code>(void)applicationWillResignActive:(UIApplication *)application</code>ï¼šapp å˜å¾— not activeï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œapp çš„ UI æ— æ³•æ¥æ”¶ events äº†ã€‚è¿™é€šå¸¸æ˜¯å‘ç”Ÿåœ¨åˆ‡æ¢åˆ°å…¶å®ƒ app çš„æ—¶å€™ï¼Œæˆ–è€…åŒå‡» Home çš„æ—¶å€™ï¼Œæˆ–è€…æ¥å¬ç”µè¯çš„æ—¶å€™ã€‚æ€»ä¹‹å°±æ˜¯ï¼Œè¯¥ app çš„ UI å·²ç»ä¸å†æ˜¯ iOS çš„ first responder UI äº†ã€‚ä¼´éšè¯¥ delegate æœ‰ä¸€ä¸ª notification <em><code>UIApplicationWillResignActiveNotification</code></em>ã€‚</p>
<p>  é€šå¸¸åˆ©ç”¨ä»¥ä¸Š2ä¸ª delegateï¼Œæ¥æš‚åœå¹¶ä¿å­˜å½“å‰ UI çŠ¶æ€ï¼Œç„¶ååœ¨ä¹‹åé‡æ–°æ¢å¤ UI çŠ¶æ€ã€‚</p>
</li>
<li><p><code>(void)applicationDidEnterBackground:(UIApplication *)application</code>ï¼šapp è¿›å…¥ backgroundã€‚<strong>æ³¨æ„</strong>ï¼Œå½“å‘ç”Ÿ applicationWillResignActive åï¼Œå¹¶ä¸ä¸€å®šä¼šå‘ç”Ÿ applicationDidEnterBackgroundï¼Œä¾‹å¦‚ï¼Œè¿è¡Œè¯¥ app æ—¶çªç„¶åŒå‡» Home æˆ–è€…æ¥å¬ç”µè¯ï¼Œæ­¤æ—¶ï¼Œåªä¼šå‘ç”ŸapplicationWillResignActiveã€‚åªæœ‰ç­‰åˆ°è¯¥ app è¿›å…¥ background åï¼Œä¾‹å¦‚å·²ç»åˆ‡æ¢åˆ°å…¶å®ƒ app åï¼Œæ‰ä¼šå‘ç”Ÿ applicationDidEnterBackgroundã€‚<strong>æ­¤å¤–</strong>ï¼ŒiOS ç•™ç»™è¯¥ delegate çš„è¿è¡Œæ—¶é—´å¾ˆçŸ­ï¼Œå¦‚æœæƒ³åœ¨è¿™é‡Œåšäº›è´¹æ—¶çš„æ“ä½œï¼Œå¯ä»¥å€ŸåŠ© <em><code>beginBackgroundTaskWithExpirationHandler:</code></em>ã€‚ä¼´éšè¯¥ delegate æœ‰ä¸€ä¸ª notification <em><code>UIApplicationDidEnterBackgroundNotification</code></em>ã€‚</p>
</li>
<li><p><code>(void)applicationWillEnterForeground:(UIApplication *)application</code>ï¼šapp å³å°†é‡æ–°å›åˆ° foregroundã€‚é€šå¸¸åšäº› undo applicationDidEnterBackground çš„æ“ä½œã€‚applicationWillEnterForeground å‘ç”Ÿä¹‹åï¼Œå¾ˆå¿«å°±ä¼šå‘ç”Ÿ applicationDidBecomeActiveã€‚<strong>ä½†æ³¨æ„</strong>ï¼Œapp å¯åŠ¨çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰ applicationWillEnterForegroundï¼Œè€Œæ˜¯ç›´æ¥ applicationDidBecomeActiveã€‚æ‰€ä»¥è¦ç†è§£å‰é¢æåˆ°çš„â€œé‡æ–°â€äºŒå­—ï¼Œapp å¯åŠ¨æ—¶å¹¶ä¸æ˜¯é‡æ–°ï¼Œåªæœ‰å‘ç”Ÿ applicationDidEnterBackground åï¼Œæ‰å¯¹åº”åœ°æœ‰â€œé‡æ–°â€çš„æ„æ€ã€‚ä¼´éšè¯¥ delegate æœ‰ä¸€ä¸ª notification <em><code>UIApplicationWillEnterForegroundNotification</code></em>ã€‚</p>
</li>
<li><p><code>(void)application:(UIApplication *)application performFetchWithCompletionHandler:(void (^)(UIBackgroundFetchResult result))completionHandler</code>ï¼šå¦‚æœ app å¼€å¯äº† fetch background modeï¼Œé‚£ä¹ˆå½“ iOS ç»™ä½ æœºä¼šå»åš fetch æ—¶ï¼Œå°±ä¼šè°ƒç”¨è¯¥ delegateã€‚åœ¨è¿™é‡Œä½ å¯ä»¥åšä»»ä½•æ“ä½œï¼Œå¹¶ä¸é™äº download fetchã€‚ä½†è¿™é‡Œåªæœ‰30sæ—¶é—´ï¼Œ30så†…ä½ å¿…é¡»å¤„ç†å®Œï¼Œç„¶åè°ƒç”¨ completionHandlerã€‚é€šå¸¸çš„åšæ³•æ˜¯ï¼Œé¦–å…ˆå¼€çº¿ç¨‹å¼‚æ­¥å»åšè¯¥åšçš„æ“ä½œï¼Œç„¶åå°±ç«‹å³è°ƒç”¨ completionHandlerã€‚</p>
<p>  <strong>æ³¨æ„</strong>ï¼Œå¦‚æœ iOS ç»™ä½ æœºä¼šåœ¨è¿™é‡Œåš network fetchï¼Œé‚£ä¹ˆä½ åº”è¯¥åœ¨è¿™é‡Œå‘èµ·ä¸€ä¸ªæ™®é€šçš„ <em><code>ephemeral configuration ç±»å‹çš„ NSURLSession</code></em>ï¼Œè€Œä¸æ˜¯å‘èµ· background configuration ç±»å‹çš„ NSURLSessionã€‚å› ä¸ºbackground configuration ç±»å‹çš„ NSURLSession æ˜¯ discretionary çš„ï¼Œå½“ app å·²ç»å¤„äº background æ—¶ï¼Œè¿™ç§ NSURLSession å¯èƒ½ä¼šè¢« iOS æ‹’ç»æ‰§è¡Œï¼Œè€Œè¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæˆ‘ä»¬æ—¢ç„¶å·²ç»åœ¨ background äº†ï¼Œé‚£ä¹ˆ iOS ç»™æœºä¼šæ‰§è¡Œè¯¥å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬æƒ³è¦çš„æ˜¯å‘èµ·ä¸€ä¸ªæœ‰æ•ˆçš„ NSURLSessionï¼Œä¿è¯å®ƒä¼šè¢«æ‰§è¡Œã€‚å½“åœ¨è¿™é‡Œå‘èµ· ephemeral configuration ç±»å‹çš„ NSURLSession åï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨ NSURLSession çš„ completion delegate ä¸­è°ƒç”¨ <em><code>completionHandler:UIBackgroundFetchResultNewData</code></em> æ¥æ›´æ–° app çš„ UI snapshotã€‚</p>
</li>
<li><p><code>(void)application:(UIApplication *)application handleEventsForBackgroundURLSession:(NSString *)identifier completionHandler:(void (^)())completionHandler</code>ï¼šå¦‚æœä¹‹å‰å‘èµ·äº†ä¸€ä¸ª background configuration ç±»å‹çš„ NSURLSessionï¼Œé‚£ä¹ˆå½“ NSURLSession task å®Œæˆåï¼Œå°±ä¼šè°ƒç”¨è¯¥ delegateã€‚<strong>æ³¨æ„</strong>ï¼Œå¦‚æœå‘èµ· background configuration ç±»å‹çš„ NSURLSessionï¼Œé‚£ä¹ˆå¿…é¡»è¦å®ç°è¯¥ delegateï¼Œåœ¨å…¶ä¸­å°½æ—©åœ°è°ƒç”¨ completionHandlerï¼Œåªæœ‰è¿™æ ·ï¼Œapp æ‰èƒ½è°ƒç”¨ä½ ä¹‹å‰ä¸º NSURLSession è®¾å®šçš„é‚£äº› NSURLSessionDelegateï¼Œè¯¸å¦‚ didReceiveResponse ç­‰ç­‰ï¼›å¦åˆ™ï¼Œé‚£äº› NSURLSessionDelegate ä¸ä¼šè¢«è°ƒç”¨ã€‚</p>
</li>
<li><p><code>LocalNotification / RemoteNotification ç³»åˆ—</code>ï¼šå¤„ç†è¯¸å¦‚é—¹é’Ÿï¼ˆlocalï¼‰ã€Apple Push Serviceï¼ˆremoteï¼‰è¿™æ ·çš„ Notificationã€‚</p>
</li>
<li><p><code>State Restoration ç³»åˆ—</code>ï¼šç”¨äºä¿å­˜å¹¶æ¢å¤ app çš„ UIï¼Œå³ä½¿é€€å‡º app å å†é‡å¯ï¼Œä¹Ÿå¯ä»¥æ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ã€‚</p>
</li>
<li><p><code>Data Protection ç³»åˆ—</code>ï¼šé”å±åï¼Œå°†æ–‡ä»¶ä¿æŠ¤èµ·æ¥ã€‚</p>
</li>
</ul>
<p>æœ€åå›¾ç¤ºä¸€ä¸‹ï¼š</p>
<p><img src="/img/Study_iOS_Life_Cycle/17.0.ApplicationLifeCycle.png" alt="ApplicationLifeCycle"></p>
<h3 id="UIViewController_çš„_Life_Cycle">UIViewController çš„ Life Cycle</h3><p>UIViewController çš„ Life Cycle ä¸»è¦é ä¸€äº›ç±»ä¼¼äº delegate çš„å‡½æ•°æ¥æ§åˆ¶çš„ã€‚</p>
<p>æŒ‰ç…§æ‰§è¡Œæ—¶é—´é¡ºåºåˆ—ä¸¾å‡ ä¸ªå¸¸ç”¨çš„å‡½æ•°ï¼š</p>
<ul>
<li><p><code>init</code>ï¼šUIViewController çš„åˆå§‹åŒ–æœ‰2ç§ï¼Œä¸€ç§æ˜¯ä» storyboard ä¸­é‡Šæ”¾å‡ºæ¥ï¼Œå¦ä¸€ç§æ˜¯åœ¨ä»£ç ä¸­ç›´æ¥è°ƒç”¨ç›¸å…³çš„ init å‡½æ•°ã€‚ä¸¤ç§åªä¼šé€‰æ‹©ä¸€ç§æ¥å®Œæˆ initã€‚</p>
<ol>
<li><p><strong>æ¥è‡ª storyboardï¼š</strong><code>awakeFromNib</code></p>
<p> å½“ app å¯åŠ¨æ—¶ï¼Œæ‰€æœ‰ä» storyboard é‡Šæ”¾å‡ºæ¥çš„ object éƒ½ä¼šè°ƒç”¨è¯¥å‡½æ•°ï¼ŒåŒ…æ‹¬å…¶ä¸­çš„ UIViewControllerï¼ˆé€šè¿‡åœ¨ storyboard ä¸­è®¾ç½®å…¶ classï¼‰ï¼<strong>æ³¨æ„</strong>ï¼Œè¯¥å‡½æ•°æ‰§è¡Œæ—¶ï¼Œoutlet è¿˜å°šæœªè®¾ç½®å¥½ï¼Œå› æ­¤æ— æ³•è®¿é—®ã€‚</p>
</li>
<li><p><strong>æ¥è‡ª codeï¼š</strong><code>initWithNibName:(NSString *)name bundle:(NSBundle *)bundle</code></p>
<p>å› ä¸ºæœ‰è¿™2ç§ init æ–¹å¼ï¼Œæ‰€ä»¥ï¼Œå¦‚æœå¸Œæœ›åœ¨ init é˜¶æ®µåšä¸€äº› setupï¼Œé‚£ä¹ˆè¿™2ä¸ªåœ°æ–¹éƒ½è¦æ‰§è¡Œ setupã€‚å› ä¸ºä» storyboard é‡Šæ”¾å‡ºæ¥çš„ init æ–¹å¼åªä¼šè°ƒç”¨ awakeFromNibï¼Œä¸ä¼šè°ƒç”¨ initWithNibNameï¼›åŒæ ·ï¼Œcode ä¸­è°ƒç”¨ initWithNibName: è¿›è¡Œçš„ init æ–¹å¼ä¹Ÿä¸ä¼šå†è°ƒç”¨ awakeFromNibã€‚</p>
<p>é€šå¸¸åœ¨è¯¥ init é˜¶æ®µèƒ½åšçš„äº‹å¾ˆæœ‰é™ï¼Œå› ä¸º outlet å°šæœªè®¾ç½®å¥½ã€‚æ‰€æœ‰ç›´æ¥è®¿é—® outlet çš„æ“ä½œéƒ½æ— æ³•è¿›è¡Œã€‚</p>
</li>
</ol>
</li>
<li><p><code>iOS è®¾ç½® outlet</code></p>
</li>
<li><p><code>viewDidLoad</code>ï¼šapp è¿è¡Œåˆ°è¿™é‡Œæ—¶ï¼Œoutlet å·²ç»è®¾ç½®å¥½ï¼Œæ‰€ä»¥æ˜¯è¿›è¡Œ setup æ“ä½œçš„ç»ä½³ä¹‹åœ°ï¼ä½†è¦<strong>æ³¨æ„</strong>ï¼š</p>
<ol>
<li>è¿™é‡Œæ€»æ˜¯éœ€è¦è°ƒç”¨ä¸€ä¸‹ <em><code>[super viewDidLoad]</code></em>ã€‚</li>
<li>æ­¤æ—¶ view çš„ geometry å°šæœªè®¾ç½®å¥½ï¼Œä¹Ÿå°±æ˜¯è¯´åƒ <em><code>bounds å’Œ frame</code></em> è¿™äº›å±æ€§æ˜¯è¿˜æ²¡æœ‰ç¡®å®šçš„ï¼Œä¸èƒ½åœ¨è¿™é‡Œè®¿é—®ï¼Œæ‰€ä»¥ä¸è¦åšäº›ä¸ geometry ç›¸å…³çš„æ“ä½œã€‚</li>
<li>viewDidLoad åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œå³åœ¨é‡Šæ”¾ä¹‹å‰ï¼Œview åªä¼š load ä¸€æ¬¡ã€‚</li>
</ol>
</li>
<li><p><code>iOS ç¡®å®š geometry</code></p>
</li>
<li><p><code>viewWillLayoutSubviews: / viewDidLayoutSubviews:</code>ï¼šgeometry ç¡®å®šå¥½åï¼Œå°±å¯ä»¥è¿›è¡Œ view çš„å¸ƒå±€äº†ã€‚è¿™é€šå¸¸éƒ½æ˜¯ç”± AutoLayout è‡ªåŠ¨å®Œæˆçš„ï¼Œå‡†ç¡®çš„è¯´ï¼Œ<strong>AutoLayout åŠ¨ä½œå°±æ˜¯å‘ç”Ÿåœ¨ will ä¸ did ä¹‹é—´</strong>ã€‚æ¯å½“ view çš„ frame å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå°±ä¼šè°ƒç”¨è¿™ç»„å‡½æ•°ï¼Œè¿™æ ·è¯¥ view çš„ subviews å°±èƒ½å¤Ÿé‡æ–°è¿›è¡Œå¸ƒå±€äº†ã€‚ä¾‹å¦‚å±å¹•å‘ç”Ÿ autorotation æ—¶ï¼Œå°±ä¼šè°ƒç”¨å®ƒä»¬ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œé‡æ–°è®¾ç½® subviews çš„ frame æˆ–å…¶å®ƒ geometry ç›¸å…³çš„å±æ€§ï¼Œç„¶åè®© AutoLayout æ¥å®Œæˆå¸ƒå±€ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ç®¡è¿™ç»„å‡½æ•°ï¼Œåªæ˜¯è®© AutoLayout æ¥åšäº‹å°±è¡Œäº†ã€‚</p>
<pre><code>é¡ºä¾¿æä¸€ä¸‹ï¼Œå¦‚æœæƒ³è®© ViewController å“åº”æ‰‹æœºçš„ rotationï¼Œå¿…é¡»åŒæ—¶æ»¡è¶³ä»¥ä¸‹<span class="number">3</span>ä¸ªæ¡ä»¶ï¼š
    shouldAutorotate è¦è¿”å› YES
    supportedInterfaceOrientations è¦è¿”å›ç›¸åº”çš„ orientation
    Info<span class="class">.plist</span> ä¸­è¦è®¾ç½®å…è®¸ç›¸åº”çš„ orientation
</code></pre></li>
<li><p><code>viewWillAppear: / viewDidAppear:</code>ï¼šLayout å®Œæˆåï¼Œå°±å¯ä»¥è®© view ç°èº«äº†ã€‚ä¸åƒ viewDidLoadï¼Œè¿™ç»„å‡½æ•°æ˜¯å¯ä»¥éšç€ view çš„ visible çŠ¶æ€æ”¹å˜è€Œæ‰§è¡Œå¤šæ¬¡çš„ï¼Œæ­£å¦‚å…¶å‡½æ•°åç§°è¡¨ç¤ºçš„æ„æ€ã€‚</p>
</li>
<li><p><code>åœ¨ view visible æœŸé—´ï¼Œæ¯å½“ geometry æ”¹å˜å°±ä¼šè°ƒç”¨viewWill/DidLayoutSubviews:è¿™ç»„å‡½æ•°ã€‚</code></p>
</li>
<li><p><code>viewWillDisappear: / viewDidDisappear:</code>è¿™ç»„å‡½æ•°ä¹Ÿä¼šéšç€ view çš„ visible çŠ¶æ€æ”¹å˜è€Œæ‰§è¡Œå¤šæ¬¡ã€‚</p>
<p>  <strong>æ³¨æ„</strong>ï¼Œåœ¨ viewWill/DidXXX è¿™4ä¸ªå‡½æ•°é‡Œé¢æ€»æ˜¯éœ€è¦è°ƒç”¨ super çš„å¯¹åº”å‡½æ•°ã€‚åœ¨ viewWillXXX è¿™2ä¸ªå‡½æ•°é‡Œé¢ä¸è¦åšå¤ªè´¹æ—¶çš„æ“ä½œï¼Œå› ä¸ºæ—¶é—´æœ‰é™ï¼Œwill è¿™ä¸ªçŠ¶æ€é©¬ä¸Šå°±ä¼šè¿‡å»çš„ã€‚</p>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šLife_Cycle">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šLife Cycle</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š5ï¼Œ17</em></p>]]>
    
    </summary>
    
      <category term="iOS" scheme="http://hi.zongquan.wang/tags/iOS/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Study iOS - MVC]]></title>
    <link href="http://hi.zongquan.wang/2015/01/05/Study_iOS_MVC/"/>
    <id>http://hi.zongquan.wang/2015/01/05/Study_iOS_MVC/</id>
    <published>2015-01-05T11:38:55.000Z</published>
    <updated>2016-04-08T01:23:43.000Z</updated>
    <content type="html"><![CDATA[<p>iOSå­¦ä¹ èµ·æ­¥é˜¶æ®µï¼ŒæŠ½ç©ºçœ‹å®Œäº† Stanford è€å¤´çš„ Developing Applications for iOS ç³»åˆ—è§†é¢‘ï¼ŒæŒºä¸é”™çš„ï¼Œæµ…æ˜¾æ˜“æ‡‚ã€‚æ‰“ç®—æŠŠâ€œè§‚åæ„Ÿâ€åšæˆç¬”è®°ï¼ŒæŒ‘äº›é‡è¦çš„ç‚¹ï¼Œç†ä¸€ç†ï¼Œçœå¾—ä»¥åè¿˜è¦é‡æ–°çœ‹æ•´ä¸ªæ•™ç¨‹çš„æ–‡æ¡£ã€‚</p>
<a id="more"></a>
<h3 id="Developing_Applications_for_iOS_è§‚åæ„Ÿç³»åˆ—ï¼šMVC_è®¾è®¡æ¨¡å¼">Developing Applications for iOS è§‚åæ„Ÿç³»åˆ—ï¼šMVC è®¾è®¡æ¨¡å¼</h3><p><em>ç›¸å…³è§†é¢‘ç« èŠ‚ï¼š1</em></p>
<hr>
<p>å…ˆä¸Šå›¾ï¼</p>
<p><img src="/img/Study_iOS_MVC/1.0.MVC.png" alt="MVC"></p>
<p>è¿™å¹…å›¾æè¿°çš„æ˜¯å•ä¸€çš„ <strong><code>MVC</code></strong> æ¨¡å¼ã€‚æ™®é€šçš„ iOS å¼€å‘å°±é è¿™ä¸ª MVC æ¨¡å¼èµ°éå¤©ä¸‹äº†ã€‚ï¼ˆæœ‰ç‰›äººå¼€åˆ›äº†ä¸ª <a href="https://github.com/ReactiveCocoa/ReactiveCocoa" target="_blank" rel="external">ReactiveCocoa æ¨¡å¼</a>ï¼‰</p>
<h4 id="ç†è§£ä¸€ä¸‹_MVC_æ¨¡å¼ï¼š">ç†è§£ä¸€ä¸‹ MVC æ¨¡å¼ï¼š</h4><ol>
<li>V å’Œ M æ°¸è¿œä¹Ÿä¸èƒ½åœ¨ä¸€èµ·ï¼Œæ— æ³•åšç›´æ¥é€šä¿¡ã€‚C -&gt; M å­˜åœ¨å•å‘çš„ç›´æ¥é€šä¿¡ã€‚C -&gt; V å­˜åœ¨å•å‘çš„ç›´æ¥é€šä¿¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒC æ°¸è¿œæ˜¯è€å¤§ï¼Œå®ƒè´Ÿè´£å©å’ V å’Œ M åŠäº‹ï¼Œè€Œä¸”ä¸å— V å’Œ M çš„ç›´æ¥å½±å“ã€‚</li>
<li>é€šè¿‡å°† V è®¾ç½®æˆ C çš„ <em><code>outlet</code></em> <em>(Control Drag)</em>ï¼Œå¯ä»¥å®ç° C å¯¹ V çš„ç›´æ¥é€šä¿¡ï¼Œå³ C -&gt; Vã€‚è€Œ V â€“&gt; C çš„é—´æ¥é€šä¿¡æ–¹å¼åŒ…æ‹¬2ç§ï¼š<em><code>target-action</code></em> ä»¥åŠ <em><code>delegateï¼ˆdata source ä¹Ÿå¯ä»¥ç†è§£æˆ delegateï¼‰</code></em>ã€‚</li>
<li>C -&gt; M æ˜¯ç†æ‰€å½“ç„¶çš„ã€‚è€Œ M â€“&gt; C çš„é—´æ¥é€šä¿¡æ˜¯é€šè¿‡ <em><code>Notification &amp; KVO</code></em> å®ç°çš„ã€‚</li>
</ol>
<p>åŸºäºå•ä¸ªçš„ MVCï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºå¤æ‚çš„å¤š MVCã€‚</p>
<p><img src="/img/Study_iOS_MVC/1.1.MVCs.png" alt="MVCs"></p>
<p><strong>ä½†ä¸ç®¡å¤šå¤æ‚ï¼Œæ€»æ˜¯åšæŒè¿™ä¸ªåŸåˆ™</strong>ï¼šä¸€ä¸ª MVC æ˜¯ä½œä¸ºå¦ä¸€ä¸ª MVC çš„ V éƒ¨åˆ†è€Œå­˜åœ¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œçˆ¶ MVC ä¸­çš„ C æ§åˆ¶çš„æ˜¯å­ MVC ä¸­çš„ Cï¼Œè€Œä¸æ˜¯ç›´æ¥å»å¹²é¢„å­ MVC ä¸­çš„ Vã€‚å½“ç„¶ï¼Œå¤šä¸ª MVC æ˜¯å¯ä»¥å…±äº«åŒä¸€ä¸ª M çš„ï¼Œæ¯•ç«Ÿ Notification æ˜¯å¹¿æ’­æ€§è´¨çš„ï¼Œå¯ä»¥æœ‰å¤šä¸ª Observerã€‚</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>iOSå­¦ä¹ èµ·æ­¥é˜¶æ®µï¼ŒæŠ½ç©ºçœ‹å®Œäº† Stanford è€å¤´çš„ Developing Applications for iOS ç³»åˆ—è§†é¢‘ï¼ŒæŒºä¸é”™çš„ï¼Œæµ…æ˜¾æ˜“æ‡‚ã€‚æ‰“ç®—æŠŠâ€œè§‚åæ„Ÿâ€åšæˆç¬”è®°ï¼ŒæŒ‘äº›é‡è¦çš„ç‚¹ï¼Œç†ä¸€ç†ï¼Œçœå¾—ä»¥åè¿˜è¦é‡æ–°çœ‹æ•´ä¸ªæ•™ç¨‹çš„æ–‡æ¡£ã€‚</p>]]>
    
    </summary>
    
      <category term="iOS" scheme="http://hi.zongquan.wang/tags/iOS/"/>
    
      <category term="å¼€å‘" scheme="http://hi.zongquan.wang/categories/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
</feed>
